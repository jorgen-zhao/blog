(window.webpackJsonp=window.webpackJsonp||[]).push([[358],{709:function(t,s,a){"use strict";a.r(s);var n=a(15),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­ï¼Œæ•°æ®åº“ä½œä¸ºæ•°æ®å­˜å‚¨çš„æ ¸å¿ƒç»„ä»¶ï¼Œå…¶å¯é æ€§å’Œä¸€è‡´æ€§è‡³å…³é‡è¦ã€‚"),s("s",[t._v("æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„é“¶è¡Œè½¬è´¦æ“ä½œï¼Œé’±æ‰£äº†ä½†å¯¹æ–¹æ²¡æ”¶åˆ°ï¼Œæˆ–è€…é‡å¤æ‰£æ¬¾ï¼Œé‚£å°†æ˜¯å¤šä¹ˆå¯æ€•çš„åœºæ™¯")]),t._v("ã€‚ğŸ¤¯")]),t._v(" "),s("p",[t._v("æ•°æ®åº“äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶æ­£æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„å…³é”®æŠ€æœ¯ã€‚å®ƒä»¬ç¡®ä¿äº†å³ä½¿åœ¨å¤šç”¨æˆ·åŒæ—¶è®¿é—®æ•°æ®åº“çš„æƒ…å†µä¸‹ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ä¹Ÿèƒ½å¾—åˆ°ä¿è¯ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨è¿™ä¸ªæ•°æ®åº“é¢†åŸŸçš„æ ¸å¿ƒæŠ€æœ¯ã€‚")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v('"äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œçš„é€»è¾‘å•å…ƒï¼Œå®ƒæ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚"')])]),t._v(" "),s("h2",{attrs:{id:"æ•°æ®åº“äº‹åŠ¡åŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“äº‹åŠ¡åŸºç¡€"}},[t._v("#")]),t._v(" æ•°æ®åº“äº‹åŠ¡åŸºç¡€")]),t._v(" "),s("h3",{attrs:{id:"acidç‰¹æ€§è¯¦è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acidç‰¹æ€§è¯¦è§£"}},[t._v("#")]),t._v(" ACIDç‰¹æ€§è¯¦è§£")]),t._v(" "),s("p",[t._v("äº‹åŠ¡å…·æœ‰å››ä¸ªåŸºæœ¬ç‰¹æ€§ï¼Œé€šå¸¸ç”¨ACIDæ¥è¡¨ç¤ºï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŸå­æ€§ï¼ˆAtomicityï¼‰")]),t._v("ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰")]),t._v("ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("éš”ç¦»æ€§ï¼ˆIsolationï¼‰")]),t._v("ï¼šå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´åº”è¯¥ç›¸äº’éš”ç¦»ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”å½±å“å…¶ä»–äº‹åŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æŒä¹…æ€§ï¼ˆDurabilityï¼‰")]),t._v("ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä½¿ç³»ç»Ÿå‘ç”Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- äº‹åŠ¡çš„åŸå­æ€§ç¤ºä¾‹ï¼šé“¶è¡Œè½¬è´¦")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TRANSACTION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ä»è´¦æˆ·Aæ‰£æ¬¾")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),t._v(" accounts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" account_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å‘è´¦æˆ·Bå­˜æ¬¾")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),t._v(" accounts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" account_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),s("p",[t._v("äº‹åŠ¡é€šå¸¸ç»å†ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å¼€å§‹ï¼ˆBEGINï¼‰")]),t._v("ï¼šæ˜¾å¼æˆ–éšå¼åœ°å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ‰§è¡Œï¼ˆEXECUTEï¼‰")]),t._v("ï¼šæ‰§è¡Œå„ç§æ•°æ®åº“æ“ä½œã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æäº¤ï¼ˆCOMMITï¼‰")]),t._v("ï¼šç¡®è®¤äº‹åŠ¡çš„æ‰€æœ‰æ“ä½œï¼Œä½¿å˜æ›´æ°¸ä¹…ç”Ÿæ•ˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å›æ»šï¼ˆROLLBACKï¼‰")]),t._v("ï¼šå–æ¶ˆäº‹åŠ¡çš„æ‰€æœ‰æ“ä½œï¼Œæ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[t._v("#")]),t._v(" äº‹åŠ¡éš”ç¦»çº§åˆ«")]),t._v(" "),s("p",[t._v("ä¸ºäº†å¹³è¡¡ä¸€è‡´æ€§å’Œå¹¶å‘æ€§èƒ½ï¼Œæ•°æ®åº“æä¾›äº†ä¸åŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("éš”ç¦»çº§åˆ«")]),t._v(" "),s("th",[t._v("è„è¯»")]),t._v(" "),s("th",[t._v("ä¸å¯é‡å¤è¯»")]),t._v(" "),s("th",[t._v("å¹»è¯»")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰")]),t._v(" "),s("td",[t._v("å¯èƒ½")]),t._v(" "),s("td",[t._v("å¯èƒ½")]),t._v(" "),s("td",[t._v("å¯èƒ½")])]),t._v(" "),s("tr",[s("td",[t._v("è¯»å·²æäº¤ï¼ˆRead Committedï¼‰")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")]),t._v(" "),s("td",[t._v("å¯èƒ½")]),t._v(" "),s("td",[t._v("å¯èƒ½")])]),t._v(" "),s("tr",[s("td",[t._v("å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")]),t._v(" "),s("td",[t._v("å¯èƒ½")])]),t._v(" "),s("tr",[s("td",[t._v("ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")]),t._v(" "),s("td",[t._v("ä¸å¯èƒ½")])])])]),t._v(" "),s("blockquote",[s("p",[t._v('ğŸ’¡ å¤§å¤šæ•°æ•°æ®åº“é»˜è®¤ä½¿ç”¨"è¯»å·²æäº¤"æˆ–"å¯é‡å¤è¯»"çº§åˆ«ï¼ŒMySQLçš„InnoDBå¼•æ“é»˜è®¤ä¸º"å¯é‡å¤è¯»"ã€‚')])]),t._v(" "),s("h2",{attrs:{id:"å¹¶å‘æ§åˆ¶æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘æ§åˆ¶æœºåˆ¶"}},[t._v("#")]),t._v(" å¹¶å‘æ§åˆ¶æœºåˆ¶")]),t._v(" "),s("h3",{attrs:{id:"é”æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é”æœºåˆ¶"}},[t._v("#")]),t._v(" é”æœºåˆ¶")]),t._v(" "),s("p",[t._v("é”æ˜¯å®ç°å¹¶å‘æ§åˆ¶çš„ä¸»è¦æœºåˆ¶ä¹‹ä¸€ï¼Œå¸¸è§çš„é”ç±»å‹åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å…±äº«é”ï¼ˆSé”/è¯»é”ï¼‰")]),t._v("ï¼šå…è®¸äº‹åŠ¡è¯»å–æ•°æ®ï¼Œä½†ä¸å…è®¸ä¿®æ”¹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ’ä»–é”ï¼ˆXé”/å†™é”ï¼‰")]),t._v("ï¼šåªå…è®¸ä¸€ä¸ªäº‹åŠ¡æŒæœ‰ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡è¯»å–æˆ–ä¿®æ”¹æ•°æ®ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ„å‘é”")]),t._v("ï¼šè¡¨æ˜äº‹åŠ¡æ„å›¾åœ¨å±‚æ¬¡ç»“æ„çš„è¾ƒä½çº§åˆ«ä¸Šè·å–å…±äº«é”æˆ–æ’ä»–é”ã€‚")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ç¤ºä¾‹ï¼šä½¿ç”¨é”æ§åˆ¶å¹¶å‘è®¿é—®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TRANSACTION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- è·å–æ’ä»–é”")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" products "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" product_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FOR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- æ›´æ–°äº§å“åº“å­˜")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),t._v(" products "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" stock "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stock "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" product_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"ä¸¤é˜¶æ®µé”å®šåè®®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤é˜¶æ®µé”å®šåè®®"}},[t._v("#")]),t._v(" ä¸¤é˜¶æ®µé”å®šåè®®")]),t._v(" "),s("p",[t._v("ä¸¤é˜¶æ®µé”å®šåè®®ï¼ˆ2PLï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶åè®®ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ç¬¬ä¸€é˜¶æ®µï¼ˆåŠ é”é˜¶æ®µï¼‰")]),t._v("ï¼šäº‹åŠ¡å¯ä»¥æ ¹æ®éœ€è¦è·å–æ•°æ®é¡¹çš„é”ï¼Œä½†ä¸èƒ½é‡Šæ”¾ä»»ä½•é”ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç¬¬äºŒé˜¶æ®µï¼ˆè§£é”é˜¶æ®µï¼‰")]),t._v("ï¼šäº‹åŠ¡å¯ä»¥é‡Šæ”¾æ•°æ®é¡¹çš„é”ï¼Œä½†ä¸èƒ½è·å–æ–°çš„é”ã€‚")])]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("ä¸¤é˜¶æ®µé”å®šåè®®å¯ä»¥ä¿è¯è°ƒåº¦çš„å¯ä¸²è¡ŒåŒ–ï¼Œä»è€Œé¿å…å¹¶å‘é—®é¢˜ï¼Œä½†å¯èƒ½å¯¼è‡´æ­»é”ã€‚")])]),s("h3",{attrs:{id:"ä¹è§‚å¹¶å‘æ§åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¹è§‚å¹¶å‘æ§åˆ¶"}},[t._v("#")]),t._v(" ä¹è§‚å¹¶å‘æ§åˆ¶")]),t._v(" "),s("p",[t._v("ä¸æ‚²è§‚é”ä¸åŒï¼Œä¹è§‚å¹¶å‘æ§åˆ¶å‡è®¾å†²çªè¾ƒå°‘å‘ç”Ÿï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è¯»å–é˜¶æ®µ")]),t._v("ï¼šäº‹åŠ¡è¯»å–æ•°æ®ä½†ä¸åŠ é”ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("éªŒè¯é˜¶æ®µ")]),t._v("ï¼šåœ¨æäº¤å‰æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å†™å…¥é˜¶æ®µ")]),t._v("ï¼šå¦‚æœéªŒè¯é€šè¿‡ï¼Œæäº¤äº‹åŠ¡ï¼›å¦åˆ™ï¼Œå›æ»šå¹¶é‡è¯•ã€‚")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¹è§‚å¹¶å‘æ§åˆ¶ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateProduct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è¯»å–å½“å‰æ•°æ®ç‰ˆæœ¬")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" productRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦åŒ¹é…")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. æ›´æ–°æ•°æ®å¹¶å¢åŠ ç‰ˆæœ¬å·")]),t._v("\n    product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    productRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("h2",{attrs:{id:"å¸¸è§å¹¶å‘é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§å¹¶å‘é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" å¸¸è§å¹¶å‘é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ")]),t._v(" "),s("h3",{attrs:{id:"ä¸¢å¤±æ›´æ–°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¢å¤±æ›´æ–°"}},[t._v("#")]),t._v(" ä¸¢å¤±æ›´æ–°")]),t._v(" "),s("p",[t._v("å½“ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ•°æ®ï¼Œç„¶ååŸºäºè¯»å–çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œå…¶ä¸­ä¸€ä¸ªä¿®æ”¹ä¼šè¦†ç›–å¦ä¸€ä¸ªä¿®æ”¹ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨æ‚²è§‚é”ï¼ˆ"),s("code",[t._v("SELECT FOR UPDATE")]),t._v("ï¼‰")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆç‰ˆæœ¬å·æ£€æŸ¥ï¼‰")]),t._v(" "),s("li",[t._v("ä½¿ç”¨åŸå­æ›´æ–°æ“ä½œ")])]),t._v(" "),s("h3",{attrs:{id:"è¯»è„æ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¯»è„æ•°æ®"}},[t._v("#")]),t._v(" è¯»è„æ•°æ®")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v('ç¡®ä¿æ•°æ®åº“ä½¿ç”¨"è¯»å·²æäº¤"æˆ–æ›´é«˜çº§åˆ«çš„éš”ç¦»çº§åˆ«')]),t._v(" "),s("li",[t._v("é¿å…åœ¨äº‹åŠ¡ä¸­è¯»å–å¯èƒ½è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®")])]),t._v(" "),s("h3",{attrs:{id:"ä¸å¯é‡å¤è¯»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸å¯é‡å¤è¯»"}},[t._v("#")]),t._v(" ä¸å¯é‡å¤è¯»")]),t._v(" "),s("p",[t._v("åœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ä½†å¾—åˆ°ä¸åŒçš„ç»“æœï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡åœ¨ä¸¤æ¬¡è¯»å–ä¹‹é—´ä¿®æ”¹äº†è¯¥æ•°æ®ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v('ä½¿ç”¨"å¯é‡å¤è¯»"æˆ–"ä¸²è¡ŒåŒ–"éš”ç¦»çº§åˆ«')]),t._v(" "),s("li",[t._v("ä½¿ç”¨å¿«ç…§éš”ç¦»ï¼ˆå¦‚PostgreSQLçš„MVCCï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"å¹»è¯»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¹»è¯»"}},[t._v("#")]),t._v(" å¹»è¯»")]),t._v(" "),s("p",[t._v("å½“åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡æ‰§è¡Œç›¸åŒæŸ¥è¯¢ï¼Œä½†è¿”å›çš„è¡Œæ•°ä¸åŒï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ’å…¥äº†æ–°è¡Œã€‚")]),t._v(" "),s("p",[s("strong",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v('ä½¿ç”¨"ä¸²è¡ŒåŒ–"éš”ç¦»çº§åˆ«')]),t._v(" "),s("li",[t._v("ä½¿ç”¨é—´éš™é”ï¼ˆGap Locksï¼‰æˆ–Next-Keyé”")])]),t._v(" "),s("h2",{attrs:{id:"å®è·µåº”ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µåº”ç”¨"}},[t._v("#")]),t._v(" å®è·µåº”ç”¨")]),t._v(" "),s("h3",{attrs:{id:"ä¸åŒæ•°æ®åº“ç³»ç»Ÿä¸­çš„äº‹åŠ¡å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸åŒæ•°æ®åº“ç³»ç»Ÿä¸­çš„äº‹åŠ¡å®ç°"}},[t._v("#")]),t._v(" ä¸åŒæ•°æ®åº“ç³»ç»Ÿä¸­çš„äº‹åŠ¡å®ç°")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("MySQL/InnoDB")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é»˜è®¤éš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»")]),t._v(" "),s("li",[t._v("æ”¯æŒè¡Œçº§é”")]),t._v(" "),s("li",[t._v("ä½¿ç”¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰å®ç°é«˜å¹¶å‘")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("PostgreSQL")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é»˜è®¤éš”ç¦»çº§åˆ«ï¼šè¯»å·²æäº¤")]),t._v(" "),s("li",[t._v("æ”¯æŒMVCC")]),t._v(" "),s("li",[t._v("æä¾›æ›´é«˜çº§çš„éš”ç¦»çº§åˆ«å’Œé”æœºåˆ¶")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Oracle")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é»˜è®¤éš”ç¦»çº§åˆ«ï¼šè¯»å·²æäº¤")]),t._v(" "),s("li",[t._v("ä½¿ç”¨MVCC")]),t._v(" "),s("li",[t._v("æä¾›å¼ºå¤§çš„å¹¶å‘æ§åˆ¶é€‰é¡¹")])])])]),t._v(" "),s("h3",{attrs:{id:"äº‹åŠ¡ä½¿ç”¨æœ€ä½³å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡ä½¿ç”¨æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" äº‹åŠ¡ä½¿ç”¨æœ€ä½³å®è·µ")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ä¿æŒäº‹åŠ¡ç®€çŸ­")]),t._v("ï¼šäº‹åŠ¡åº”å°½å¯èƒ½çŸ­ï¼Œå‡å°‘é”å®šèµ„æºçš„æ—¶é—´ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("é¿å…é•¿äº‹åŠ¡")]),t._v("ï¼šé•¿äº‹åŠ¡ä¼šå¢åŠ æ­»é”é£é™©å’Œé”äº‰ç”¨ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åˆç†è®¾ç½®éš”ç¦»çº§åˆ«")]),t._v("ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨æœ€é«˜çº§åˆ«ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ‰¹é‡æ“ä½œæ—¶è€ƒè™‘åˆ†æ‰¹æäº¤")]),t._v("ï¼šå¤§æ‰¹é‡æ•°æ®æ“ä½œåº”åˆ†æ‰¹è¿›è¡Œï¼Œé¿å…é•¿äº‹åŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä½¿ç”¨é€‚å½“çš„é”ç­–ç•¥")]),t._v("ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©ä¹è§‚é”æˆ–æ‚²è§‚é”ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"æ€§èƒ½ä¸äº‹åŠ¡çš„æƒè¡¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½ä¸äº‹åŠ¡çš„æƒè¡¡"}},[t._v("#")]),t._v(" æ€§èƒ½ä¸äº‹åŠ¡çš„æƒè¡¡")]),t._v(" "),s("p",[t._v("äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶æœºåˆ¶åœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œä¹Ÿä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("æ€§èƒ½å½±å“")]),t._v(" "),s("th",[t._v("è§£å†³æ–¹æ¡ˆ")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("é«˜éš”ç¦»çº§åˆ«")]),t._v(" "),s("td",[t._v("å¯èƒ½å¢åŠ é”äº‰ç”¨ï¼Œé™ä½å¹¶å‘æ€§èƒ½")]),t._v(" "),s("td",[t._v("æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«")])]),t._v(" "),s("tr",[s("td",[t._v("æ‚²è§‚é”")]),t._v(" "),s("td",[t._v("å¯èƒ½å¢åŠ æ­»é”é£é™©")]),t._v(" "),s("td",[t._v("ä½¿ç”¨åˆç†çš„é”è¶…æ—¶è®¾ç½®ï¼Œé¿å…é•¿æ—¶é—´æŒæœ‰é”")])]),t._v(" "),s("tr",[s("td",[t._v("ä¹è§‚é”")]),t._v(" "),s("td",[t._v("é«˜å¹¶å‘å†²çªæ—¶å¯èƒ½å¯¼è‡´é‡è¯•æ¬¡æ•°å¢åŠ ")]),t._v(" "),s("td",[t._v("å®ç°æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶")])]),t._v(" "),s("tr",[s("td",[t._v("é•¿äº‹åŠ¡")]),t._v(" "),s("td",[t._v("å¢åŠ é”æŒæœ‰æ—¶é—´ï¼Œé™ä½ç³»ç»Ÿååé‡")]),t._v(" "),s("td",[t._v("æ‹†åˆ†é•¿äº‹åŠ¡ä¸ºå¤šä¸ªçŸ­äº‹åŠ¡")])])])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v("æ•°æ®åº“äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶æ˜¯ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§çš„æ ¸å¿ƒæŠ€æœ¯ã€‚é€šè¿‡åˆç†ä½¿ç”¨ACIDç‰¹æ€§ã€é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«ã€åº”ç”¨é€‚å½“çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå®ç°é«˜æ•ˆçš„å¹¶å‘è®¿é—®ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„æ—¥ç›Šæ™®åŠçš„ä»Šå¤©ï¼Œç†è§£äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶çš„åŸç†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æ— è®ºæ˜¯æœ¬åœ°äº‹åŠ¡ã€åˆ†å¸ƒå¼äº‹åŠ¡è¿˜æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œéƒ½éœ€è¦æˆ‘ä»¬å¯¹è¿™äº›åŸºç¡€æ¦‚å¿µæœ‰æ·±å…¥çš„ç†è§£ã€‚")])]),t._v(" "),s("p",[t._v("å¯¹äºæ•°æ®åº“å¼€å‘è€…è€Œè¨€ï¼ŒæŒæ¡äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶çš„åŸç†ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥å£®çš„ä»£ç ï¼Œè¿˜èƒ½åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œæ›´å¿«åœ°å®šä½å’Œè§£å†³é—®é¢˜ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ•°æ®åº“äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶çš„æ ¸å¿ƒæ¦‚å¿µã€‚")]),t._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[t._v('"æ•°æ®åº“æ˜¯åº”ç”¨çš„åŸºçŸ³ï¼Œè€Œäº‹åŠ¡åˆ™æ˜¯åŸºçŸ³çš„çµé­‚ã€‚"')])])])}),[],!1,null,null,null);s.default=r.exports}}]);