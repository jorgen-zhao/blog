(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{449:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v('éšç€å¤§è¯­è¨€æ¨¡å‹(LLM)åœ¨å„ä¸ªé¢†åŸŸçš„å¹¿æ³›åº”ç”¨ï¼Œæˆ‘ä»¬è¶Šæ¥è¶Šä¾èµ–è¿™äº›å¼ºå¤§çš„AIç³»ç»Ÿæ¥åšå‡ºå†³ç­–ã€ç”Ÿæˆå†…å®¹å¹¶æä¾›æœåŠ¡ã€‚ç„¶è€Œï¼Œè¿™äº›æ¨¡å‹é€šå¸¸è¢«è§†ä¸º"é»‘ç®±"â€”â€”æˆ‘ä»¬è¾“å…¥æŒ‡ä»¤ï¼Œå®ƒä»¬è¾“å‡ºç»“æœï¼Œä½†ä¸­é—´çš„å†³ç­–è¿‡ç¨‹å´éš¾ä»¥æ‰æ‘¸ã€‚ğŸ¤” å½“æ¨¡å‹ç»™å‡ºé”™è¯¯æˆ–æœ‰åè§çš„å›ç­”æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•ç†è§£å…¶èƒŒåçš„åŸå› ï¼Ÿå½“æ¨¡å‹æ‹’ç»æä¾›æŸäº›ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬åˆå¦‚ä½•åˆ¤æ–­è¿™æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘è¿˜æ˜¯å…¶ä»–åŸå› ï¼Ÿ')]),t._v(" "),s("p",[t._v("æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§æŠ€æœ¯ï¼Œæ¢ç´¢å¦‚ä½•æ­å¼€è¿™äº›AIç³»ç»Ÿçš„ç¥ç§˜é¢çº±ï¼Œè®©å®ƒä»¬å˜å¾—æ›´åŠ é€æ˜å’Œå¯ä¿¡ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§ï¼Ÿ")]),t._v(" "),s("p",[t._v('å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§æŒ‡çš„æ˜¯ç†è§£ã€è§£é‡Šå’Œå¯è§†åŒ–æ¨¡å‹å†³ç­–è¿‡ç¨‹çš„èƒ½åŠ›ã€‚å®ƒå…³æ³¨çš„æ˜¯"ä¸ºä»€ä¹ˆ"æ¨¡å‹ä¼šç»™å‡ºç‰¹å®šçš„è¾“å‡ºï¼Œè€Œä¸ä»…ä»…æ˜¯"ä»€ä¹ˆ"è¾“å‡ºã€‚')]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("å¯è§£é‡Šæ€§(Explainability)ä¸é€æ˜åº¦(Transparency)æ˜¯ç›¸å…³ä½†ä¸å®Œå…¨ç›¸åŒçš„æ¦‚å¿µï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é€æ˜åº¦")]),t._v("ï¼šæŒ‡æ¨¡å‹çš„å†…éƒ¨å·¥ä½œæœºåˆ¶æ˜¯å¦å¯ä»¥è¢«ç†è§£å’Œå®¡æŸ¥")]),t._v(" "),s("li",[s("strong",[t._v("å¯è§£é‡Šæ€§")]),t._v("ï¼šæŒ‡æ¨¡å‹çš„å†³ç­–è¿‡ç¨‹èƒ½å¦ä»¥äººç±»å¯ç†è§£çš„æ–¹å¼å‘ˆç°")])])]),s("h2",{attrs:{id:"ä¸ºä»€ä¹ˆå¯è§£é‡Šæ€§å¯¹llmè‡³å…³é‡è¦"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆå¯è§£é‡Šæ€§å¯¹llmè‡³å…³é‡è¦"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆå¯è§£é‡Šæ€§å¯¹LLMè‡³å…³é‡è¦ï¼Ÿ")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å»ºç«‹ä¿¡ä»»")]),t._v("ï¼šç†è§£æ¨¡å‹çš„å†³ç­–è¿‡ç¨‹æœ‰åŠ©äºç”¨æˆ·å»ºç«‹å¯¹ç³»ç»Ÿçš„ä¿¡ä»»")]),t._v(" "),s("li",[s("strong",[t._v("è°ƒè¯•ä¸æ”¹è¿›")]),t._v("ï¼šè¯†åˆ«æ¨¡å‹é”™è¯¯è¡Œä¸ºçš„åŸå› ï¼Œæœ‰åŠ©äºæ”¹è¿›æ¨¡å‹")]),t._v(" "),s("li",[s("strong",[t._v("å…¬å¹³æ€§ä¸åè§æ£€æµ‹")]),t._v("ï¼šå‘ç°å¹¶æ¶ˆé™¤æ¨¡å‹ä¸­çš„åè§å’Œä¸å…¬å¹³æ€§")]),t._v(" "),s("li",[s("strong",[t._v("åˆè§„æ€§è¦æ±‚")]),t._v("ï¼šåœ¨é‡‘èã€åŒ»ç–—ç­‰å—ç›‘ç®¡é¢†åŸŸï¼Œå†³ç­–å¯è§£é‡Šæ€§æ˜¯æ³•å¾‹è¦æ±‚")]),t._v(" "),s("li",[s("strong",[t._v("çŸ¥è¯†å‘ç°")]),t._v("ï¼šé€šè¿‡åˆ†ææ¨¡å‹è¡Œä¸ºï¼Œå¯ä»¥è·å–å…³äºè¯­è¨€å’ŒçŸ¥è¯†çš„æ´è§")])]),t._v(" "),s("h2",{attrs:{id:"å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„ä¸»è¦æŠ€æœ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„ä¸»è¦æŠ€æœ¯"}},[t._v("#")]),t._v(" å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„ä¸»è¦æŠ€æœ¯")]),t._v(" "),s("h3",{attrs:{id:"_1-æ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ–"}},[t._v("#")]),t._v(" 1. æ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ–")]),t._v(" "),s("p",[t._v("æ³¨æ„åŠ›æœºåˆ¶æ˜¯Transformeræ¶æ„çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒæ˜¾ç¤ºäº†æ¨¡å‹åœ¨ç”Ÿæˆè¾“å‡ºæ—¶å…³æ³¨è¾“å…¥çš„å“ªäº›éƒ¨åˆ†ã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šä½¿ç”¨transformersåº“å¯è§†åŒ–æ³¨æ„åŠ›æƒé‡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" transformers "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AutoTokenizer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AutoModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" utils\nutils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_verbosity_error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Suppress transformers warnings")]),t._v("\n\ntokenizer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AutoTokenizer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_pretrained"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AutoModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_pretrained"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" output_attentions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The cat sat on the mat because it was tired."')]),t._v("\ninputs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokenizer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" return_tensors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\noutputs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nattention_weights "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" outputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attentions\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯è§†åŒ–æ³¨æ„åŠ›æƒé‡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("é€šè¿‡å¯è§†åŒ–æ³¨æ„åŠ›æƒé‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å‹åœ¨é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ—¶å…³æ³¨äº†å“ªäº›ä¸Šä¸‹æ–‡è¯ï¼Œä»è€Œç†è§£æ¨¡å‹çš„æ¨ç†è·¯å¾„ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-æ¿€æ´»åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ¿€æ´»åˆ†æ"}},[t._v("#")]),t._v(" 2. æ¿€æ´»åˆ†æ")]),t._v(" "),s("p",[t._v("æ¿€æ´»åˆ†ææ£€æŸ¥æ¨¡å‹å†…éƒ¨ç‰¹å®šå±‚çš„æ¿€æ´»æ¨¡å¼ï¼Œä»¥è¯†åˆ«å“ªäº›è¾“å…¥ç‰¹å¾å¯¹æ¨¡å‹çš„å†³ç­–æœ‰é‡è¦å½±å“ã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šåˆ†æç‰¹å®šå±‚çš„æ¿€æ´»æ¨¡å¼")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" torch\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyze_activations")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layer_idx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–ç‰¹å®šå±‚çš„æ¿€æ´»")]),t._v("\n    activations "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" get_layer_activations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layer_idx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—æ¿€æ´»çš„é‡è¦æ€§")]),t._v("\n    importance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("abs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" axis"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¯†åˆ«æœ€é‡è¦çš„ç¥ç»å…ƒ")]),t._v("\n    top_neurons "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argsort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("importance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" top_neurons\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h3",{attrs:{id:"_3-å½±å“åŠ›å‡½æ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å½±å“åŠ›å‡½æ•°"}},[t._v("#")]),t._v(" 3. å½±å“åŠ›å‡½æ•°")]),t._v(" "),s("p",[t._v("å½±å“åŠ›å‡½æ•°(Influence Functions)ç”¨äºé‡åŒ–è®­ç»ƒæ•°æ®ä¸­çš„ç‰¹å®šæ ·æœ¬å¯¹æ¨¡å‹é¢„æµ‹çš„å½±å“ã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šè®¡ç®—è®­ç»ƒæ ·æœ¬å¯¹é¢„æµ‹çš„å½±å“åŠ›")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compute_influence")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loss_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" train_data_point"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" test_data_point"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—æŸå¤±å¯¹æ¨¡å‹å‚æ•°çš„æ¢¯åº¦")]),t._v("\n    grad_wrt_params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compute_gradient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loss_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" test_data_point"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—æŸå¤±å¯¹è®­ç»ƒæ ·æœ¬çš„æ¢¯åº¦")]),t._v("\n    grad_wrt_train "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compute_gradient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loss_func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" train_data_point"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—å½±å“åŠ›")]),t._v("\n    influence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grad_wrt_params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flatten"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" grad_wrt_train"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flatten"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" influence\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"_4-æ¢¯åº¦åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ¢¯åº¦åˆ†æ"}},[t._v("#")]),t._v(" 4. æ¢¯åº¦åˆ†æ")]),t._v(" "),s("p",[t._v("æ¢¯åº¦åˆ†æé€šè¿‡è®¡ç®—è¾“å‡ºç›¸å¯¹äºè¾“å…¥æˆ–æ¨¡å‹å‚æ•°çš„æ¢¯åº¦ï¼Œæ¥ç†è§£æ¨¡å‹å¯¹å˜åŒ–çš„æ•æ„Ÿåº¦ã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šè®¡ç®—è¾“å…¥æ¢¯åº¦")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compute_input_gradients")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target_output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    inputs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokenizer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" return_tensors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¯ç”¨æ¢¯åº¦è®¡ç®—")]),t._v("\n    inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requires_grad_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ¨¡å‹è¾“å‡º")]),t._v("\n    outputs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    logits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" outputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logits\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¡ç®—ç›®æ ‡è¾“å‡ºçš„æ¢¯åº¦")]),t._v("\n    target_idx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokenizer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target_output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" return_tensors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    loss "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target_idx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    loss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backward"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–è¾“å…¥æ¢¯åº¦")]),t._v("\n    input_gradients "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" inputs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("grad\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" input_gradients\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h3",{attrs:{id:"_5-çŸ¥è¯†è¿½è¸ª"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-çŸ¥è¯†è¿½è¸ª"}},[t._v("#")]),t._v(" 5. çŸ¥è¯†è¿½è¸ª")]),t._v(" "),s("p",[t._v('çŸ¥è¯†è¿½è¸ªæŠ€æœ¯ç”¨äºè¯†åˆ«æ¨¡å‹"çŸ¥é“"ä»€ä¹ˆï¼Œä»¥åŠè¿™äº›çŸ¥è¯†æ˜¯å¦‚ä½•åœ¨æ¨¡å‹ä¸­è¡¨ç¤ºçš„ã€‚')]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šæ£€æŸ¥æ¨¡å‹æ˜¯å¦æŒæ¡ç‰¹å®šçŸ¥è¯†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_knowledge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fact_description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ„å»ºäº‹å®éªŒè¯æç¤º")]),t._v("\n    prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Is the following statement true or false? ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("fact_description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ¨¡å‹å›ç­”")]),t._v("\n    response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generate_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ†æå›ç­”å†…å®¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uncertain"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h3",{attrs:{id:"_6-å› æœæ¨ç†è§£é‡Š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å› æœæ¨ç†è§£é‡Š"}},[t._v("#")]),t._v(" 6. å› æœæ¨ç†è§£é‡Š")]),t._v(" "),s("p",[t._v("å› æœæ¨ç†è§£é‡Šè¯•å›¾è¯†åˆ«å¯¼è‡´ç‰¹å®šè¾“å‡ºçš„å› æœå› ç´ ï¼Œè€Œä¸ä»…ä»…æ˜¯ç›¸å…³æ€§ã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šè¯†åˆ«å› æœå› ç´ ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("identify_causal_factors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”Ÿæˆå¯èƒ½çš„å› æœå› ç´ ")]),t._v("\n    potential_factors "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generate_potential_factors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æµ‹è¯•æ¯ä¸ªå› ç´ çš„é‡è¦æ€§")]),t._v("\n    factor_importance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" factor "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" potential_factors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¿®æ”¹è¾“å…¥ä»¥æ’é™¤è¯¥å› ç´ ")]),t._v("\n        modified_input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" remove_factor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" factor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–ä¿®æ”¹åçš„è¾“å‡º")]),t._v("\n        modified_output "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generate_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" modified_input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ¯”è¾ƒè¾“å‡ºå·®å¼‚")]),t._v("\n        difference "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compute_difference"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" modified_output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        factor_importance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("factor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" difference\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¿”å›æœ€é‡è¦çš„å› æœå› ç´ ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("sorted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("factor_importance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lambda")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reverse"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h3",{attrs:{id:"_7-è‡ªç„¶è¯­è¨€è§£é‡Šç”Ÿæˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-è‡ªç„¶è¯­è¨€è§£é‡Šç”Ÿæˆ"}},[t._v("#")]),t._v(" 7. è‡ªç„¶è¯­è¨€è§£é‡Šç”Ÿæˆ")]),t._v(" "),s("p",[t._v("æœ€å‰æ²¿çš„æŠ€æœ¯æ˜¯è®©æ¨¡å‹è‡ªå·±è§£é‡Šå…¶å†³ç­–è¿‡ç¨‹ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€è§£é‡Šã€‚")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šç”Ÿæˆè‡ªç„¶è¯­è¨€è§£é‡Š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate_explanation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ„å»ºè§£é‡Šæç¤º")]),t._v("\n    explanation_prompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Explain step by step why the following input leads to this output:\\n\\nInput: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("input_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\nOutput: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\n\\nExplanation:"')])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·å–æ¨¡å‹ç”Ÿæˆçš„è§£é‡Š")]),t._v("\n    explanation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generate_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" explanation_prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" explanation\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„æŒ‘æˆ˜ä¸å±€é™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„æŒ‘æˆ˜ä¸å±€é™"}},[t._v("#")]),t._v(" å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„æŒ‘æˆ˜ä¸å±€é™")]),t._v(" "),s("p",[t._v("å°½ç®¡å¯è§£é‡Šæ€§æŠ€æœ¯å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä½†åœ¨å¤§è¯­è¨€æ¨¡å‹é¢†åŸŸä»é¢ä¸´è¯¸å¤šæŒ‘æˆ˜ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è§„æ¨¡å¤æ‚æ€§")]),t._v("ï¼šç°ä»£LLMæ‹¥æœ‰æ•°åäº¿ç”šè‡³æ•°åƒäº¿å‚æ•°ï¼Œå®Œå…¨è§£é‡Šå…¶è¡Œä¸ºå‡ ä¹ä¸å¯èƒ½")]),t._v(" "),s("li",[s("strong",[t._v("è®¡ç®—æˆæœ¬")]),t._v("ï¼šè®¸å¤šå¯è§£é‡Šæ€§æŠ€æœ¯è®¡ç®—å¼€é”€å¤§ï¼Œéš¾ä»¥åº”ç”¨äºå¤§å‹æ¨¡å‹")]),t._v(" "),s("li",[s("strong",[t._v("è§£é‡Šè´¨é‡")]),t._v("ï¼šè‡ªåŠ¨ç”Ÿæˆçš„è§£é‡Šå¯èƒ½ä¸å‡†ç¡®æˆ–å…·æœ‰è¯¯å¯¼æ€§")]),t._v(" "),s("li",[s("strong",[t._v("å¤šæ­¥éª¤æ¨ç†")]),t._v("ï¼šæ¨¡å‹å¯èƒ½æ¶‰åŠå¤šæ­¥éª¤æ¨ç†ï¼Œéš¾ä»¥è¿½è¸ªå®Œæ•´å†³ç­–é“¾")]),t._v(" "),s("li",[s("strong",[t._v("å¯¹æŠ—æ€§æ”»å‡»")]),t._v("ï¼šå¯è§£é‡Šæ€§æ–¹æ³•å¯èƒ½è¢«å¯¹æŠ—æ€§æ ·æœ¬æ‰€æ¬ºéª—")])]),t._v(" "),s("h2",{attrs:{id:"æœªæ¥å‘å±•æ–¹å‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å‘å±•æ–¹å‘"}},[t._v("#")]),t._v(" æœªæ¥å‘å±•æ–¹å‘")]),t._v(" "),s("p",[t._v("å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§é¢†åŸŸæ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹å‘ç‰¹åˆ«å€¼å¾—å…³æ³¨ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("é«˜æ•ˆå¯è§£é‡Šç®—æ³•")]),t._v("ï¼šå¼€å‘è®¡ç®—æ•ˆç‡æ›´é«˜çš„å¯è§£é‡Šæ€§æ–¹æ³•")]),t._v(" "),s("li",[s("strong",[t._v("å¤šæ¨¡æ€å¯è§£é‡Šæ€§")]),t._v("ï¼šç»“åˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ¨¡æ€çš„è§£é‡Š")]),t._v(" "),s("li",[s("strong",[t._v("äº¤äº’å¼è§£é‡Šç³»ç»Ÿ")]),t._v("ï¼šå…è®¸ç”¨æˆ·é€šè¿‡æé—®è·å–ç‰¹å®šæ–¹é¢çš„è§£é‡Š")]),t._v(" "),s("li",[s("strong",[t._v("å¯è§£é‡Šæ€§ä¸å®‰å…¨æ€§ç»“åˆ")]),t._v("ï¼šç¡®ä¿è§£é‡Šè¿‡ç¨‹æœ¬èº«ä¸ä¼šè¢«æ»¥ç”¨")]),t._v(" "),s("li",[s("strong",[t._v("æ ‡å‡†åŒ–è¯„ä¼°æ¡†æ¶")]),t._v("ï¼šå»ºç«‹ç»Ÿä¸€çš„å¯è§£é‡Šæ€§è¯„ä¼°æ ‡å‡†")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v('å¤§è¯­è¨€æ¨¡å‹çš„å¯è§£é‡Šæ€§ç ”ç©¶ä¸ä»…å…³ä¹æŠ€æœ¯å‘å±•ï¼Œæ›´å…³ä¹AIç³»ç»Ÿçš„å¯ä¿¡åº¦å’Œæ¥å—åº¦ã€‚éšç€è¿™äº›æ¨¡å‹åœ¨å…³é”®å†³ç­–ä¸­æ‰®æ¼”è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ï¼Œæˆ‘ä»¬ä¸èƒ½å†æ»¡è¶³äº"é»‘ç®±"å¼çš„AIç³»ç»Ÿã€‚é€šè¿‡ä¸æ–­å‘å±•å’Œå®Œå–„å¯è§£é‡Šæ€§æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºæ›´åŠ é€æ˜ã€å¯é å’Œè´Ÿè´£ä»»çš„AIç³»ç»Ÿã€‚')]),t._v(" "),s("blockquote",[s("p",[t._v('æ­£å¦‚è‘—åAIç ”ç©¶å‘˜Yoshua Bengioæ‰€è¨€ï¼š"å¯è§£é‡Šæ€§ä¸æ˜¯AIçš„é™„åŠ åŠŸèƒ½ï¼Œè€Œæ˜¯AIç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬åŸåˆ™ã€‚"')])]),t._v(" "),s("p",[t._v('æœªæ¥ï¼Œæˆ‘ä»¬æœŸå¾…çœ‹åˆ°æ›´å¤šåˆ›æ–°çš„å¯è§£é‡Šæ€§æ–¹æ³•ï¼Œè®©å¤§è¯­è¨€æ¨¡å‹ä»ç¥ç§˜çš„"é»‘ç®±"é€æ¸è½¬å˜ä¸ºæˆ‘ä»¬å¯ä»¥ç†è§£å’Œä¿¡ä»»çš„æ™ºèƒ½ä¼™ä¼´ã€‚')]),t._v(" "),s("hr"),t._v(" "),s("p",[s("em",[t._v("æœ¬æ–‡ä»…æ¢è®¨äº†å¤§è¯­è¨€æ¨¡å‹å¯è§£é‡Šæ€§çš„éƒ¨åˆ†æŠ€æœ¯ï¼Œè¯¥é¢†åŸŸä»åœ¨å¿«é€Ÿå‘å±•ä¸­ã€‚å¦‚æœæ‚¨å¯¹æ­¤ä¸»é¢˜æ„Ÿå…´è¶£ï¼Œå»ºè®®è¿›ä¸€æ­¥é˜…è¯»ç›¸å…³ç ”ç©¶è®ºæ–‡å’Œæœ€æ–°è¿›å±•ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);