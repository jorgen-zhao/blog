(window.webpackJsonp=window.webpackJsonp||[]).push([[411],{763:function(a,s,t){"use strict";t.r(s);var n=t(15),r=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[a._v("#")]),a._v(" å‰è¨€")]),a._v(" "),s("p",[a._v("åœ¨æ¢ç´¢åŸºç¡€è®¾æ–½å³ä»£ç (IaC)çš„æ—…ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸è¢«å„ç§å·¥å…·çš„ç‚«é…·ç‰¹æ€§æ‰€å¸å¼•ï¼Œæ¯”å¦‚å£°æ˜å¼è¯­æ³•ã€ä¸°å¯Œçš„èµ„æºç±»å‹ã€è·¨äº‘æ”¯æŒç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µå´å¸¸å¸¸è¢«åˆå­¦è€…å¿½è§†ï¼Œé‚£å°±æ˜¯çŠ¶æ€ç®¡ç†(state management)ã€‚")]),a._v(" "),s("p",[a._v('ğŸ¤” çŠ¶æ€ç®¡ç†ï¼Ÿå¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡å¯¹å§ï¼Ÿä½†åˆ«æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘å°±æ¥å’Œå¤§å®¶èŠèŠè¿™ä¸ªIaCä¸–ç•Œçš„"å¹•åè‹±é›„"ï¼Œå®ƒå¦‚ä½•é»˜é»˜æ”¯æ’‘ç€æˆ‘ä»¬çš„åŸºç¡€è®¾æ–½è‡ªåŠ¨åŒ–ä¹‹æ—…ã€‚')]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("æç¤º")]),a._v(" "),s("p",[a._v("çŠ¶æ€ç®¡ç†æ˜¯IaCå·¥å…·çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè®°å½•äº†åŸºç¡€è®¾æ–½çš„å½“å‰çŠ¶æ€ï¼Œå¹¶ä½œä¸ºå˜æ›´è®¡åˆ’çš„åŸºå‡†ã€‚æ²¡æœ‰æœ‰æ•ˆçš„çŠ¶æ€ç®¡ç†ï¼ŒIaCå°±åƒæ²¡æœ‰è®°å¿†çš„æœºå™¨äººï¼Œæ— æ³•çŸ¥é“å·²ç»åˆ›å»ºäº†ä»€ä¹ˆï¼Œä¹Ÿæ— æ³•æ™ºèƒ½åœ°å†³å®šä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆã€‚")])]),a._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯iacçŠ¶æ€ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯iacçŠ¶æ€ç®¡ç†"}},[a._v("#")]),a._v(" ä»€ä¹ˆæ˜¯IaCçŠ¶æ€ç®¡ç†ï¼Ÿ")]),a._v(" "),s("p",[a._v('ç®€å•æ¥è¯´ï¼ŒIaCçŠ¶æ€å°±æ˜¯IaCå·¥å…·ç”¨æ¥è·Ÿè¸ªå’Œç®¡ç†åŸºç¡€è®¾æ–½èµ„æºçš„"æ•°æ®åº“"ã€‚å®ƒè®°å½•äº†ï¼š')]),a._v(" "),s("ul",[s("li",[a._v("å·²åˆ›å»ºçš„èµ„æºåŠå…¶å±æ€§")]),a._v(" "),s("li",[a._v("èµ„æºä¹‹é—´çš„ä¾èµ–å…³ç³»")]),a._v(" "),s("li",[a._v("èµ„æºçš„å½“å‰é…ç½®çŠ¶æ€")])]),a._v(" "),s("p",[a._v("å½“æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨Terraformæ—¶ï¼Œæˆ‘å®Œå…¨æ²¡æ„è¯†åˆ°é‚£ä¸ª"),s("code",[a._v("terraform.tfstate")]),a._v('æ–‡ä»¶å¦‚æ­¤é‡è¦ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘åˆ é™¤äº†æœ¬åœ°çŠ¶æ€æ–‡ä»¶ï¼Œç„¶åå‘ç°æ•´ä¸ªåŸºç¡€è®¾æ–½"æ¶ˆå¤±"äº†â€”â€”å½“ç„¶ï¼Œèµ„æºè¿˜åœ¨äº‘ä¸Šï¼Œä½†Terraformä¸çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ï¼Œè¿™è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°çŠ¶æ€ç®¡ç†çš„é‡è¦æ€§ã€‚')]),a._v(" "),s("h2",{attrs:{id:"ä¸»æµiacå·¥å…·çš„çŠ¶æ€ç®¡ç†æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»æµiacå·¥å…·çš„çŠ¶æ€ç®¡ç†æœºåˆ¶"}},[a._v("#")]),a._v(" ä¸»æµIaCå·¥å…·çš„çŠ¶æ€ç®¡ç†æœºåˆ¶")]),a._v(" "),s("h3",{attrs:{id:"terraformçš„çŠ¶æ€ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#terraformçš„çŠ¶æ€ç®¡ç†"}},[a._v("#")]),a._v(" Terraformçš„çŠ¶æ€ç®¡ç†")]),a._v(" "),s("p",[a._v("Terraformä½¿ç”¨JSONæ ¼å¼çš„çŠ¶æ€æ–‡ä»¶("),s("code",[a._v("terraform.tfstate")]),a._v(")æ¥è·Ÿè¸ªèµ„æºçŠ¶æ€ã€‚")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åˆå§‹åŒ–æ—¶åˆ›å»ºçŠ¶æ€æ–‡ä»¶")]),a._v("\nterraform init\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æŸ¥çœ‹å½“å‰çŠ¶æ€")]),a._v("\nterraform show\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å¯¼å‡ºçŠ¶æ€")]),a._v("\nterraform state pull "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" backup.tfstate\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[a._v("THEOREM")]),s("p",[a._v("TerraformçŠ¶æ€æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚èµ„æºIDã€å¯†ç ç­‰ï¼Œç»å¯¹ä¸è¦å°†å…¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼")])]),s("p",[a._v("Terraformæä¾›äº†å¤šç§åç«¯å­˜å‚¨çŠ¶æ€çš„æ–¹å¼ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ(é»˜è®¤)")]),a._v(" "),s("li",[a._v("AWS S3")]),a._v(" "),s("li",[a._v("Azure Blob Storage")]),a._v(" "),s("li",[a._v("Google Cloud Storage")]),a._v(" "),s("li",[a._v("HashiCorp Consul")]),a._v(" "),s("li",[a._v("Terraform Cloud/Enterprise")])]),a._v(" "),s("p",[a._v("æˆ‘ç‰¹åˆ«æ¨èä½¿ç”¨è¿œç¨‹çŠ¶æ€å­˜å‚¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å›¢é˜Ÿç¯å¢ƒä¸­ã€‚å®ƒä¸ä»…èƒ½è§£å†³çŠ¶æ€å†²çªé—®é¢˜ï¼Œè¿˜èƒ½æä¾›æ›´å¥½çš„å®‰å…¨æ€§å’Œåä½œä½“éªŒã€‚")]),a._v(" "),s("h3",{attrs:{id:"pulumiçš„çŠ¶æ€ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pulumiçš„çŠ¶æ€ç®¡ç†"}},[a._v("#")]),a._v(" Pulumiçš„çŠ¶æ€ç®¡ç†")]),a._v(" "),s("p",[a._v("Pulumié‡‡ç”¨äº†ä¸Terraformä¸åŒçš„çŠ¶æ€ç®¡ç†æ–¹å¼ã€‚å®ƒä½¿ç”¨ç¨‹åºåŒ–çš„æ–¹æ³•ï¼ŒçŠ¶æ€ä»¥æ•°æ®åº“å½¢å¼å­˜å‚¨ã€‚")]),a._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Pulumiä»£ç ç¤ºä¾‹")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" pulumi "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@pulumi/pulumi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("pulumi")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" bucketName "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bucketName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// åˆ›å»ºS3å­˜å‚¨æ¡¶")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" bucket "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("aws")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Bucket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("bucketName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// é…ç½®å‚æ•°")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("Pulumiçš„çŠ¶æ€é»˜è®¤å­˜å‚¨åœ¨Pulumi Cloudä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªæ‰˜ç®¡çš„åç«¯ã€‚æˆ‘å–œæ¬¢Pulumiè¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆä¼ ç»Ÿè½¯ä»¶å¼€å‘çš„ç»éªŒï¼ŒçŠ¶æ€ç®¡ç†ä¸ä»£ç é€»è¾‘åˆ†ç¦»ã€‚")]),a._v(" "),s("h3",{attrs:{id:"ansibleçš„çŠ¶æ€ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ansibleçš„çŠ¶æ€ç®¡ç†"}},[a._v("#")]),a._v(" Ansibleçš„çŠ¶æ€ç®¡ç†")]),a._v(" "),s("p",[a._v("Ansibleä¸å…¶ä»–å·¥å…·ä¸åŒï¼Œå®ƒä¸ç»´æŠ¤æŒä¹…çš„çŠ¶æ€æ–‡ä»¶ã€‚ç›¸åï¼ŒAnsibleé€šè¿‡æ£€æŸ¥ç›®æ ‡èŠ‚ç‚¹çš„å®é™…çŠ¶æ€æ¥ç¡®å®šæ˜¯å¦éœ€è¦æ‰§è¡Œä»»åŠ¡ã€‚")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ç¡®ä¿webæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" nginx\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" started\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v('è¿™ç§"æ— çŠ¶æ€"çš„è®¾è®¡ä½¿Ansibleéå¸¸é€‚åˆé…ç½®ç®¡ç†å’Œåº”ç”¨éƒ¨ç½²ï¼Œä½†åœ¨å¤æ‚çš„åŸºç¡€è®¾æ–½åœºæ™¯ä¸­å¯èƒ½éœ€è¦é¢å¤–çš„çŠ¶æ€è·Ÿè¸ªæœºåˆ¶ã€‚')]),a._v(" "),s("h2",{attrs:{id:"çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ"}},[a._v("#")]),a._v(" çŠ¶æ€ç®¡ç†çš„æœ€ä½³å®è·µ")]),a._v(" "),s("h3",{attrs:{id:"_1-ä½¿ç”¨è¿œç¨‹çŠ¶æ€å­˜å‚¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä½¿ç”¨è¿œç¨‹çŠ¶æ€å­˜å‚¨"}},[a._v("#")]),a._v(" 1. ä½¿ç”¨è¿œç¨‹çŠ¶æ€å­˜å‚¨")]),a._v(" "),s("p",[a._v("åœ¨å›¢é˜Ÿç¯å¢ƒä¸­ï¼Œä½¿ç”¨è¿œç¨‹çŠ¶æ€å­˜å‚¨æ˜¯å¿…é¡»çš„ã€‚å®ƒä¸ä»…èƒ½é¿å…çŠ¶æ€æ–‡ä»¶å†²çªï¼Œè¿˜èƒ½æä¾›æ›´å¥½çš„å®‰å…¨æ€§å’Œåä½œä½“éªŒã€‚")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("æç¤º")]),a._v(" "),s("p",[a._v("å¯¹äºTerraformï¼Œæˆ‘æ¨èä½¿ç”¨S3 + DynamoDBç»„åˆï¼ŒS3å­˜å‚¨çŠ¶æ€æ–‡ä»¶ï¼ŒDynamoDBå¤„ç†çŠ¶æ€é”ï¼Œé˜²æ­¢å¹¶å‘æ“ä½œå¯¼è‡´çš„çŠ¶æ€æŸåã€‚")])]),a._v(" "),s("h3",{attrs:{id:"_2-çŠ¶æ€æ–‡ä»¶å®‰å…¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-çŠ¶æ€æ–‡ä»¶å®‰å…¨"}},[a._v("#")]),a._v(" 2. çŠ¶æ€æ–‡ä»¶å®‰å…¨")]),a._v(" "),s("p",[a._v("çŠ¶æ€æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œéœ€è¦å¦¥å–„ä¿æŠ¤ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("ä¸è¦å°†çŠ¶æ€æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ")]),a._v(" "),s("li",[a._v("ä½¿ç”¨åŠ å¯†å­˜å‚¨")]),a._v(" "),s("li",[a._v("å®æ–½ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶")]),a._v(" "),s("li",[a._v("å®šæœŸå¤‡ä»½çŠ¶æ€æ–‡ä»¶")])]),a._v(" "),s("h3",{attrs:{id:"_3-çŠ¶æ€åˆ†å‰²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-çŠ¶æ€åˆ†å‰²"}},[a._v("#")]),a._v(" 3. çŠ¶æ€åˆ†å‰²")]),a._v(" "),s("p",[a._v("éšç€é¡¹ç›®è§„æ¨¡å¢é•¿ï¼Œå•ä¸€çš„çŠ¶æ€æ–‡ä»¶ä¼šå˜å¾—åºå¤§ä¸”éš¾ä»¥ç®¡ç†ã€‚è€ƒè™‘æŒ‰ç¯å¢ƒã€é¡¹ç›®æˆ–æ¨¡å—åˆ†å‰²çŠ¶æ€ï¼š")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("environments/\n  - dev/\n    - terraform.tfstate\n  - staging/\n    - terraform.tfstate\n  - prod/\n    - terraform.tfstate\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h3",{attrs:{id:"_4-çŠ¶æ€è¿ç§»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-çŠ¶æ€è¿ç§»"}},[a._v("#")]),a._v(" 4. çŠ¶æ€è¿ç§»")]),a._v(" "),s("p",[a._v("æœ‰æ—¶æˆ‘ä»¬éœ€è¦è¿ç§»çŠ¶æ€ï¼Œæ¯”å¦‚ä»æœ¬åœ°çŠ¶æ€è¿ç§»åˆ°è¿œç¨‹å­˜å‚¨ï¼Œæˆ–ä»ä¸€ä¸ªåç«¯è¿ç§»åˆ°å¦ä¸€ä¸ªåç«¯ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ä»æœ¬åœ°è¿ç§»åˆ°S3")]),a._v("\nterraform state "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-local")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("local.tfstate s3://my-bucket/terraform.tfstate\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"çŠ¶æ€ç®¡ç†çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç®¡ç†çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[a._v("#")]),a._v(" çŠ¶æ€ç®¡ç†çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ")]),a._v(" "),s("h3",{attrs:{id:"æŒ‘æˆ˜1-çŠ¶æ€é”å®š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜1-çŠ¶æ€é”å®š"}},[a._v("#")]),a._v(" æŒ‘æˆ˜1ï¼šçŠ¶æ€é”å®š")]),a._v(" "),s("p",[a._v("åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œå¤šäººåŒæ—¶æ“ä½œåŒä¸€çŠ¶æ€æ–‡ä»¶å¯èƒ½å¯¼è‡´å†²çªã€‚")]),a._v(" "),s("p",[s("strong",[a._v("è§£å†³æ–¹æ¡ˆ")]),a._v("ï¼šä½¿ç”¨çŠ¶æ€é”å®šæœºåˆ¶ã€‚Terraformä¸DynamoDBé›†æˆå¯ä»¥è‡ªåŠ¨å¤„ç†çŠ¶æ€é”å®šã€‚")]),a._v(" "),s("h3",{attrs:{id:"æŒ‘æˆ˜2-æ•æ„Ÿä¿¡æ¯ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜2-æ•æ„Ÿä¿¡æ¯ç®¡ç†"}},[a._v("#")]),a._v(" æŒ‘æˆ˜2ï¼šæ•æ„Ÿä¿¡æ¯ç®¡ç†")]),a._v(" "),s("p",[a._v("çŠ¶æ€æ–‡ä»¶å¯èƒ½åŒ…å«å¯†ç ã€APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("è§£å†³æ–¹æ¡ˆ")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("ä½¿ç”¨åŠ å¯†çŠ¶æ€")]),a._v(" "),s("li",[a._v("ä½¿ç”¨å˜é‡å’Œè¾“å‡ºæ ‡è®°æ•æ„Ÿæ•°æ®")]),a._v(" "),s("li",[a._v("è€ƒè™‘ä½¿ç”¨å·¥å…·å¦‚HashiCorp Vaultç®¡ç†æ•æ„Ÿä¿¡æ¯")])]),a._v(" "),s("h3",{attrs:{id:"æŒ‘æˆ˜3-çŠ¶æ€æ–‡ä»¶æŸå"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜3-çŠ¶æ€æ–‡ä»¶æŸå"}},[a._v("#")]),a._v(" æŒ‘æˆ˜3ï¼šçŠ¶æ€æ–‡ä»¶æŸå")]),a._v(" "),s("p",[a._v("çŠ¶æ€æ–‡ä»¶æŸåå¯èƒ½å¯¼è‡´åŸºç¡€è®¾æ–½ç®¡ç†å¤±è´¥ã€‚")]),a._v(" "),s("p",[s("strong",[a._v("è§£å†³æ–¹æ¡ˆ")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("å®šæœŸå¤‡ä»½çŠ¶æ€æ–‡ä»¶")]),a._v(" "),s("li",[a._v("ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†çŠ¶æ€æ–‡ä»¶å˜æ›´")]),a._v(" "),s("li",[a._v("äº†è§£"),s("code",[a._v("terraform state")]),a._v("å‘½ä»¤çš„æ¢å¤åŠŸèƒ½")])]),a._v(" "),s("h2",{attrs:{id:"çŠ¶æ€ç®¡ç†ä¸ci-cdé›†æˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç®¡ç†ä¸ci-cdé›†æˆ"}},[a._v("#")]),a._v(" çŠ¶æ€ç®¡ç†ä¸CI/CDé›†æˆ")]),a._v(" "),s("p",[a._v("åœ¨CI/CDæµæ°´çº¿ä¸­ï¼ŒçŠ¶æ€ç®¡ç†éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# CI/CDæµæ°´çº¿ä¸­çš„çŠ¶æ€ç®¡ç†ç¤ºä¾‹")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" åˆå§‹åŒ–Terraform\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" terraform init "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("backend"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v('config="backend.tfvars"\n\n'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" è®¡åˆ’å˜æ›´\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" terraform plan "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("out=tfplan\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" å®¡æ‰¹è®¡åˆ’\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    # è¿™é‡Œå¯ä»¥æ·»åŠ äººå·¥å®¡æ‰¹é€»è¾‘")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" åº”ç”¨å˜æ›´\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" terraform apply tfplan\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("p",[a._v("åœ¨CIç¯å¢ƒä¸­ï¼Œæˆ‘å»ºè®®ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("ä½¿ç”¨ä¸´æ—¶æˆ–ç¯å¢ƒç‰¹å®šçš„çŠ¶æ€æ–‡ä»¶")]),a._v(" "),s("li",[a._v("å®æ–½ä¸¥æ ¼çš„å˜æ›´æ§åˆ¶æµç¨‹")]),a._v(" "),s("li",[a._v("è€ƒè™‘ä½¿ç”¨Terraform Cloudç­‰æ‰˜ç®¡æœåŠ¡")])]),a._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[a._v("#")]),a._v(" ç»“è¯­")]),a._v(" "),s("p",[a._v("çŠ¶æ€ç®¡ç†è™½ç„¶ä¸æ˜¯æœ€ç‚«é…·çš„è¯é¢˜ï¼Œä½†å®ƒç»å¯¹æ˜¯IaCå®è·µçš„åŸºçŸ³ã€‚ç†è§£ä¸åŒå·¥å…·çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œéµå¾ªæœ€ä½³å®è·µï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´å¯é ã€æ›´å®‰å…¨çš„åŸºç¡€è®¾æ–½è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚")]),a._v(" "),s("blockquote",[s("p",[a._v("è®°ä½ï¼Œæ²¡æœ‰è‰¯å¥½çš„çŠ¶æ€ç®¡ç†ï¼Œå†å¤æ‚çš„IaCå·¥å…·ä¹Ÿåªæ˜¯èŠ±æ¶å­ã€‚æŠ•å…¥æ—¶é—´å­¦ä¹ å’Œä¼˜åŒ–ä½ çš„çŠ¶æ€ç®¡ç†ç­–ç•¥ï¼Œè¿™å°†åœ¨é•¿æœŸå¸¦æ¥å·¨å¤§çš„å›æŠ¥ã€‚")])]),a._v(" "),s("p",[a._v("éšç€äº‘åŸç”Ÿå’ŒåŸºç¡€è®¾æ–½å³ä»£ç çš„ä¸æ–­å‘å±•ï¼ŒçŠ¶æ€ç®¡ç†ä¹Ÿåœ¨æŒç»­æ¼”è¿›ã€‚æœªæ¥ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°æ›´æ™ºèƒ½çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚åŸºäºGitOpsçš„çŠ¶æ€ç®¡ç†ã€è‡ªåŠ¨åŒ–çš„çŠ¶æ€ä¿®å¤æœºåˆ¶ç­‰ã€‚")]),a._v(" "),s("p",[a._v("æ— è®ºä½ ä½¿ç”¨å“ªç§IaCå·¥å…·ï¼ŒèŠ±æ—¶é—´ç†è§£å…¶çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå¹¶å»ºç«‹é€‚åˆä½ å›¢é˜Ÿçš„æœ€ä½³å®è·µï¼Œè¿™å°†æ˜¯ä½ DevOpsä¹‹æ—…ä¸­æœ€é‡è¦çš„æŠ•èµ„ä¹‹ä¸€ã€‚ğŸ’ª")]),a._v(" "),s("p",[a._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£IaCçŠ¶æ€ç®¡ç†ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–ç»éªŒåˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ‘‡")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code")]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);s.default=r.exports}}]);