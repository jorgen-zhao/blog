(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{458:function(s,t,a){"use strict";a.r(t);var n=a(15),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v('åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†Transformeræ¶æ„ä¸è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œè¿™äº›ç°ä»£å¤§è¯­è¨€æ¨¡å‹çš„åŸºçŸ³ã€‚ğŸ— ä½†ä»…æœ‰ä¼˜ç§€çš„æ¶æ„è¿˜ä¸å¤Ÿï¼Œå¦‚ä½•è®©è¿™äº›æ¶æ„çœŸæ­£"å­¦ä¼š"è¯­è¨€ï¼Œå¹¶é€‚åº”å„ç§å…·ä½“ä»»åŠ¡å‘¢ï¼Ÿè¿™å°±æ˜¯ä»Šå¤©æˆ‘ä»¬è¦è®¨è®ºçš„ä¸»é¢˜â€”â€”å¤§è¯­è¨€æ¨¡å‹çš„é¢„è®­ç»ƒä¸å¾®è°ƒã€‚')]),s._v(" "),t("p",[s._v("æƒ³è±¡ä¸€ä¸‹ï¼Œé¢„è®­ç»ƒå°±åƒæ˜¯ç»™ä¸€ä¸ªå©´å„¿æä¾›æµ·é‡çš„é˜…è¯»ææ–™ï¼Œè®©ä»–æŒæ¡è¯­è¨€çš„åŸºæœ¬è§„å¾‹ï¼›è€Œå¾®è°ƒåˆ™åƒæ˜¯é’ˆå¯¹ç‰¹å®šèŒä¸šè¿›è¡Œçš„ä¸“ä¸šåŸ¹è®­ï¼Œè®©è¿™ä¸ªå©´å„¿æˆé•¿ä¸ºç‰¹å®šé¢†åŸŸçš„ä¸“å®¶ã€‚ğŸ“")]),s._v(" "),t("h2",{attrs:{id:"é¢„è®­ç»ƒ-å¤§æ¨¡å‹çš„-å¯è’™æ•™è‚²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¢„è®­ç»ƒ-å¤§æ¨¡å‹çš„-å¯è’™æ•™è‚²"}},[s._v("#")]),s._v(' é¢„è®­ç»ƒï¼šå¤§æ¨¡å‹çš„"å¯è’™æ•™è‚²"')]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒæ˜¯ç°ä»£å¤§è¯­è¨€æ¨¡å‹å¼€å‘çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ¨¡å‹åœ¨æµ·é‡çš„æ— æ ‡ç­¾æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œå­¦ä¹ ï¼Œç›®æ ‡æ˜¯æŒæ¡è¯­è¨€çš„é€šç”¨çŸ¥è¯†å’Œè§„å¾‹ã€‚")]),s._v(" "),t("h3",{attrs:{id:"é¢„è®­ç»ƒçš„ç›®æ ‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¢„è®­ç»ƒçš„ç›®æ ‡"}},[s._v("#")]),s._v(" é¢„è®­ç»ƒçš„ç›®æ ‡")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒçš„ä¸»è¦ç›®æ ‡æ˜¯è®©æ¨¡å‹å­¦ä¹ è¯­è¨€çš„ä»¥ä¸‹èƒ½åŠ›ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("è¯­æ³•å’Œå¥æ³•ç»“æ„")]),s._v("ï¼šç†è§£å¥å­çš„åŸºæœ¬æ„é€ è§„åˆ™")]),s._v(" "),t("li",[t("strong",[s._v("è¯­ä¹‰çŸ¥è¯†")]),s._v("ï¼šç†è§£è¯è¯­å’Œæ¦‚å¿µä¹‹é—´çš„å…³ç³»")]),s._v(" "),t("li",[t("strong",[s._v("ä¸–ç•ŒçŸ¥è¯†")]),s._v("ï¼šè·å–å…³äºä¸–ç•Œçš„åŸºæœ¬äº‹å®å’Œå¸¸è¯†")]),s._v(" "),t("li",[t("strong",[s._v("æ¨ç†èƒ½åŠ›")]),s._v("ï¼šèƒ½å¤Ÿè¿›è¡ŒåŸºæœ¬çš„é€»è¾‘æ¨ç†")])]),s._v(" "),t("h3",{attrs:{id:"é¢„è®­ç»ƒçš„æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¢„è®­ç»ƒçš„æ•°æ®"}},[s._v("#")]),s._v(" é¢„è®­ç»ƒçš„æ•°æ®")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒé€šå¸¸ä½¿ç”¨æ¥è‡ªäº’è”ç½‘ã€ä¹¦ç±ã€æ–‡ç« ç­‰æ¥æºçš„æµ·é‡æ–‡æœ¬æ•°æ®ã€‚ä¾‹å¦‚ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("GPT-3ä½¿ç”¨äº†çº¦45TBçš„æ–‡æœ¬æ•°æ®")]),s._v(" "),t("li",[s._v("PaLMä½¿ç”¨äº†é«˜è¾¾780TBçš„æ–‡æœ¬æ•°æ®")]),s._v(" "),t("li",[s._v("LLaMAä½¿ç”¨äº†1.4ä¸‡äº¿ä¸ªtokensçš„æ•°æ®")])]),s._v(" "),t("p",[s._v("è¿™äº›æ•°æ®ç»è¿‡æ¸…æ´—å’Œç­›é€‰ï¼Œä»¥ç¡®ä¿è´¨é‡å’Œå¤šæ ·æ€§ã€‚")]),s._v(" "),t("h3",{attrs:{id:"é¢„è®­ç»ƒçš„ä»»åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¢„è®­ç»ƒçš„ä»»åŠ¡"}},[s._v("#")]),s._v(" é¢„è®­ç»ƒçš„ä»»åŠ¡")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒä¸»è¦é‡‡ç”¨ä»¥ä¸‹å‡ ç§ä»»åŠ¡ï¼š")]),s._v(" "),t("h4",{attrs:{id:"_1-æ©ç è¯­è¨€å»ºæ¨¡-mlm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ©ç è¯­è¨€å»ºæ¨¡-mlm"}},[s._v("#")]),s._v(" 1. æ©ç è¯­è¨€å»ºæ¨¡(MLM)")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('åŸå§‹å¥å­: "The quick brown fox jumps over the lazy dog"\næ©ç å:    "The quick [MASK] fox jumps over the lazy dog"\nä»»åŠ¡:      é¢„æµ‹è¢«æ©ç çš„è¯\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("BERTç­‰æ¨¡å‹ä½¿ç”¨è¿™ç§ä»»åŠ¡ï¼Œé€šè¿‡é¢„æµ‹è¢«éšæœºæ©ç çš„è¯æ¥å­¦ä¹ ä¸Šä¸‹æ–‡è¡¨ç¤ºã€‚")]),s._v(" "),t("h4",{attrs:{id:"_2-è‡ªå›å½’è¯­è¨€å»ºæ¨¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è‡ªå›å½’è¯­è¨€å»ºæ¨¡"}},[s._v("#")]),s._v(" 2. è‡ªå›å½’è¯­è¨€å»ºæ¨¡")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('è¾“å…¥:  "The quick brown fox"\nç›®æ ‡:  "The quick brown fox jumps"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("GPTç³»åˆ—æ¨¡å‹ä½¿ç”¨è¿™ç§ä»»åŠ¡ï¼Œé€šè¿‡é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ¥å­¦ä¹ ç”Ÿæˆèƒ½åŠ›ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_3-åŒå‘é¢„æµ‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-åŒå‘é¢„æµ‹"}},[s._v("#")]),s._v(" 3. åŒå‘é¢„æµ‹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('è¾“å…¥:  "The [MASK] brown fox [MASK] over the lazy dog"\nç›®æ ‡:  "The quick brown fox jumps over the lazy dog"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ç»“åˆäº†MLMå’Œè‡ªå›å½’çš„ç‰¹ç‚¹ï¼ŒåŒæ—¶é¢„æµ‹è¢«æ©ç çš„è¯å’Œåç»­çš„è¯ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¾®è°ƒ-ä»é€šç”¨åˆ°ä¸“ä¸š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¾®è°ƒ-ä»é€šç”¨åˆ°ä¸“ä¸š"}},[s._v("#")]),s._v(" å¾®è°ƒï¼šä»é€šç”¨åˆ°ä¸“ä¸š")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒå®Œæˆåï¼Œæ¨¡å‹å·²ç»å…·å¤‡äº†å¼ºå¤§çš„è¯­è¨€èƒ½åŠ›ï¼Œä½†è¿˜ä¸è¶³ä»¥ç›´æ¥åº”ç”¨äºç‰¹å®šä»»åŠ¡ã€‚è¿™æ—¶å°±éœ€è¦å¾®è°ƒã€‚")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦å¾®è°ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦å¾®è°ƒ"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦å¾®è°ƒï¼Ÿ")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒæ¨¡å‹è™½ç„¶çŸ¥è¯†æ¸Šåšï¼Œä½†å­˜åœ¨ä»¥ä¸‹å±€é™ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("é¢†åŸŸçŸ¥è¯†ä¸è¶³")]),s._v("ï¼šç¼ºä¹ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†")]),s._v(" "),t("li",[t("strong",[s._v("ä»»åŠ¡é€‚é…æ€§å·®")]),s._v("ï¼šä¸ç†Ÿæ‚‰ç‰¹å®šä»»åŠ¡çš„æ ¼å¼å’Œè¦æ±‚")]),s._v(" "),t("li",[t("strong",[s._v("å®‰å…¨æ€§é—®é¢˜")]),s._v("ï¼šå¯èƒ½ç”Ÿæˆä¸å½“æˆ–æœ‰åè§çš„å†…å®¹")]),s._v(" "),t("li",[t("strong",[s._v("æŒ‡ä»¤ç†è§£èƒ½åŠ›å¼±")]),s._v("ï¼šä¸èƒ½å¾ˆå¥½åœ°ç†è§£å’Œéµå¾ªå¤æ‚æŒ‡ä»¤")])]),s._v(" "),t("h3",{attrs:{id:"å¾®è°ƒçš„æ–¹æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¾®è°ƒçš„æ–¹æ³•"}},[s._v("#")]),s._v(" å¾®è°ƒçš„æ–¹æ³•")]),s._v(" "),t("h4",{attrs:{id:"_1-å…¨å‚æ•°å¾®è°ƒ-full-fine-tuning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…¨å‚æ•°å¾®è°ƒ-full-fine-tuning"}},[s._v("#")]),s._v(" 1. å…¨å‚æ•°å¾®è°ƒ(Full Fine-tuning)")]),s._v(" "),t("p",[s._v("è¿™æ˜¯æœ€ç›´æ¥çš„å¾®è°ƒæ–¹æ³•ï¼Œæ›´æ–°æ¨¡å‹çš„æ‰€æœ‰å‚æ•°ï¼š")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¼ªä»£ç ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" batch "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" dataset"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    inputs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" labels "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" batch\n    outputs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inputs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    loss "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loss_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" labels"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    loss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("backward"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    optimizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("step"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("ä¼˜ç‚¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å¯ä»¥å……åˆ†åˆ©ç”¨é¢„è®­ç»ƒçŸ¥è¯†")]),s._v(" "),t("li",[s._v("åœ¨å¤§å¤šæ•°ä»»åŠ¡ä¸Šè¡¨ç°æœ€ä½³")])]),s._v(" "),t("p",[s._v("ç¼ºç‚¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("è®¡ç®—èµ„æºéœ€æ±‚é«˜")]),s._v(" "),t("li",[s._v("å¯èƒ½å¯¼è‡´ç¾éš¾æ€§é—å¿˜(Catastrophic Forgetting)")]),s._v(" "),t("li",[s._v("éƒ¨ç½²æˆæœ¬é«˜")])]),s._v(" "),t("h4",{attrs:{id:"_2-éƒ¨åˆ†å‚æ•°å¾®è°ƒ-partial-fine-tuning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-éƒ¨åˆ†å‚æ•°å¾®è°ƒ-partial-fine-tuning"}},[s._v("#")]),s._v(" 2. éƒ¨åˆ†å‚æ•°å¾®è°ƒ(Partial Fine-tuning)")]),s._v(" "),t("p",[s._v("åªæ›´æ–°æ¨¡å‹çš„ä¸€éƒ¨åˆ†å‚æ•°ï¼Œå¸¸è§çš„æœ‰ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("ä»…æ›´æ–°åˆ†ç±»å¤´")]),s._v("ï¼šåªæ›´æ–°æœ€åä¸€å±‚åˆ†ç±»å™¨")]),s._v(" "),t("li",[t("strong",[s._v("Layer-wiseå­¦ä¹ ç‡è¡°å‡")]),s._v("ï¼šè¶Šé è¿‘è¾“å…¥çš„å±‚ï¼Œå­¦ä¹ ç‡è¶Šå°")]),s._v(" "),t("li",[t("strong",[s._v("Adapter Tuning")]),s._v("ï¼šåœ¨æ¨¡å‹çš„ç‰¹å®šå±‚æ’å…¥å°å‹å¯è®­ç»ƒæ¨¡å—")])]),s._v(" "),t("h4",{attrs:{id:"_3-å‚æ•°é«˜æ•ˆå¾®è°ƒ-peft"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å‚æ•°é«˜æ•ˆå¾®è°ƒ-peft"}},[s._v("#")]),s._v(" 3. å‚æ•°é«˜æ•ˆå¾®è°ƒ(PEFT)")]),s._v(" "),t("p",[s._v("è¿‘å¹´æ¥å…´èµ·çš„ä¸€ç³»åˆ—å¾®è°ƒæ–¹æ³•ï¼Œä»¥æå°‘çš„å‚æ•°å®ç°é«˜æ•ˆå¾®è°ƒï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("LoRA (Low-Rank Adaptation)")]),s._v("ï¼šå°†æƒé‡æ›´æ–°åˆ†è§£ä¸ºä½ç§©çŸ©é˜µ")]),s._v(" "),t("li",[t("strong",[s._v("Prefix Tuning")]),s._v("ï¼šä¼˜åŒ–è¾“å…¥çš„å‰ç¼€token")]),s._v(" "),t("li",[t("strong",[s._v("Prompt Tuning")]),s._v("ï¼šä»…ä¼˜åŒ–æç¤ºtoken")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# LoRAç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinearWithLoRA")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" in_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" out_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__init__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("linear "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Linear"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" out_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lora_A "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Linear"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lora_B "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Linear"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("r"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" out_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forward")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("linear"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lora_B"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lora_A"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h2",{attrs:{id:"å®æˆ˜æ¡ˆä¾‹-å¾®è°ƒllamaæ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜æ¡ˆä¾‹-å¾®è°ƒllamaæ¨¡å‹"}},[s._v("#")]),s._v(" å®æˆ˜æ¡ˆä¾‹ï¼šå¾®è°ƒLLaMAæ¨¡å‹")]),s._v(" "),t("p",[s._v("è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œçœ‹çœ‹å¦‚ä½•å¾®è°ƒä¸€ä¸ªå¼€æºçš„å¤§è¯­è¨€æ¨¡å‹ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ä»»åŠ¡è®¾å®š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»»åŠ¡è®¾å®š"}},[s._v("#")]),s._v(" ä»»åŠ¡è®¾å®š")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬å°†å¾®è°ƒLLaMA-7Bæ¨¡å‹ï¼Œä½¿å…¶èƒ½å¤Ÿå›ç­”å…³äºè‡ªç„¶è¯­è¨€å¤„ç†çš„é—®é¢˜ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ•°æ®å‡†å¤‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®å‡†å¤‡"}},[s._v("#")]),s._v(" æ•°æ®å‡†å¤‡")]),s._v(" "),t("p",[s._v("é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡é—®ç­”å¯¹æ•°æ®ï¼š")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"instruction"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Ÿ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"input"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"output"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸€ç§å…è®¸æ¨¡å‹åœ¨å¤„ç†åºåˆ—æ—¶å…³æ³¨è¾“å…¥åºåˆ—ä¸­ä¸åŒéƒ¨åˆ†çš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡è®¡ç®—æŸ¥è¯¢(Query)ã€é”®(Key)å’Œå€¼(Value)ä¹‹é—´çš„ç›¸å…³æ€§æ¥å®ç°ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒæ•´å¯¹è¾“å…¥ä¸åŒéƒ¨åˆ†çš„å…³æ³¨ç¨‹åº¦ã€‚"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"instruction"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è§£é‡Šä¸€ä¸‹BERTå’ŒGPTçš„ä¸»è¦åŒºåˆ«"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"input"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"output"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BERTå’ŒGPTæ˜¯ä¸¤ç§ä¸åŒæ¶æ„çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼š\\n1. BERTé‡‡ç”¨Transformerç¼–ç å™¨ç»“æ„ï¼Œæ˜¯åŒå‘æ¨¡å‹ï¼Œèƒ½å¤ŸåŒæ—¶è€ƒè™‘ä¸Šä¸‹æ–‡ä¿¡æ¯\\n2. GPTé‡‡ç”¨Transformerè§£ç å™¨ç»“æ„ï¼Œæ˜¯è‡ªå›å½’æ¨¡å‹ï¼Œåªèƒ½åˆ©ç”¨å·¦ä¾§ä¸Šä¸‹æ–‡\\n3. BERTæ›´é€‚åˆç†è§£ç±»ä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ç­‰\\n4. GPTæ›´é€‚åˆç”Ÿæˆç±»ä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬ç”Ÿæˆã€å¯¹è¯ç³»ç»Ÿç­‰"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"å¾®è°ƒä»£ç å®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¾®è°ƒä»£ç å®ç°"}},[s._v("#")]),s._v(" å¾®è°ƒä»£ç å®ç°")]),s._v(" "),t("p",[s._v("ä½¿ç”¨Hugging Faceçš„Transformersåº“è¿›è¡Œå¾®è°ƒï¼š")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" transformers "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AutoModelForCausalLM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" AutoTokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TrainingArguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Trainer\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" torch\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ è½½æ¨¡å‹å’Œåˆ†è¯å™¨")]),s._v("\nmodel_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"decapoda-research/llama-7b-hf"')]),s._v("\nmodel "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AutoModelForCausalLM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("from_pretrained"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntokenizer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AutoTokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("from_pretrained"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¾ç½®è®­ç»ƒå‚æ•°")]),s._v("\ntraining_args "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" TrainingArguments"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    output_dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./results"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    num_train_epochs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    per_device_train_batch_size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    gradient_accumulation_steps"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    save_steps"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    save_total_limit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    logging_steps"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    learning_rate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5e-5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    fp16"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºTrainerå®ä¾‹")]),s._v("\ntrainer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Trainer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    model"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    args"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("training_args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    train_dataset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("train_dataset"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    tokenizer"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å§‹å¾®è°ƒ")]),s._v("\ntrainer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("train"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("h3",{attrs:{id:"è¯„ä¼°ä¸ç»“æœ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯„ä¼°ä¸ç»“æœ"}},[s._v("#")]),s._v(" è¯„ä¼°ä¸ç»“æœ")]),s._v(" "),t("p",[s._v("å¾®è°ƒå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥è¯„ä¼°æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("evaluate_model")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" test_data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("eval")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    correct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" item "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" test_data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        prompt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"é—®é¢˜: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'instruction'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\\nå›ç­”:"')])]),s._v("\n        inputs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prompt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" return_tensors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" torch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("no_grad"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            outputs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("generate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("inputs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" max_length"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        generated_text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" skip_special_tokens"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        answer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" generated_text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("split"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å›ç­”:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("strip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç®€å•çš„è¯„ä¼°é€»è¾‘")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keywords"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" answer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            correct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    \n    accuracy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" correct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test_data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" accuracy\n\ntest_accuracy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" evaluate_model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tokenizer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" test_data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"æµ‹è¯•å‡†ç¡®ç‡: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("test_accuracy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token format-spec"}},[s._v(".2%")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"å¾®è°ƒä¸­çš„å¸¸è§æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¾®è°ƒä¸­çš„å¸¸è§æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" å¾®è°ƒä¸­çš„å¸¸è§æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("h3",{attrs:{id:"æŒ‘æˆ˜1-ç¾éš¾æ€§é—å¿˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜1-ç¾éš¾æ€§é—å¿˜"}},[s._v("#")]),s._v(" æŒ‘æˆ˜1: ç¾éš¾æ€§é—å¿˜")]),s._v(" "),t("p",[t("strong",[s._v("ç°è±¡")]),s._v(": æ¨¡å‹åœ¨å¾®è°ƒåï¼Œåœ¨é¢„è®­ç»ƒä»»åŠ¡ä¸Šçš„æ€§èƒ½æ˜¾è‘—ä¸‹é™ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v(":")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨å¼¹æ€§æƒé‡æ•´åˆ(Elastic Weight Consolidation, EWC)")]),s._v(" "),t("li",[s._v("é‡‡ç”¨æ¸è¿›å¼å¾®è°ƒ(Progressive Fine-tuning)")]),s._v(" "),t("li",[s._v("ä¿ç•™éƒ¨åˆ†é¢„è®­ç»ƒæ•°æ®ä¸æ–°ä»»åŠ¡æ•°æ®æ··åˆè®­ç»ƒ")])]),s._v(" "),t("h3",{attrs:{id:"æŒ‘æˆ˜2-è¿‡æ‹Ÿåˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜2-è¿‡æ‹Ÿåˆ"}},[s._v("#")]),s._v(" æŒ‘æˆ˜2: è¿‡æ‹Ÿåˆ")]),s._v(" "),t("p",[t("strong",[s._v("ç°è±¡")]),s._v(": æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°è¾ƒå·®ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v(":")]),s._v(" "),t("ul",[t("li",[s._v("å¢åŠ æ•°æ®é‡æˆ–ä½¿ç”¨æ•°æ®å¢å¼º")]),s._v(" "),t("li",[s._v("æ·»åŠ æ­£åˆ™åŒ–é¡¹(å¦‚æƒé‡è¡°å‡)")]),s._v(" "),t("li",[s._v("ä½¿ç”¨æ—©åœ(Early Stopping)ç­–ç•¥")]),s._v(" "),t("li",[s._v("å°è¯•ä¸åŒçš„å¾®è°ƒæ–¹æ³•(å¦‚LoRA)")])]),s._v(" "),t("h3",{attrs:{id:"æŒ‘æˆ˜3-è®¡ç®—èµ„æºé™åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‘æˆ˜3-è®¡ç®—èµ„æºé™åˆ¶"}},[s._v("#")]),s._v(" æŒ‘æˆ˜3: è®¡ç®—èµ„æºé™åˆ¶")]),s._v(" "),t("p",[t("strong",[s._v("ç°è±¡")]),s._v(": æ— æ³•åœ¨æœ‰é™çš„ç¡¬ä»¶èµ„æºä¸Šå®Œæˆå…¨å‚æ•°å¾®è°ƒã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v(":")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨å‚æ•°é«˜æ•ˆå¾®è°ƒæ–¹æ³•(å¦‚LoRA, Adapter)")]),s._v(" "),t("li",[s._v("é‡‡ç”¨æ¨¡å‹å¹¶è¡Œ(Model Parallelism)æˆ–æµæ°´çº¿å¹¶è¡Œ(Pipeline Parallelism)")]),s._v(" "),t("li",[s._v("ä½¿ç”¨ä½ç²¾åº¦è®­ç»ƒ(å¦‚FP16, BF16)")]),s._v(" "),t("li",[s._v("å‡å°æ‰¹é‡å¤§å°æˆ–æ¢¯åº¦ç´¯ç§¯")])]),s._v(" "),t("h2",{attrs:{id:"æœªæ¥å±•æœ›"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å±•æœ›"}},[s._v("#")]),s._v(" æœªæ¥å±•æœ›")]),s._v(" "),t("p",[s._v("é¢„è®­ç»ƒä¸å¾®è°ƒé¢†åŸŸä»åœ¨å¿«é€Ÿå‘å±•ï¼Œæœªæ¥å¯èƒ½çš„æ–¹å‘åŒ…æ‹¬ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("æŒç»­å­¦ä¹ ")]),s._v("ï¼šä½¿æ¨¡å‹èƒ½å¤Ÿä¸æ–­å­¦ä¹ æ–°çŸ¥è¯†è€Œä¸é—å¿˜æ—§çŸ¥è¯†")]),s._v(" "),t("li",[t("strong",[s._v("å¤šä»»åŠ¡å¾®è°ƒ")]),s._v("ï¼šåŒæ—¶ä¼˜åŒ–å¤šä¸ªç›¸å…³ä»»åŠ¡ï¼Œå®ç°çŸ¥è¯†è¿ç§»")]),s._v(" "),t("li",[t("strong",[s._v("è‡ªç›‘ç£å¾®è°ƒ")]),s._v("ï¼šå‡å°‘å¯¹äººå·¥æ ‡æ³¨æ•°æ®çš„ä¾èµ–")]),s._v(" "),t("li",[t("strong",[s._v("ä¸ªæ€§åŒ–å¾®è°ƒ")]),s._v("ï¼šæ ¹æ®ç”¨æˆ·åå¥½å®šåˆ¶æ¨¡å‹è¡Œä¸º")]),s._v(" "),t("li",[t("strong",[s._v("é«˜æ•ˆå¾®è°ƒç®—æ³•")]),s._v("ï¼šè¿›ä¸€æ­¥å‡å°‘å¾®è°ƒçš„è®¡ç®—å’Œå­˜å‚¨æˆæœ¬")])]),s._v(" "),t("blockquote",[t("p",[s._v("éšç€å¤§è¯­è¨€æ¨¡å‹åº”ç”¨çš„æ™®åŠï¼Œé¢„è®­ç»ƒä¸å¾®è°ƒæŠ€æœ¯å°†ç»§ç»­æ¼”è¿›ã€‚æŒæ¡è¿™äº›æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ç°æœ‰æ¨¡å‹ï¼Œä¹Ÿä¸ºæœªæ¥çš„æ¨¡å‹åˆ›æ–°å¥ å®šäº†åŸºç¡€ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v('ä»é¢„è®­ç»ƒçš„"å¯è’™æ•™è‚²"åˆ°å¾®è°ƒçš„"ä¸“ä¸šåŸ¹è®­"ï¼Œå¤§è¯­è¨€æ¨¡å‹çš„å‘å±•ç¦»ä¸å¼€è¿™ä¸¤ä¸ªå…³é”®é˜¶æ®µã€‚é¢„è®­ç»ƒèµ‹äºˆæ¨¡å‹å¹¿åšçš„çŸ¥è¯†ï¼Œè€Œå¾®è°ƒåˆ™è®©æ¨¡å‹èƒ½å¤Ÿé€‚åº”ç‰¹å®šä»»åŠ¡å’Œåœºæ™¯ã€‚')]),s._v(" "),t("p",[s._v("åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å¾®è°ƒæ–¹æ³•éœ€è¦åœ¨æ€§èƒ½ã€è®¡ç®—èµ„æºå’Œéƒ¨ç½²æˆæœ¬ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚å‚æ•°é«˜æ•ˆå¾®è°ƒæ–¹æ³•çš„å‡ºç°ï¼Œä½¿å¾—èµ„æºæœ‰é™çš„å›¢é˜Ÿä¹Ÿèƒ½å‚ä¸åˆ°æ¨¡å‹å®šåˆ¶ä¸­æ¥ã€‚")]),s._v(" "),t("p",[s._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¤§è¯­è¨€æ¨¡å‹çš„é¢„è®­ç»ƒä¸å¾®è°ƒè¿‡ç¨‹ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–ç»éªŒåˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼ğŸ¤")]),s._v(" "),t("p",[s._v("è®°ä½ï¼ŒæŠ€æœ¯ä¹‹è·¯æ²¡æœ‰ç»ˆç‚¹ï¼Œåªæœ‰ä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œæ‰èƒ½åœ¨è¿™å¿«é€Ÿå‘å±•çš„é¢†åŸŸä¿æŒç«äº‰åŠ›ã€‚ğŸ’ª")])])}),[],!1,null,null,null);t.default=r.exports}}]);