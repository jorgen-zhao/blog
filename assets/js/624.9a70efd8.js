(window.webpackJsonp=window.webpackJsonp||[]).push([[624],{977:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v('åœ¨Webåº”ç”¨çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®ç°å®æ—¶æ•°æ®æ›´æ–°å’ŒåŒå‘é€šä¿¡ã€‚ä¼ ç»Ÿçš„HTTPè¯·æ±‚-å“åº”æ¨¡å¼åœ¨è¿™æ–¹é¢æ˜¾å¾—æœ‰äº›åŠ›ä¸ä»å¿ƒã€‚ğŸ¤” å½“æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦WebSocketæ—¶ï¼Œé‚£ç§"å•Šå“ˆï¼"çš„ç¬é—´è‡³ä»Šè®°å¿†çŠ¹æ–° â€”â€” å®ƒå°±åƒæ˜¯ä¸ºWebåº”ç”¨æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€å®æ—¶ä¸–ç•Œçš„å¤§é—¨ã€‚')]),t._v(" "),s("p",[t._v("å‰å‡ å¤©ï¼Œæˆ‘æ­£åœ¨å¼€å‘ä¸€ä¸ªåœ¨çº¿åä½œå·¥å…·ï¼Œéœ€è¦å®ç°å®æ—¶ç¼–è¾‘åŠŸèƒ½ã€‚èµ·åˆæˆ‘è€ƒè™‘ä½¿ç”¨MQTTï¼ˆæ¯•ç«Ÿæˆ‘åšå®¢é‡Œå·²ç»å†™è¿‡å®ƒäº†ï¼‰ï¼Œä½†åæ¥å‘ç°WebSocketæ›´é€‚åˆè¿™ç§ç‚¹å¯¹ç‚¹çš„å®æ—¶äº¤äº’éœ€æ±‚ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶æ·±å…¥èŠèŠWebSocketï¼Œä»¥åŠå®ƒå¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„Webåº”ç”¨å¼€å‘æ–¹å¼ã€‚")]),t._v(" "),s("h2",{attrs:{id:"websocketæ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocketæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" WebSocketæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚å®ƒä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¯ä»¥å®æ—¶åœ°ã€åŒå‘åœ°äº¤æ¢æ•°æ®ã€‚")]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("WebSocketåè®®ç”±RFC 6455å®šä¹‰ï¼Œæ—¨åœ¨ä¸ºWebæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æä¾›ä¸€ç§ä¸å—é™åˆ¶çš„é€šä¿¡æœºåˆ¶ï¼ŒåŒæ—¶ä¿æŒä¸ç°æœ‰WebåŸºç¡€è®¾æ–½çš„å…¼å®¹æ€§ã€‚")])]),s("p",[t._v("ä¸HTTPä¸åŒï¼ŒWebSocketä¸€æ—¦å»ºç«‹è¿æ¥ï¼Œå°±å¯ä»¥ä¿æŒæŒä¹…è¿æ¥ï¼Œå®ç°æ•°æ®çš„å®æ—¶æ¨é€ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯åå¤è½®è¯¢æœåŠ¡å™¨ã€‚")]),t._v(" "),s("h2",{attrs:{id:"websocketçš„å·¥ä½œåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocketçš„å·¥ä½œåŸç†"}},[t._v("#")]),t._v(" WebSocketçš„å·¥ä½œåŸç†")]),t._v(" "),s("h3",{attrs:{id:"è¿æ¥å»ºç«‹è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿æ¥å»ºç«‹è¿‡ç¨‹"}},[t._v("#")]),t._v(" è¿æ¥å»ºç«‹è¿‡ç¨‹")]),t._v(" "),s("p",[t._v('WebSocketçš„è¿æ¥å»ºç«‹è¿‡ç¨‹è¢«ç§°ä¸º"æ¡æ‰‹"ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸HTTPç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›å…³é”®å·®å¼‚ï¼š')]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token request-line"}},[s("span",{pre:!0,attrs:{class:"token method property"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token request-target url"}},[t._v("/chat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("example.com")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Upgrade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("websocket")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Connection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("Upgrade")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Sec-WebSocket-Key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("dGhlIHNhbXBsZSBub25jZQ==")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Origin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("http://example.com")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Sec-WebSocket-Protocol")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("chat, superchat")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Sec-WebSocket-Version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("13")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("æœåŠ¡å™¨å“åº”ï¼š")]),t._v(" "),s("div",{staticClass:"language-http line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token response-status"}},[s("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token status-code number"}},[t._v("101")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token reason-phrase string"}},[t._v("Switching Protocols")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Upgrade")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("websocket")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Connection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("Upgrade")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Sec-WebSocket-Accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token header-value"}},[t._v("s3pPLMBiTxaQ9kYGzzhZRbK+xOo=")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("ä¸€æ—¦æ¡æ‰‹æˆåŠŸï¼Œè¿æ¥å°±ä»HTTPå‡çº§ä¸ºWebSocketï¼Œåç»­çš„æ•°æ®ä¼ è¾“å°†éµå¾ªWebSocketåè®®æ ¼å¼ã€‚")]),t._v(" "),s("h3",{attrs:{id:"æ•°æ®ä¼ è¾“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®ä¼ è¾“"}},[t._v("#")]),t._v(" æ•°æ®ä¼ è¾“")]),t._v(" "),s("p",[t._v("WebSocketä½¿ç”¨å¸§(frame)æ¥ä¼ è¾“æ•°æ®ï¼Œæ¯ä¸ªå¸§åŒ…å«ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ“ä½œç (Opcode)ï¼šè¡¨ç¤ºå¸§ç±»å‹(æ–‡æœ¬ã€äºŒè¿›åˆ¶ç­‰)")]),t._v(" "),s("li",[t._v("æ©ç (Mask)ï¼šå®¢æˆ·ç«¯å‘é€çš„æ•°æ®éœ€è¦æ©ç å¤„ç†")]),t._v(" "),s("li",[t._v("è½½è·é•¿åº¦(Payload length)ï¼šæ•°æ®éƒ¨åˆ†çš„é•¿åº¦")]),t._v(" "),s("li",[t._v("æ‰©å±•æ•°æ®(Extended data)ï¼šå¯é€‰")]),t._v(" "),s("li",[t._v("è½½è·æ•°æ®(Payload data)ï¼šå®é™…ä¼ è¾“çš„æ•°æ®")])]),t._v(" "),s("h2",{attrs:{id:"websocket-vs-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-vs-http"}},[t._v("#")]),t._v(" WebSocket vs HTTP")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("HTTP")]),t._v(" "),s("th",[t._v("WebSocket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("è¿æ¥ç±»å‹")]),t._v(" "),s("td",[t._v("æ— çŠ¶æ€ï¼Œæ¯æ¬¡è¯·æ±‚å»ºç«‹æ–°è¿æ¥")]),t._v(" "),s("td",[t._v("æœ‰çŠ¶æ€ï¼ŒæŒä¹…è¿æ¥")])]),t._v(" "),s("tr",[s("td",[t._v("é€šä¿¡æ–¹å‘")]),t._v(" "),s("td",[t._v("è¯·æ±‚-å“åº”æ¨¡å¼")]),t._v(" "),s("td",[t._v("å…¨åŒå·¥é€šä¿¡")])]),t._v(" "),s("tr",[s("td",[t._v("æ€§èƒ½")]),t._v(" "),s("td",[t._v("æ¯æ¬¡è¯·æ±‚æœ‰é¢å¤–å¼€é”€")]),t._v(" "),s("td",[t._v("è¿æ¥å»ºç«‹åï¼Œæ•°æ®ä¼ è¾“æ•ˆç‡é«˜")])]),t._v(" "),s("tr",[s("td",[t._v("é€‚ç”¨åœºæ™¯")]),t._v(" "),s("td",[t._v("è¯·æ±‚-å“åº”å¼äº¤äº’")]),t._v(" "),s("td",[t._v("å®æ—¶ã€åŒå‘é€šä¿¡")])]),t._v(" "),s("tr",[s("td",[t._v("åè®®å‰ç¼€")]),t._v(" "),s("td",[t._v("http://, https://")]),t._v(" "),s("td",[t._v("ws://, wss://")])])])]),t._v(" "),s("h2",{attrs:{id:"websocket-vs-mqtt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-vs-mqtt"}},[t._v("#")]),t._v(" WebSocket vs MQTT")]),t._v(" "),s("p",[t._v("æ—¢ç„¶æˆ‘åšå®¢é‡Œå·²ç»æœ‰å…³äºMQTTçš„æ–‡ç« ï¼Œé‚£æˆ‘ä»¬ä¸å¦¨å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ä¸ªåè®®ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("WebSocket")]),t._v(" "),s("th",[t._v("MQTT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("åè®®ç±»å‹")]),t._v(" "),s("td",[t._v("å…¨åŒå·¥é€šä¿¡")]),t._v(" "),s("td",[t._v("å‘å¸ƒ/è®¢é˜…")])]),t._v(" "),s("tr",[s("td",[t._v("è¿æ¥æ¨¡å‹")]),t._v(" "),s("td",[t._v("ç‚¹å¯¹ç‚¹")]),t._v(" "),s("td",[t._v("ä¸€å¯¹å¤š")])]),t._v(" "),s("tr",[s("td",[t._v("æ¶ˆæ¯ä¿ç•™")]),t._v(" "),s("td",[t._v("ä¸æ”¯æŒ")]),t._v(" "),s("td",[t._v("æ”¯æŒæ¶ˆæ¯ä¿ç•™")])]),t._v(" "),s("tr",[s("td",[t._v("åè®®å¤æ‚åº¦")]),t._v(" "),s("td",[t._v("ç®€å•")]),t._v(" "),s("td",[t._v("ç›¸å¯¹å¤æ‚")])]),t._v(" "),s("tr",[s("td",[t._v("é€‚ç”¨åœºæ™¯")]),t._v(" "),s("td",[t._v("Webå®æ—¶åº”ç”¨")]),t._v(" "),s("td",[t._v("ç‰©è”ç½‘ã€ä½å¸¦å®½ç¯å¢ƒ")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v("é€‰æ‹©WebSocketè¿˜æ˜¯MQTTï¼Œå–å†³äºä½ çš„å…·ä½“åº”ç”¨åœºæ™¯ã€‚éœ€è¦å®æ—¶åŒå‘äº¤äº’çš„Webåº”ç”¨ï¼ŒWebSocketæ˜¯ç†æƒ³é€‰æ‹©ï¼›è€Œç‰©è”ç½‘è®¾å¤‡æˆ–éœ€è¦ä¸€å¯¹å¤šé€šä¿¡çš„åœºæ™¯ï¼ŒMQTTå¯èƒ½æ›´åˆé€‚ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"å®æˆ˜-ä½¿ç”¨websocketæ„å»ºç®€å•èŠå¤©åº”ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜-ä½¿ç”¨websocketæ„å»ºç®€å•èŠå¤©åº”ç”¨"}},[t._v("#")]),t._v(" å®æˆ˜ï¼šä½¿ç”¨WebSocketæ„å»ºç®€å•èŠå¤©åº”ç”¨")]),t._v(" "),s("p",[t._v("è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨WebSocketã€‚")]),t._v(" "),s("h3",{attrs:{id:"å®¢æˆ·ç«¯å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯å®ç°"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯å®ç°")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºWebSocketè¿æ¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" socket "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://localhost:8080'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥æ‰“å¼€æ—¶è§¦å‘")]),t._v("\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onopen")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WebSocketè¿æ¥å·²å»ºç«‹'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€æ¬¢è¿æ¶ˆæ¯")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½ å¥½ï¼ŒæœåŠ¡å™¨ï¼'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥æ”¶æ¶ˆæ¯")]),t._v("\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ”¶åˆ°æ¶ˆæ¯:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°UIæ˜¾ç¤ºæ¶ˆæ¯")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'messages'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<p>")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("</p>")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥å…³é—­æ—¶è§¦å‘")]),t._v("\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclose")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WebSocketè¿æ¥å·²å…³é—­'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘")]),t._v("\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WebSocketé”™è¯¯:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€æ¶ˆæ¯")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'messageInput'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("h3",{attrs:{id:"æœåŠ¡å™¨ç«¯å®ç°-node-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å™¨ç«¯å®ç°-node-js"}},[t._v("#")]),t._v(" æœåŠ¡å™¨ç«¯å®ç°(Node.js)")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" WebSocket "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºWebSocketæœåŠ¡å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wss "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ws")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®¢æˆ·ç«¯å·²è¿æ¥'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€æ¬¢è¿æ¶ˆæ¯")]),t._v("\n  ws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¬¢è¿åŠ å…¥èŠå¤©å®¤ï¼'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬æ¶ˆæ¯")]),t._v("\n  ws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("incoming")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ”¶åˆ°æ¶ˆæ¯:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¹¿æ’­æ¶ˆæ¯ç»™æ‰€æœ‰å®¢æˆ·ç«¯")]),t._v("\n    wss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("each")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" WebSocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OPEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("ç”¨æˆ·è¯´: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥å…³é—­")]),t._v("\n  ws"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®¢æˆ·ç«¯å·²æ–­å¼€è¿æ¥'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br")])]),s("h2",{attrs:{id:"websocketçš„åº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocketçš„åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" WebSocketçš„åº”ç”¨åœºæ™¯")]),t._v(" "),s("p",[t._v("WebSocketçš„å®æ—¶åŒå‘é€šä¿¡èƒ½åŠ›ä½¿å…¶åœ¨è®¸å¤šåœºæ™¯ä¸­å¤§æ”¾å¼‚å½©ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åœ¨çº¿èŠå¤©åº”ç”¨")]),t._v("ï¼šå¦‚WhatsAppã€å¾®ä¿¡ç½‘é¡µç‰ˆ")]),t._v(" "),s("li",[s("strong",[t._v("å®æ—¶åä½œå·¥å…·")]),t._v("ï¼šå¦‚Google Docsã€åœ¨çº¿ç™½æ¿")]),t._v(" "),s("li",[s("strong",[t._v("å®æ—¶æ•°æ®ç›‘æ§")]),t._v("ï¼šè‚¡ç¥¨è¡Œæƒ…ã€ç³»ç»Ÿç›‘æ§é¢æ¿")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨çº¿æ¸¸æˆ")]),t._v("ï¼šå¤šäººå®æ—¶æ¸¸æˆ")]),t._v(" "),s("li",[s("strong",[t._v("ç‰©è”ç½‘åº”ç”¨")]),t._v("ï¼šè®¾å¤‡çŠ¶æ€å®æ—¶ç›‘æ§")]),t._v(" "),s("li",[s("strong",[t._v("æ¨é€é€šçŸ¥")]),t._v("ï¼šå®æ—¶æ¶ˆæ¯æ¨é€")])]),t._v(" "),s("h2",{attrs:{id:"å®‰å…¨è€ƒè™‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®‰å…¨è€ƒè™‘"}},[t._v("#")]),t._v(" å®‰å…¨è€ƒè™‘")]),t._v(" "),s("p",[t._v("åœ¨ä½¿ç”¨WebSocketæ—¶ï¼Œå®‰å…¨æ€§æ˜¯ä¸å¯å¿½è§†çš„é‡è¦æ–¹é¢ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä½¿ç”¨wss://")]),t._v("ï¼šå§‹ç»ˆä½¿ç”¨WebSocketçš„å®‰å…¨ç‰ˆæœ¬(wss://)ï¼Œç±»ä¼¼äºHTTPSå¯¹HTTPçš„å…³ç³»")]),t._v(" "),s("li",[s("strong",[t._v("éªŒè¯Origin")]),t._v("ï¼šæœåŠ¡å™¨åº”éªŒè¯WebSocketè¯·æ±‚çš„Originå¤´ï¼Œé˜²æ­¢è·¨ç«™WebSocketåŠ«æŒ")]),t._v(" "),s("li",[s("strong",[t._v("è¾“å…¥éªŒè¯")]),t._v("ï¼šå¯¹é€šè¿‡WebSocketä¼ è¾“çš„æ•°æ®è¿›è¡Œä¸¥æ ¼éªŒè¯ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»")]),t._v(" "),s("li",[s("strong",[t._v("é™åˆ¶è¿æ¥")]),t._v("ï¼šå®æ–½é€‚å½“çš„è¿æ¥é™åˆ¶ï¼Œé˜²æ­¢DoSæ”»å‡»")])]),t._v(" "),s("h2",{attrs:{id:"æµè§ˆå™¨å…¼å®¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨å…¼å®¹æ€§"}},[t._v("#")]),t._v(" æµè§ˆå™¨å…¼å®¹æ€§")]),t._v(" "),s("p",[t._v("WebSocketå¾—åˆ°äº†ç°ä»£æµè§ˆå™¨çš„å¹¿æ³›æ”¯æŒï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Chrome 4+")]),t._v(" "),s("li",[t._v("Firefox 4+")]),t._v(" "),s("li",[t._v("Safari 5+")]),t._v(" "),s("li",[t._v("Edge 12+")]),t._v(" "),s("li",[t._v("IE 10+ (éƒ¨åˆ†æ”¯æŒ)")])]),t._v(" "),s("p",[t._v("å¯¹äºéœ€è¦æ”¯æŒæ—§ç‰ˆæµè§ˆå™¨çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Socket.IOç­‰åº“ï¼Œå®ƒä»¬æä¾›äº†WebSocketçš„é™çº§æ–¹æ¡ˆã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ€§èƒ½ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½ä¼˜åŒ–"}},[t._v("#")]),t._v(" æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),s("p",[t._v("ä¸ºäº†æœ€å¤§åŒ–WebSocketçš„æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è¿æ¥å¤ç”¨")]),t._v("ï¼šåœ¨å•é¡µåº”ç”¨ä¸­ï¼Œå°½é‡ä¿æŒä¸€ä¸ªWebSocketè¿æ¥ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªåŠŸèƒ½åˆ›å»ºæ–°è¿æ¥")]),t._v(" "),s("li",[s("strong",[t._v("æ¶ˆæ¯æ‰¹å¤„ç†")]),t._v("ï¼šå°†å¤šä¸ªå°æ¶ˆæ¯åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„æ¶ˆæ¯å‘é€")]),t._v(" "),s("li",[s("strong",[t._v("å¿ƒè·³æœºåˆ¶")]),t._v("ï¼šå®ç°å¿ƒè·³åŒ…æ£€æµ‹è¿æ¥çŠ¶æ€ï¼ŒåŠæ—¶å¤„ç†æ–­çº¿é‡è¿")]),t._v(" "),s("li",[s("strong",[t._v("æ¶ˆæ¯å‹ç¼©")]),t._v("ï¼šå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘ç½‘ç»œè´Ÿè½½")])]),t._v(" "),s("h2",{attrs:{id:"æœªæ¥å±•æœ›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å±•æœ›"}},[t._v("#")]),t._v(" æœªæ¥å±•æœ›")]),t._v(" "),s("p",[t._v("éšç€WebæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒWebSocketä¹Ÿåœ¨æŒç»­æ¼”è¿›ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("HTTP/2ä¸WebSocket")]),t._v("ï¼šHTTP/2çš„å¤šè·¯å¤ç”¨èƒ½åŠ›ä¸WebSocketçš„ç»“åˆï¼Œå¯èƒ½ä¼šå¸¦æ¥æ–°çš„æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),s("li",[s("strong",[t._v("WebTransport")]),t._v("ï¼šæ–°çš„Web APIï¼Œæ—¨åœ¨æä¾›æ¯”WebSocketæ›´å¼ºå¤§å’Œçµæ´»çš„é€šä¿¡èƒ½åŠ›")]),t._v(" "),s("li",[s("strong",[t._v("è¾¹ç¼˜è®¡ç®—")]),t._v("ï¼šWebSocketä¸è¾¹ç¼˜è®¡ç®—çš„ç»“åˆï¼Œå¯ä»¥è¿›ä¸€æ­¥é™ä½å»¶è¿Ÿï¼Œæå‡å®æ—¶åº”ç”¨çš„æ€§èƒ½")])]),t._v(" "),s("blockquote",[s("p",[t._v("WebSocketä¸ä»…ä»…æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼çš„è½¬å˜â€”â€”ä»è¯·æ±‚-å“åº”çš„åŒæ­¥æ¨¡å¼ï¼Œèµ°å‘å®æ—¶ã€åŒå‘çš„å¼‚æ­¥äº¤äº’ã€‚åœ¨è¿™ä¸ªæ•°æ®é©±åŠ¨çš„æ—¶ä»£ï¼ŒæŒæ¡WebSocketï¼Œå°±æ˜¯æŒæ¡äº†æ„å»ºä¸‹ä¸€ä»£å®æ—¶åº”ç”¨çš„å…³é”®é’¥åŒ™ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v("WebSocketä¸ºæˆ‘ä»¬æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€å®æ—¶Webä¸–ç•Œçš„å¤§é—¨ã€‚ä»ç®€å•çš„èŠå¤©åº”ç”¨åˆ°å¤æ‚çš„åä½œå¹³å°ï¼ŒWebSocketéƒ½å‘æŒ¥ç€ä¸å¯æ›¿ä»£çš„ä½œç”¨ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ç†è§£WebSocketçš„æ ¸å¿ƒæ¦‚å¿µå’Œåº”ç”¨åœºæ™¯ã€‚")]),t._v(" "),s("p",[t._v("åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä¼šæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„é€šä¿¡æ–¹æ¡ˆã€‚æœ‰æ—¶WebSocketæ˜¯æœ€ä½³é€‰æ‹©ï¼Œæœ‰æ—¶MQTTæˆ–å…¶ä»–åè®®å¯èƒ½æ›´åˆé€‚ã€‚é‡è¦çš„æ˜¯ç†è§£æ¯ç§åè®®çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥ä¾¿åšå‡ºæ˜æ™ºçš„æŠ€æœ¯å†³ç­–ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœä½ æœ‰ä»»ä½•å…³äºWebSocketçš„é—®é¢˜æˆ–ç»éªŒåˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢å®æ—¶é€šä¿¡çš„æ— é™å¯èƒ½ã€‚ğŸš€")])])}),[],!1,null,null,null);s.default=e.exports}}]);