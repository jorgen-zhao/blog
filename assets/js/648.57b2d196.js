(window.webpackJsonp=window.webpackJsonp||[]).push([[648],{999:function(t,s,a){"use strict";a.r(s);var n=a(15),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v('åœ¨å®æ—¶é€šä¿¡æŠ€æœ¯ç™¾èŠ±é½æ”¾çš„ä»Šå¤©ï¼ŒWebSocketå’ŒMQTTå·²ç»æˆä¸ºäº†ç°ä»£åº”ç”¨ä¸­çš„æ˜æ˜Ÿåè®®ã€‚ğŸš€ ä½†å½“æˆ‘ä»¬å›é¡¾æŠ€æœ¯æ¼”è¿›å†ç¨‹æ—¶ï¼Œä¼šå‘ç°ä¸€ä¸ªåœ¨WebSocketæ™®åŠå‰é»˜é»˜æ”¯æ’‘ç€æ— æ•°å®æ—¶åº”ç”¨çš„"è€å…µ"â€”â€”é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å¸¦å¤§å®¶ä¸€èµ·é‡æ¸©è¿™é¡¹å¤è€è€Œä¼˜é›…çš„æŠ€æœ¯ï¼Œç†è§£å®ƒå¦‚ä½•åœ¨ä¸æ”¯æŒåŒå‘é€šä¿¡çš„HTTPåè®®ä¸Šï¼Œå·§å¦™åœ°å®ç°äº†"ä¼ªå®æ—¶"çš„å¥‡è¿¹ã€‚ğŸ”')]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v('é•¿è½®è¯¢æœ¬è´¨ä¸Šæ˜¯HTTPåè®®çš„"åˆ›é€ æ€§æ»¥ç”¨"ï¼Œå®ƒé€šè¿‡ä¿æŒè¿æ¥æ‰“å¼€ç›´åˆ°æœ‰æ•°æ®å¯ç”¨ï¼Œå·§å¦™ç»•è¿‡äº†HTTPçš„æ— çŠ¶æ€ç‰¹æ€§ã€‚')])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"é•¿è½®è¯¢çš„å·¥ä½œåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é•¿è½®è¯¢çš„å·¥ä½œåŸç†"}},[t._v("#")]),t._v(" é•¿è½®è¯¢çš„å·¥ä½œåŸç†")]),t._v(" "),s("p",[t._v("é•¿è½®è¯¢çš„æ ¸å¿ƒæ€æƒ³éå¸¸å·§å¦™ï¼š"),s("strong",[t._v("å®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥æ‰“å¼€ç›´åˆ°æœ‰æ–°æ•°æ®å¯å‘é€")]),t._v("ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“æµç¨‹æ¥ç†è§£ï¼š")]),t._v(" "),s("h3",{attrs:{id:"åŸºæœ¬æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬æµç¨‹"}},[t._v("#")]),t._v(" åŸºæœ¬æµç¨‹")]),t._v(" "),s("ol",[s("li",[t._v("å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚")]),t._v(" "),s("li",[t._v("æœåŠ¡å™¨"),s("strong",[t._v("ä¸ç«‹å³å“åº”")]),t._v("ï¼Œè€Œæ˜¯ä¿æŒè¿æ¥æ‰“å¼€")]),t._v(" "),s("li",[t._v("å½“æœåŠ¡å™¨æœ‰æ–°æ•°æ®æ—¶ï¼Œç«‹å³è¿”å›å“åº”")]),t._v(" "),s("li",[t._v("å®¢æˆ·ç«¯æ”¶åˆ°å“åº”åç«‹å³å‘é€æ–°è¯·æ±‚ï¼Œå½¢æˆå¾ªç¯")])]),t._v(" "),s("div",{staticClass:"language-mermaid line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sequenceDiagram")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" Client\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("participant")]),t._v(" Server\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("loop")]),t._v(" å®æ—¶æ•°æ®æµ\n        Client"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("Server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HTTPè¯·æ±‚"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(ä¿æŒè¿æ¥)")]),t._v("\n        Server"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e>")]),t._v("Client"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ç­‰å¾…æ•°æ®...\n        Server"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e>")]),t._v("Client"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" è¿”å›æ–°æ•°æ®\n        Client"),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("->>")]),t._v("Server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" å‘é€æ–°è¯·æ±‚\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h3",{attrs:{id:"ä¸çŸ­è½®è¯¢çš„å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸çŸ­è½®è¯¢çš„å¯¹æ¯”"}},[t._v("#")]),t._v(" ä¸çŸ­è½®è¯¢çš„å¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("çŸ­è½®è¯¢")]),t._v(" "),s("th",[t._v("é•¿è½®è¯¢")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("è¯·æ±‚é¢‘ç‡")]),t._v(" "),s("td",[t._v("é«˜é¢‘å®šæ—¶è¯·æ±‚")]),t._v(" "),s("td",[t._v("æ•°æ®é©±åŠ¨è¯·æ±‚")])]),t._v(" "),s("tr",[s("td",[t._v("æœåŠ¡å™¨è´Ÿè½½")]),t._v(" "),s("td",[t._v("é«˜(æ— æ„ä¹‰çš„è¯·æ±‚)")]),t._v(" "),s("td",[t._v("ä½(ä»…åœ¨æœ‰æ•°æ®æ—¶å“åº”)")])]),t._v(" "),s("tr",[s("td",[t._v("å®æ—¶æ€§")]),t._v(" "),s("td",[t._v("å·®(å›ºå®šå»¶è¿Ÿ)")]),t._v(" "),s("td",[t._v("ä¸­ç­‰(å–å†³äºæœåŠ¡å™¨å“åº”é€Ÿåº¦)")])]),t._v(" "),s("tr",[s("td",[t._v("èµ„æºæ¶ˆè€—")]),t._v(" "),s("td",[t._v("é«˜(å¤§é‡è¿æ¥)")]),t._v(" "),s("td",[t._v("ä¸­ç­‰(è¿æ¥æ•°å‡å°‘)")])])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"å®ç°ç»†èŠ‚ä¸æŒ‘æˆ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°ç»†èŠ‚ä¸æŒ‘æˆ˜"}},[t._v("#")]),t._v(" å®ç°ç»†èŠ‚ä¸æŒ‘æˆ˜")]),t._v(" "),s("h3",{attrs:{id:"æœåŠ¡å™¨ç«¯å®ç°è¦ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å™¨ç«¯å®ç°è¦ç‚¹"}},[t._v("#")]),t._v(" æœåŠ¡å™¨ç«¯å®ç°è¦ç‚¹")]),t._v(" "),s("p",[t._v("åœ¨Node.jsä¸­å®ç°é•¿è½®è¯¢æœåŠ¡å™¨çš„å…³é”®ä»£ç ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é•¿è½®è¯¢æœåŠ¡å™¨ç¤ºä¾‹")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/long-poll'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. å­˜å‚¨å“åº”å¯¹è±¡")]),t._v("\n  pendingRes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. è®¾ç½®è¶…æ—¶æœºåˆ¶")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timeout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingRes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" pendingRes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 30ç§’è¶…æ—¶")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å½“æœ‰æ–°æ•°æ®æ—¶è§¦å‘æ‰€æœ‰ç­‰å¾…çš„å®¢æˆ·ç«¯")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("broadcast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    pendingRes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pendingRes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"å®¢æˆ·ç«¯å®ç°ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯å®ç°ç­–ç•¥"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯å®ç°ç­–ç•¥")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é•¿è½®è¯¢å®¢æˆ·ç«¯å®ç°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("longPoll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/long-poll'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°ç•Œé¢")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç«‹å³å‘é€æ–°è¯·æ±‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("longPoll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1ç§’å»¶è¿Ÿé¿å…æœåŠ¡å™¨è¿‡è½½")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è½®è¯¢å¤±è´¥:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("longPoll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é”™è¯¯å5ç§’é‡è¯•")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("h3",{attrs:{id:"ä¸»è¦æŒ‘æˆ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»è¦æŒ‘æˆ˜"}},[t._v("#")]),t._v(" ä¸»è¦æŒ‘æˆ˜")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è¿æ¥ç®¡ç†")]),t._v("ï¼šéœ€è¦å¤„ç†å¤§é‡å¹¶å‘é•¿è¿æ¥")]),t._v(" "),s("li",[s("strong",[t._v("è¶…æ—¶å¤„ç†")]),t._v("ï¼šè®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´é¿å…èµ„æºæµªè´¹")]),t._v(" "),s("li",[s("strong",[t._v("é”™è¯¯æ¢å¤")]),t._v("ï¼šç½‘ç»œä¸­æ–­åçš„é‡è¿æœºåˆ¶")]),t._v(" "),s("li",[s("strong",[t._v("æœåŠ¡å™¨è´Ÿè½½")]),t._v("ï¼šè¿æ¥æ•°éšç”¨æˆ·é‡çº¿æ€§å¢é•¿")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"å®é™…åº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" å®é™…åº”ç”¨åœºæ™¯")]),t._v(" "),s("p",[t._v("å°½ç®¡WebSocketå·²æˆä¸ºä¸»æµï¼Œé•¿è½®è¯¢åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä»æœ‰ç‹¬ç‰¹ä»·å€¼ï¼š")]),t._v(" "),s("h3",{attrs:{id:"_1-æ—§ç³»ç»Ÿå…¼å®¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ—§ç³»ç»Ÿå…¼å®¹æ€§"}},[t._v("#")]),t._v(" 1. æ—§ç³»ç»Ÿå…¼å®¹æ€§")]),t._v(" "),s("p",[t._v("å½“éœ€è¦ä¸ºä¸æ”¯æŒWebSocketçš„æ—§æµè§ˆå™¨æä¾›å®æ—¶åŠŸèƒ½æ—¶ï¼Œé•¿è½®è¯¢æ˜¯å®Œç¾çš„é™çº§æ–¹æ¡ˆã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ“¡ æˆ‘æ›¾åœ¨é—ç•™é¡¹ç›®ä¸­æ”¹é€ è¿‡ä¸€ä¸ªåŸºäºIE8çš„ç›‘æ§ç³»ç»Ÿï¼Œé€šè¿‡é•¿è½®è¯¢å®ç°äº†å®æ—¶å‘Šè­¦åŠŸèƒ½ï¼Œç”¨æˆ·ç”šè‡³æ²¡æœ‰å¯Ÿè§‰åˆ°ä¸æ–°ç‰ˆç³»ç»Ÿçš„å·®å¼‚ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-ä»£ç†ç¯å¢ƒé™åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä»£ç†ç¯å¢ƒé™åˆ¶"}},[t._v("#")]),t._v(" 2. ä»£ç†ç¯å¢ƒé™åˆ¶")]),t._v(" "),s("p",[t._v("åœ¨ä¼ä¸šé˜²ç«å¢™ä¸¥æ ¼çš„ç¯å¢ƒä¸­ï¼ŒWebSocketç«¯å£å¯èƒ½è¢«å°é”ï¼Œè€ŒHTTP(80/443)é€šå¸¸ä¿æŒå¼€æ”¾ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-ä½é¢‘å®æ—¶éœ€æ±‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½é¢‘å®æ—¶éœ€æ±‚"}},[t._v("#")]),t._v(" 3. ä½é¢‘å®æ—¶éœ€æ±‚")]),t._v(" "),s("p",[t._v("å¯¹äºæ›´æ–°é¢‘ç‡è¾ƒä½çš„åº”ç”¨ï¼ˆå¦‚åå°ä»»åŠ¡çŠ¶æ€æ›´æ–°ï¼‰ï¼Œé•¿è½®è¯¢çš„ç®€å•å®ç°ä¼˜åŠ¿æ˜æ˜¾ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ä¼˜ç¼ºç‚¹åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜ç¼ºç‚¹åˆ†æ"}},[t._v("#")]),t._v(" ä¼˜ç¼ºç‚¹åˆ†æ")]),t._v(" "),s("h3",{attrs:{id:"ä¼˜åŠ¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŠ¿"}},[t._v("#")]),t._v(" ä¼˜åŠ¿")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®ç°ç®€å•")]),t._v("ï¼šåŸºäºæ ‡å‡†HTTPï¼Œæ— éœ€ç‰¹æ®Šåè®®æ”¯æŒ")]),t._v(" "),s("li",[s("strong",[t._v("å…¼å®¹æ€§å¥½")]),t._v("ï¼šæ”¯æŒæ‰€æœ‰æµè§ˆå™¨å’Œä»£ç†æœåŠ¡å™¨")]),t._v(" "),s("li",[s("strong",[t._v("è°ƒè¯•å‹å¥½")]),t._v("ï¼šå¯ç›´æ¥é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹è¯·æ±‚")]),t._v(" "),s("li",[s("strong",[t._v("æ¸è¿›å¢å¼º")]),t._v("ï¼šå¯ä½œä¸ºWebSocketçš„ä¼˜é›…é™çº§æ–¹æ¡ˆ")])]),t._v(" "),s("h3",{attrs:{id:"åŠ£åŠ¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŠ£åŠ¿"}},[t._v("#")]),t._v(" åŠ£åŠ¿")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("èµ„æºæ¶ˆè€—")]),t._v("ï¼šæ¯ä¸ªè¿æ¥å ç”¨æœåŠ¡å™¨èµ„æº")]),t._v(" "),s("li",[s("strong",[t._v("å»¶è¿Ÿè¾ƒé«˜")]),t._v("ï¼šå³ä½¿å¾ˆå¿«ä¹Ÿæœ‰ç½‘ç»œå¾€è¿”å»¶è¿Ÿ")]),t._v(" "),s("li",[s("strong",[t._v("çŠ¶æ€ç®¡ç†å¤æ‚")]),t._v("ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†è¿æ¥çŠ¶æ€")]),t._v(" "),s("li",[s("strong",[t._v("å¯æ‰©å±•æ€§å·®")]),t._v("ï¼šé«˜å¹¶å‘æ—¶æœåŠ¡å™¨å‹åŠ›å¤§")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v('é•¿è½®è¯¢ä½œä¸ºå®æ—¶é€šä¿¡æŠ€æœ¯å‘å±•å²ä¸Šçš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œå±•ç°äº†å·¥ç¨‹å¸ˆä»¬åœ¨æŠ€æœ¯é™åˆ¶ä¸‹çš„åˆ›é€ åŠ›ã€‚ğŸŒŸ å°½ç®¡ç°åœ¨WebSocketå’ŒMQTTå·²æˆä¸ºä¸»æµï¼Œä½†é•¿è½®è¯¢çš„æ€æƒ³â€”â€”"ä¿æŒè¿æ¥ç›´åˆ°æœ‰æ•°æ®"â€”â€”ä»ç„¶å½±å“ç€ç°ä»£é€šä¿¡åè®®çš„è®¾è®¡ã€‚')]),t._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[t._v('"åœ¨æŠ€æœ¯æ¼”è¿›ä¸­ï¼Œæ²¡æœ‰è¿‡æ—¶çš„æŠ€æœ¯ï¼Œåªæœ‰ä¸åˆé€‚çš„åº”ç”¨åœºæ™¯ã€‚"')])]),t._v(" "),s("p",[t._v("å¯¹äºç°ä»£å¼€å‘è€…ï¼Œç†è§£é•¿è½®è¯¢çš„ä»·å€¼åœ¨äºï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä½œä¸ºWebSocketçš„é™çº§æ–¹æ¡ˆ")]),t._v(" "),s("li",[t._v("åœ¨å—é™ç½‘ç»œç¯å¢ƒä¸­çš„å¤‡é€‰æ–¹æ¡ˆ")]),t._v(" "),s("li",[t._v("ç†è§£å®æ—¶é€šä¿¡åè®®çš„æ¼”è¿›é€»è¾‘")])]),t._v(" "),s("p",[t._v("ä¸‹æ¬¡å½“ä½ éœ€è¦å®ç°å®æ—¶åŠŸèƒ½æ—¶ï¼Œä¸å¦¨æ€è€ƒä¸€ä¸‹ï¼šæˆ‘çš„åœºæ™¯æ˜¯å¦çœŸçš„éœ€è¦WebSocketï¼Ÿæˆ–è®¸é•¿è½®è¯¢æ‰æ˜¯é‚£ä¸ªæ°åˆ°å¥½å¤„çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆå‘¢ï¼ŸğŸ¤”")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code")]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);s.default=r.exports}}]);