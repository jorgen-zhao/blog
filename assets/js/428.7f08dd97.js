(window.webpackJsonp=window.webpackJsonp||[]).push([[428],{780:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸–ç•Œé‡Œï¼Œå„ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„åè°ƒä¸é€šä¿¡å°±åƒæ˜¯ä¹é˜Ÿçš„æŒ‡æŒ¥å®¶ï¼Œç¡®ä¿æ•´ä¸ªç³»ç»Ÿå’Œè°è¿è¡Œã€‚ğŸµ ä½œä¸ºä¸€ä¸ªé•¿æœŸåœ¨åˆ†å¸ƒå¼é¢†åŸŸæ‘¸çˆ¬æ»šæ‰“çš„æŠ€æœ¯äººå‘˜ï¼Œæˆ‘æ·±æ·±ä½“ä¼šåˆ°ï¼Œä¸€ä¸ªå¼ºå¤§çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡å¾€å¾€æ˜¯æ„å»ºå¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ã€‚")]),t._v(" "),s("p",[t._v('ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶èŠèŠåˆ†å¸ƒå¼åè°ƒæœåŠ¡ä¸­çš„ä¸¤ä½é‡é‡çº§é€‰æ‰‹ï¼šZooKeeperå’Œetcdã€‚è¿™ä¸¤ä½"æŒ‡æŒ¥å®¶"åœ¨å„è‡ªçš„èˆå°ä¸Šå¤§æ”¾å¼‚å½©ï¼Œæ”¯æ’‘ç€æ— æ•°åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚')]),t._v(" "),s("h2",{attrs:{id:"åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„å¿…è¦æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„å¿…è¦æ€§"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„å¿…è¦æ€§")]),t._v(" "),s("p",[t._v("æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰åè°ƒæœåŠ¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åº”ç”¨Aä¸çŸ¥é“åº”ç”¨Bæ˜¯å¦åœ¨çº¿")]),t._v(" "),s("li",[t._v("å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å°è¯•ä¿®æ”¹åŒä¸€ä»½æ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´")]),t._v(" "),s("li",[t._v("ç³»ç»Ÿæ— æ³•è‡ªåŠ¨ä»æ•…éšœä¸­æ¢å¤ï¼Œéœ€è¦äººå·¥å¹²é¢„")]),t._v(" "),s("li",[t._v("é…ç½®å˜æ›´éœ€è¦é€ä¸ªèŠ‚ç‚¹æ‰‹åŠ¨æ›´æ–°ï¼Œæ•ˆç‡ä½ä¸‹")])]),t._v(" "),s("p",[t._v("è¿™äº›é—®é¢˜å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼ŸğŸ˜… è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åˆ†å¸ƒå¼åè°ƒæœåŠ¡ã€‚")]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„åŸºç¡€ç»„ä»¶ï¼Œå®ƒæä¾›äº†å‘½åæœåŠ¡ã€é…ç½®ç®¡ç†ã€åˆ†å¸ƒå¼é”ã€é¢†å¯¼è€…é€‰ä¸¾ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæ˜¯æ„å»ºé«˜å¯ç”¨ã€ä¸€è‡´æ€§åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®ã€‚")])]),s("h2",{attrs:{id:"zookeeper-åˆ†å¸ƒå¼åè°ƒçš„å…ƒè€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-åˆ†å¸ƒå¼åè°ƒçš„å…ƒè€"}},[t._v("#")]),t._v(" ZooKeeper-åˆ†å¸ƒå¼åè°ƒçš„å…ƒè€")]),t._v(" "),s("p",[t._v('ZooKeeperç”±Yahoo!å¼€å‘ï¼Œåæ¥æˆä¸ºApacheé¡¶çº§é¡¹ç›®ï¼Œå¯ä»¥è¯´æ˜¯åˆ†å¸ƒå¼åè°ƒæœåŠ¡é¢†åŸŸçš„"è€å‰è¾ˆ"ã€‚')]),t._v(" "),s("h3",{attrs:{id:"æ ¸å¿ƒç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒç‰¹æ€§"}},[t._v("#")]),t._v(" æ ¸å¿ƒç‰¹æ€§")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é«˜å¯ç”¨æ€§")]),t._v("ï¼šé€šè¿‡ZABåè®®ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œé€šå¸¸éƒ¨ç½²å¥‡æ•°ä¸ªèŠ‚ç‚¹(3ã€5ã€7)æ¥ä¿è¯å®¹é”™")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®æ¨¡å‹")]),t._v("ï¼šç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿçš„æ ‘å½¢ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨æ•°æ®å¹¶æœ‰å­èŠ‚ç‚¹")]),t._v(" "),s("li",[s("strong",[t._v("Watcheræœºåˆ¶")]),t._v("ï¼šå®¢æˆ·ç«¯å¯ä»¥è®¾ç½®ç›‘å¬ï¼Œå½“èŠ‚ç‚¹æ•°æ®æˆ–å­èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®¢æˆ·ç«¯")]),t._v(" "),s("li",[s("strong",[t._v("é¡ºåºä¿è¯")]),t._v("ï¼šæ‰€æœ‰æ›´æ–°æ“ä½œéƒ½æ˜¯å…¨å±€æœ‰åºçš„")])]),t._v(" "),s("h3",{attrs:{id:"å…¸å‹åº”ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…¸å‹åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" å…¸å‹åº”ç”¨åœºæ™¯")]),t._v(" "),s("p",[t._v("ZooKeeperåœ¨è®¸å¤šçŸ¥åç³»ç»Ÿä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç³»ç»Ÿ")]),t._v(" "),s("th",[t._v("ä½¿ç”¨ZooKeeperçš„åœºæ™¯")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Kafka")]),t._v(" "),s("td",[t._v("Brokeræ³¨å†Œã€ä¸»é¢˜åˆ†åŒºåˆ†é…ã€æ¶ˆè´¹è€…åç§»é‡ç®¡ç†")])]),t._v(" "),s("tr",[s("td",[t._v("Hadoop")]),t._v(" "),s("td",[t._v("HMasteré€‰ä¸¾ã€NameNodeé€‰ä¸¾ã€é…ç½®ç®¡ç†")])]),t._v(" "),s("tr",[s("td",[t._v("Storm")]),t._v(" "),s("td",[t._v("Nimbusä¸Supervisoråè°ƒã€ä»»åŠ¡åˆ†é…")])]),t._v(" "),s("tr",[s("td",[t._v("Dubbo")]),t._v(" "),s("td",[t._v("æœåŠ¡æ³¨å†Œä¸å‘ç°ã€é…ç½®ä¸­å¿ƒ")])])])]),t._v(" "),s("h3",{attrs:{id:"å®æˆ˜ç¤ºä¾‹-ä½¿ç”¨zookeeperå®ç°åˆ†å¸ƒå¼é”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ç¤ºä¾‹-ä½¿ç”¨zookeeperå®ç°åˆ†å¸ƒå¼é”"}},[t._v("#")]),t._v(" å®æˆ˜ç¤ºä¾‹ï¼šä½¿ç”¨ZooKeeperå®ç°åˆ†å¸ƒå¼é”")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–åˆ†å¸ƒå¼é”")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("acquireLock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" lockPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°è¯•åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" lockNode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/lock-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZooDefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Ids")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OPEN_ACL_UNSAFE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EPHEMERAL_SEQUENTIAL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æ‰€æœ‰é”èŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" children "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChildren")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœåˆ›å»ºçš„èŠ‚ç‚¹æ˜¯æœ€å°çš„ï¼Œåˆ™è·å–é”æˆåŠŸ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦åˆ™ç›‘å¬å‰ä¸€ä¸ªèŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" previousNodePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lockPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("binarySearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lockNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previousNodePath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WatchedEvent")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤ï¼Œé‡æ–°å°è¯•è·å–é”")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("acquireLock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lockPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("h2",{attrs:{id:"etcd-æ–°æ—¶ä»£çš„åè°ƒæœåŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#etcd-æ–°æ—¶ä»£çš„åè°ƒæœåŠ¡"}},[t._v("#")]),t._v(" etcd-æ–°æ—¶ä»£çš„åè°ƒæœåŠ¡")]),t._v(" "),s("p",[t._v("etcdç”±CoreOS(ç°ä¸ºRed Hat)å¼€å‘ï¼Œæ˜¯Kubernetesé›†ç¾¤çš„é»˜è®¤åè°ƒæœåŠ¡ã€‚ä¸ZooKeeperç›¸æ¯”ï¼Œetcdæ›´ç°ä»£åŒ–ï¼Œæ›´é€‚åˆäº‘åŸç”Ÿç¯å¢ƒã€‚")]),t._v(" "),s("h3",{attrs:{id:"æ ¸å¿ƒç‰¹æ€§-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒç‰¹æ€§-2"}},[t._v("#")]),t._v(" æ ¸å¿ƒç‰¹æ€§")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Raftä¸€è‡´æ€§ç®—æ³•")]),t._v("ï¼šé‡‡ç”¨Raftåè®®ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œå®ç°ç®€å•ä¸”æ˜“äºç†è§£")]),t._v(" "),s("li",[s("strong",[t._v("HTTP API")]),t._v("ï¼šæä¾›RESTful APIï¼Œé€šè¿‡HTTPè¿›è¡Œäº¤äº’ï¼Œéå¸¸å‹å¥½")]),t._v(" "),s("li",[s("strong",[t._v("ç‰ˆæœ¬åŒ–KVå­˜å‚¨")]),t._v("ï¼šåŸºäºé”®å€¼å¯¹å­˜å‚¨ï¼Œæ¯ä¸ªé”®å€¼å¯¹éƒ½æœ‰ç‰ˆæœ¬å·ï¼Œæ”¯æŒäº‹åŠ¡æ“ä½œ")]),t._v(" "),s("li",[s("strong",[t._v("Watchæœºåˆ¶")]),t._v("ï¼šç±»ä¼¼ZooKeeperçš„Watcherï¼Œå¯ä»¥ç›‘å¬é”®å€¼å˜åŒ–")])]),t._v(" "),s("h3",{attrs:{id:"ä¸zookeeperçš„å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸zookeeperçš„å¯¹æ¯”"}},[t._v("#")]),t._v(" ä¸ZooKeeperçš„å¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("ZooKeeper")]),t._v(" "),s("th",[t._v("etcd")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ä¸€è‡´æ€§åè®®")]),t._v(" "),s("td",[t._v("ZAB")]),t._v(" "),s("td",[t._v("Raft")])]),t._v(" "),s("tr",[s("td",[t._v("æ•°æ®æ¨¡å‹")]),t._v(" "),s("td",[t._v("æ ‘å½¢ç»“æ„")]),t._v(" "),s("td",[t._v("é”®å€¼å¯¹")])]),t._v(" "),s("tr",[s("td",[t._v("APIåè®®")]),t._v(" "),s("td",[t._v("åŸç”Ÿåè®®")]),t._v(" "),s("td",[t._v("HTTP/JSON")])]),t._v(" "),s("tr",[s("td",[t._v("å®¢æˆ·ç«¯åº“")]),t._v(" "),s("td",[t._v("å¤šç§è¯­è¨€æ”¯æŒ")]),t._v(" "),s("td",[t._v("å¤šç§è¯­è¨€æ”¯æŒ")])]),t._v(" "),s("tr",[s("td",[t._v("é€‚ç”¨åœºæ™¯")]),t._v(" "),s("td",[t._v("å¤§æ•°æ®ç”Ÿæ€ç³»ç»Ÿ")]),t._v(" "),s("td",[t._v("äº‘åŸç”Ÿã€å®¹å™¨ç¼–æ’")])])])]),t._v(" "),s("h3",{attrs:{id:"å®æˆ˜ç¤ºä¾‹-ä½¿ç”¨etcdå®ç°æœåŠ¡å‘ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ç¤ºä¾‹-ä½¿ç”¨etcdå®ç°æœåŠ¡å‘ç°"}},[t._v("#")]),t._v(" å®æˆ˜ç¤ºä¾‹ï¼šä½¿ç”¨etcdå®ç°æœåŠ¡å‘ç°")]),t._v(" "),s("div",{staticClass:"language-go line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†ŒæœåŠ¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("etcdClient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("clientv3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serviceName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instanceID "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" addr "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç§Ÿçº¦ï¼Œè®¾ç½®TTL")]),t._v("\n    leaseResp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" etcdClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Grant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" err\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨å†ŒæœåŠ¡å®ä¾‹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etcdClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/%s/%s"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serviceName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instanceID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          clientv3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WithLease")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leaseResp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" err\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šæœŸç»­ç§Ÿ")]),t._v("\n    ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" kaerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" etcdClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("KeepAlive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" leaseResp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" kaerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" kaerr\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†ç»­ç§Ÿå“åº”")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" ka "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("range")]),t._v(" ch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Lease renewed: %d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘ç°æœåŠ¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DiscoverService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("etcdClient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("clientv3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serviceName "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æ‰€æœ‰æœåŠ¡å®ä¾‹")]),t._v("\n    resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" etcdClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                             fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/%s/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serviceName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                             clientv3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WithPrefix")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æå–æœåŠ¡åœ°å€")]),t._v("\n    addrs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Kvs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" kv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("range")]),t._v(" resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Kvs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        addrs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" addrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br")])]),s("h2",{attrs:{id:"é€‰æ‹©åˆé€‚çš„åè°ƒæœåŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é€‰æ‹©åˆé€‚çš„åè°ƒæœåŠ¡"}},[t._v("#")]),t._v(" é€‰æ‹©åˆé€‚çš„åè°ƒæœåŠ¡")]),t._v(" "),s("p",[t._v("é¢å¯¹ZooKeeperå’Œetcdï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼ŸğŸ¤”")]),t._v(" "),s("h3",{attrs:{id:"é€‰æ‹©zookeeperçš„åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é€‰æ‹©zookeeperçš„åœºæ™¯"}},[t._v("#")]),t._v(" é€‰æ‹©ZooKeeperçš„åœºæ™¯")]),t._v(" "),s("ul",[s("li",[t._v("ä½ å·²ç»åœ¨ä½¿ç”¨Hadoopã€Kafkaç­‰åŸºäºZooKeeperçš„ç³»ç»Ÿ")]),t._v(" "),s("li",[t._v("éœ€è¦å¤æ‚çš„æ ‘å½¢æ•°æ®æ¨¡å‹æ¥ç»„ç»‡ä½ çš„æ•°æ®")]),t._v(" "),s("li",[t._v("å¯¹æ€§èƒ½æœ‰æé«˜è¦æ±‚ï¼Œä¸”å¯ä»¥æ¥å—è¾ƒå¤æ‚çš„éƒ¨ç½²å’Œç»´æŠ¤")])]),t._v(" "),s("h3",{attrs:{id:"é€‰æ‹©etcdçš„åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é€‰æ‹©etcdçš„åœºæ™¯"}},[t._v("#")]),t._v(" é€‰æ‹©etcdçš„åœºæ™¯")]),t._v(" "),s("ul",[s("li",[t._v("ä½ æ­£åœ¨æ„å»ºäº‘åŸç”Ÿåº”ç”¨æˆ–å®¹å™¨åŒ–åº”ç”¨")]),t._v(" "),s("li",[t._v("å¸Œæœ›é€šè¿‡ç®€å•çš„HTTP APIä¸åè°ƒæœåŠ¡äº¤äº’")]),t._v(" "),s("li",[t._v("éœ€è¦æ›´å¥½çš„å¼€å‘è€…ä½“éªŒå’Œç¤¾åŒºæ”¯æŒ")]),t._v(" "),s("li",[t._v("æ­£åœ¨ä½¿ç”¨Kubernetesç”Ÿæ€ç³»ç»Ÿ")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v("æˆ‘ä¸ªäººæ›´å€¾å‘äºåœ¨æ–°çš„äº‘åŸç”Ÿé¡¹ç›®ä¸­é€‰æ‹©etcdï¼Œå®ƒçš„APIè®¾è®¡æ›´ç°ä»£åŒ–ï¼Œæ–‡æ¡£æ›´å®Œå–„ï¼Œç¤¾åŒºä¹Ÿæ›´æ´»è·ƒã€‚ä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒZooKeeperä»ç„¶æ˜¯ä¸å¯æ›¿ä»£çš„é€‰æ‹©ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"æœªæ¥å±•æœ›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å±•æœ›"}},[t._v("#")]),t._v(" æœªæ¥å±•æœ›")]),t._v(" "),s("p",[t._v("éšç€åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸æ–­å‘å±•ï¼Œåè°ƒæœåŠ¡ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å¤šåè®®æ”¯æŒ")]),t._v("ï¼šæœªæ¥çš„åè°ƒæœåŠ¡å¯èƒ½ä¼šæ”¯æŒå¤šç§ä¸€è‡´æ€§åè®®ï¼Œä»¥é€‚åº”ä¸åŒåœºæ™¯çš„éœ€æ±‚")]),t._v(" "),s("li",[s("strong",[t._v("è¾¹ç¼˜è®¡ç®—")]),t._v("ï¼šè½»é‡çº§çš„åè°ƒæœåŠ¡å°†åœ¨è¾¹ç¼˜è®¡ç®—åœºæ™¯ä¸­å‘æŒ¥æ›´å¤§ä½œç”¨")]),t._v(" "),s("li",[s("strong",[t._v("è‡ªåŠ¨åŒ–è¿ç»´")]),t._v("ï¼šAIé©±åŠ¨çš„åè°ƒæœåŠ¡å°†èƒ½å¤Ÿè‡ªåŠ¨ä¼˜åŒ–ç³»ç»Ÿé…ç½®ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½å’Œå¯é æ€§")]),t._v(" "),s("li",[s("strong",[t._v("è·¨äº‘åè°ƒ")]),t._v("ï¼šéšç€å¤šäº‘å’Œæ··åˆäº‘çš„æ™®åŠï¼Œè·¨äº‘çš„åè°ƒæœåŠ¡å°†æˆä¸ºæ–°çš„éœ€æ±‚")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v('åˆ†å¸ƒå¼åè°ƒæœåŠ¡å°±åƒæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„"ç¥ç»ç³»ç»Ÿ"ï¼Œè¿æ¥ç€å„ä¸ª"å™¨å®˜"ï¼Œè®©æ•´ä¸ªç³»ç»Ÿåè°ƒä¸€è‡´åœ°å·¥ä½œã€‚ZooKeeperå’Œetcdä½œä¸ºè¿™ä¸ªé¢†åŸŸçš„ä¸¤ä¸ªé‡è¦ä»£è¡¨ï¼Œå„æœ‰ç‰¹è‰²ï¼Œå„æœ‰ä¼˜åŠ¿ã€‚')]),t._v(" "),s("p",[t._v("é€‰æ‹©å“ªç§åè°ƒæœåŠ¡ï¼Œå–å†³äºä½ çš„å…·ä½“éœ€æ±‚å’ŒæŠ€æœ¯æ ˆã€‚ä½†æ— è®ºé€‰æ‹©å“ªç§ï¼Œç†è§£å…¶æ ¸å¿ƒåŸç†å’Œé€‚ç”¨åœºæ™¯ï¼Œéƒ½æ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®ã€‚")]),t._v(" "),s("p",[t._v("å¸Œæœ›ä»Šå¤©çš„åˆ†äº«å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼ğŸ‘‡")]),t._v(" "),s("blockquote",[s("p",[t._v('"åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒä¸åœ¨äºå•ä¸ªèŠ‚ç‚¹çš„å¼ºå¤§ï¼Œè€Œåœ¨äºèŠ‚ç‚¹ä¹‹é—´çš„åä½œä¸åè°ƒã€‚" â€”â€” Jorgen')])])])}),[],!1,null,null,null);s.default=e.exports}}]);