(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{636:function(a,s,t){"use strict";t.r(s);var n=t(15),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[a._v("#")]),a._v(" å‰è¨€")]),a._v(" "),s("p",[a._v("åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·±å…¥æ¢è®¨äº†Flinkçš„æ¶æ„åŸç†ã€APIç¼–ç¨‹æ¨¡å‹ã€çŠ¶æ€ç®¡ç†ä»¥åŠTable APIç­‰æ ¸å¿ƒæ¦‚å¿µã€‚ğŸ¤” ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çœŸæ­£è¦å°†Flinkåº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸­æ—¶ï¼Œå¦‚ä½•éƒ¨ç½²ã€ç®¡ç†å’Œç›‘æ§Flinké›†ç¾¤æˆä¸ºäº†ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘åœ¨Flinkéƒ¨ç½²ä¸è¿ç»´æ–¹é¢çš„ä¸€äº›ç»éªŒå’Œå¿ƒå¾—ã€‚")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("æç¤º")]),a._v(" "),s("p",[a._v("éƒ¨ç½²ä¸è¿ç»´æ˜¯æµå¤„ç†å¹³å°æˆåŠŸè½åœ°çš„å…³é”®ç¯èŠ‚ï¼Œä¸€ä¸ªç¨³å®šå¯é çš„Flinké›†ç¾¤èƒ½å¤Ÿç¡®ä¿æ•°æ®å¤„ç†çš„è¿ç»­æ€§å’Œå‡†ç¡®æ€§ã€‚")])]),a._v(" "),s("h2",{attrs:{id:"flinkéƒ¨ç½²æ¨¡å¼æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinkéƒ¨ç½²æ¨¡å¼æ¦‚è¿°"}},[a._v("#")]),a._v(" Flinkéƒ¨ç½²æ¨¡å¼æ¦‚è¿°")]),a._v(" "),s("p",[a._v("Flinkæ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚å’Œèµ„æºç¯å¢ƒé€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ¨¡å¼è‡³å…³é‡è¦ã€‚")]),a._v(" "),s("h3",{attrs:{id:"_1-standaloneæ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-standaloneæ¨¡å¼"}},[a._v("#")]),a._v(" 1. Standaloneæ¨¡å¼")]),a._v(" "),s("p",[a._v("è¿™æ˜¯æœ€ç®€å•çš„éƒ¨ç½²æ¨¡å¼ï¼ŒFlinkè‡ªå·±ç®¡ç†èµ„æºï¼Œä¸ä¾èµ–å…¶ä»–èµ„æºç®¡ç†ç³»ç»Ÿã€‚")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å¯åŠ¨é›†ç¾¤")]),a._v("\n./bin/start-cluster.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åœæ­¢é›†ç¾¤")]),a._v("\n./bin/stop-cluster.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[s("strong",[a._v("ä¼˜ç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("éƒ¨ç½²ç®€å•ï¼Œæ— éœ€é¢å¤–é…ç½®")]),a._v(" "),s("li",[a._v("é€‚åˆå°å‹é›†ç¾¤å’Œæµ‹è¯•ç¯å¢ƒ")])]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("èµ„æºåˆ©ç”¨ç‡ä¸é«˜")]),a._v(" "),s("li",[a._v("éš¾ä»¥å®ç°å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†")])]),a._v(" "),s("h3",{attrs:{id:"_2-yarnæ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-yarnæ¨¡å¼"}},[a._v("#")]),a._v(" 2. YARNæ¨¡å¼")]),a._v(" "),s("p",[a._v("YARNæ¨¡å¼æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­æœ€å¸¸ç”¨çš„éƒ¨ç½²æ–¹å¼ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨Hadoopç”Ÿæ€çš„èµ„æºç®¡ç†èƒ½åŠ›ã€‚")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æäº¤ä½œä¸šåˆ°YARN")]),a._v("\n./bin/flink run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" yarn-cluster "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" examples/streaming/WordCount.jar\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æŸ¥çœ‹YARNä¸Šçš„Flinkåº”ç”¨")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" application "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-list")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-appTypes")]),a._v(" Flink\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[s("strong",[a._v("ä¼˜ç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("ä¸Hadoopç”Ÿæ€æ— ç¼é›†æˆ")]),a._v(" "),s("li",[a._v("èµ„æºåˆ©ç”¨ç‡é«˜")]),a._v(" "),s("li",[a._v("æ”¯æŒåŠ¨æ€èµ„æºåˆ†é…")])]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("é…ç½®ç›¸å¯¹å¤æ‚")]),a._v(" "),s("li",[a._v("ä¾èµ–YARNç¯å¢ƒ")])]),a._v(" "),s("h3",{attrs:{id:"_3-kubernetesæ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-kubernetesæ¨¡å¼"}},[a._v("#")]),a._v(" 3. Kubernetesæ¨¡å¼")]),a._v(" "),s("p",[a._v("éšç€å®¹å™¨åŒ–æŠ€æœ¯çš„æ™®åŠï¼ŒKubernetesæ¨¡å¼è¶Šæ¥è¶Šå—åˆ°å…³æ³¨ã€‚")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æäº¤ä½œä¸šåˆ°K8s")]),a._v("\n./bin/flink run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" kubernetes-session "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" my-flink-cluster examples/streaming/WordCount.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("strong",[a._v("ä¼˜ç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("å¼¹æ€§ä¼¸ç¼©")]),a._v(" "),s("li",[a._v("é«˜å¯ç”¨æ€§")]),a._v(" "),s("li",[a._v("ä¸äº‘åŸç”Ÿç”Ÿæ€é›†æˆ")])]),a._v(" "),s("p",[s("strong",[a._v("ç¼ºç‚¹")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("éœ€è¦KubernetesçŸ¥è¯†")]),a._v(" "),s("li",[a._v("è¿ç»´å¤æ‚åº¦è¾ƒé«˜")])]),a._v(" "),s("h2",{attrs:{id:"flinké›†ç¾¤é…ç½®ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinké›†ç¾¤é…ç½®ä¼˜åŒ–"}},[a._v("#")]),a._v(" Flinké›†ç¾¤é…ç½®ä¼˜åŒ–")]),a._v(" "),s("h3",{attrs:{id:"èµ„æºé…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#èµ„æºé…ç½®"}},[a._v("#")]),a._v(" èµ„æºé…ç½®")]),a._v(" "),s("p",[a._v("åˆç†çš„èµ„æºé…ç½®æ˜¯Flinké›†ç¾¤ç¨³å®šè¿è¡Œçš„åŸºç¡€ã€‚")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("é…ç½®é¡¹")]),a._v(" "),s("th",[a._v("Standalone")]),a._v(" "),s("th",[a._v("YARN")]),a._v(" "),s("th",[a._v("Kubernetes")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("TaskManageræ•°é‡")]),a._v(" "),s("td",[s("code",[a._v("taskmanager.numberOfTaskSlots")])]),a._v(" "),s("td",[s("code",[a._v("yarn.applicationMaster.vcores")])]),a._v(" "),s("td",[s("code",[a._v("flink.taskmanager.replicas")])])]),a._v(" "),s("tr",[s("td",[a._v("å†…å­˜åˆ†é…")]),a._v(" "),s("td",[s("code",[a._v("taskmanager.memory.process.size")])]),a._v(" "),s("td",[s("code",[a._v("yarn.containerMemoryMB")])]),a._v(" "),s("td",[s("code",[a._v("flink.taskmanager.memory.mb")])])]),a._v(" "),s("tr",[s("td",[a._v("å¹¶è¡Œåº¦")]),a._v(" "),s("td",[s("code",[a._v("parallelism.default")])]),a._v(" "),s("td",[s("code",[a._v("yarn.applicationMaster.vcores")])]),a._v(" "),s("td",[s("code",[a._v("flink.taskmanager.cpu")])])])])]),a._v(" "),s("h3",{attrs:{id:"é«˜å¯ç”¨é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é«˜å¯ç”¨é…ç½®"}},[a._v("#")]),a._v(" é«˜å¯ç”¨é…ç½®")]),a._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[a._v("THEOREM")]),s("p",[a._v("é«˜å¯ç”¨æ€§æ˜¯ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬è¦æ±‚ï¼ŒFlinké€šè¿‡å¤šç§æœºåˆ¶ç¡®ä¿é›†ç¾¤çš„å¯é æ€§ã€‚")])]),s("ol",[s("li",[s("strong",[a._v("ZooKeeperé…ç½®")])])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# flink-conf.yaml")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("high-availability")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zookeeper\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("high-availability.storageDir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" hdfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("///flink/ha/\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("high-availability.zookeeper.quorum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zk1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("zk2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("zk3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("high-availability.zookeeper.port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("high-availability.zookeeper.cluster-id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /flink"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("cluster\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[a._v("JobManageré«˜å¯ç”¨")])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Standaloneæ¨¡å¼ä¸‹çš„JobManageré«˜å¯ç”¨")]),a._v("\n./bin/jobmanager.sh start "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--configDirectory")]),a._v(" ./config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zookeeperNamespace")]),a._v(" /flink-cluster\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"flinkä½œä¸šç›‘æ§ä¸ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinkä½œä¸šç›‘æ§ä¸ç®¡ç†"}},[a._v("#")]),a._v(" Flinkä½œä¸šç›‘æ§ä¸ç®¡ç†")]),a._v(" "),s("h3",{attrs:{id:"_1-web-uiç›‘æ§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-web-uiç›‘æ§"}},[a._v("#")]),a._v(" 1. Web UIç›‘æ§")]),a._v(" "),s("p",[a._v("Flinkæä¾›äº†å¼ºå¤§çš„Web UIç•Œé¢ï¼Œç”¨äºç›‘æ§ä½œä¸šçŠ¶æ€å’Œèµ„æºä½¿ç”¨æƒ…å†µã€‚")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("ä½œä¸šç›‘æ§")]),a._v("ï¼šæŸ¥çœ‹ä½œä¸šçš„è¿è¡ŒçŠ¶æ€ã€ååé‡ã€å»¶è¿Ÿç­‰æŒ‡æ ‡")]),a._v(" "),s("li",[s("strong",[a._v("èµ„æºç›‘æ§")]),a._v("ï¼šè§‚å¯ŸTaskManagerå’ŒJobManagerçš„èµ„æºä½¿ç”¨æƒ…å†µ")]),a._v(" "),s("li",[s("strong",[a._v("æ—¥å¿—æŸ¥çœ‹")]),a._v("ï¼šå®æ—¶æŸ¥çœ‹ä½œä¸šæ—¥å¿—")])]),a._v(" "),s("h3",{attrs:{id:"_2-rest-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-rest-api"}},[a._v("#")]),a._v(" 2. REST API")]),a._v(" "),s("p",[a._v("Flinkæä¾›äº†REST APIï¼Œæ–¹ä¾¿è¿›è¡Œè‡ªåŠ¨åŒ–è¿ç»´ã€‚")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# è·å–ä½œä¸šåˆ—è¡¨")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" http://localhost:8081/jobs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åœæ­¢ä½œä¸š")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v(" POST http://localhost:8081/jobs/"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("job-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/stop\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"_3-æ—¥å¿—ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ—¥å¿—ç®¡ç†"}},[a._v("#")]),a._v(" 3. æ—¥å¿—ç®¡ç†")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("æç¤º")]),a._v(" "),s("p",[a._v("è‰¯å¥½çš„æ—¥å¿—ç®¡ç†æ˜¯é—®é¢˜æ’æŸ¥çš„å…³é”®ï¼Œå»ºè®®é…ç½®æ—¥å¿—èšåˆå’Œé›†ä¸­å­˜å‚¨ã€‚")])]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# log4j.properties")]),a._v("\nlog4j.appender.file=org.apache.log4j.RollingFileAppender\nlog4j.appender.file.File=$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("log.file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\nlog4j.appender.file.MaxFileSize=100MB\nlog4j.appender.file.MaxBackupIndex=10\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=%d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("yyyy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("MM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("dd HH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("mm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("ss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("SSS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("5p %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("60c %x "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" %m%n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h2",{attrs:{id:"flinkä½œä¸šè°ƒä¼˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinkä½œä¸šè°ƒä¼˜"}},[a._v("#")]),a._v(" Flinkä½œä¸šè°ƒä¼˜")]),a._v(" "),s("h3",{attrs:{id:"_1-å¹¶è¡Œåº¦è°ƒæ•´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¹¶è¡Œåº¦è°ƒæ•´"}},[a._v("#")]),a._v(" 1. å¹¶è¡Œåº¦è°ƒæ•´")]),a._v(" "),s("p",[a._v("åˆç†çš„å¹¶è¡Œåº¦è®¾ç½®èƒ½å¤Ÿå……åˆ†åˆ©ç”¨é›†ç¾¤èµ„æºã€‚")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// è®¾ç½®ä½œä¸šçº§åˆ«çš„å¹¶è¡Œåº¦")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StreamExecutionEnvironment")]),a._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setParallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// è®¾ç½®ç®—å­çº§åˆ«çš„å¹¶è¡Œåº¦")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DataStream")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("socketTextStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9999")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setParallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h3",{attrs:{id:"_2-çŠ¶æ€åç«¯é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-çŠ¶æ€åç«¯é…ç½®"}},[a._v("#")]),a._v(" 2. çŠ¶æ€åç«¯é…ç½®")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# flink-conf.yaml")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("state.backend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" rocksdb\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("state.backend.rocksdb.localdir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /mnt/flink/rocksdb\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("state.checkpoints.dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" hdfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("///flink/checkpoints\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"_3-æ£€æŸ¥ç‚¹é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ£€æŸ¥ç‚¹é…ç½®"}},[a._v("#")]),a._v(" 3. æ£€æŸ¥ç‚¹é…ç½®")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# flink-conf.yaml")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("execution.checkpointing.interval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1min\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("execution.checkpointing.mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" EXACTLY_ONCE\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("execution.checkpointing.timeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1h\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("execution.checkpointing.min-pause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1s\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("execution.checkpointing.max-concurrent-checkpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h2",{attrs:{id:"flinkå¸¸è§é—®é¢˜æ’æŸ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinkå¸¸è§é—®é¢˜æ’æŸ¥"}},[a._v("#")]),a._v(" Flinkå¸¸è§é—®é¢˜æ’æŸ¥")]),a._v(" "),s("h3",{attrs:{id:"_1-ä½œä¸šå¯åŠ¨å¤±è´¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä½œä¸šå¯åŠ¨å¤±è´¥"}},[a._v("#")]),a._v(" 1. ä½œä¸šå¯åŠ¨å¤±è´¥")]),a._v(" "),s("p",[s("strong",[a._v("å¯èƒ½åŸå› ")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("èµ„æºä¸è¶³")]),a._v(" "),s("li",[a._v("é…ç½®é”™è¯¯")]),a._v(" "),s("li",[a._v("ä¾èµ–é—®é¢˜")])]),a._v(" "),s("p",[s("strong",[a._v("æ’æŸ¥æ­¥éª¤")]),a._v("ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("æ£€æŸ¥æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯")]),a._v(" "),s("li",[a._v("éªŒè¯èµ„æºé…ç½®æ˜¯å¦åˆç†")]),a._v(" "),s("li",[a._v("ç¡®è®¤ä¾èµ–æ˜¯å¦æ­£ç¡®")])]),a._v(" "),s("h3",{attrs:{id:"_2-ä½œä¸šæ€§èƒ½é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä½œä¸šæ€§èƒ½é—®é¢˜"}},[a._v("#")]),a._v(" 2. ä½œä¸šæ€§èƒ½é—®é¢˜")]),a._v(" "),s("p",[s("strong",[a._v("å¯èƒ½åŸå› ")]),a._v("ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("å¹¶è¡Œåº¦è®¾ç½®ä¸åˆç†")]),a._v(" "),s("li",[a._v("çŠ¶æ€è¿‡å¤§")]),a._v(" "),s("li",[a._v("ç½‘ç»œç“¶é¢ˆ")])]),a._v(" "),s("p",[s("strong",[a._v("æ’æŸ¥æ­¥éª¤")]),a._v("ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ")]),a._v(" "),s("li",[a._v("åˆ†æä½œä¸šæ‰§è¡Œè®¡åˆ’")]),a._v(" "),s("li",[a._v("æ£€æŸ¥æ•°æ®å€¾æ–œæƒ…å†µ")])]),a._v(" "),s("h3",{attrs:{id:"_3-ä½œä¸šå¤±è´¥æ¢å¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½œä¸šå¤±è´¥æ¢å¤"}},[a._v("#")]),a._v(" 3. ä½œä¸šå¤±è´¥æ¢å¤")]),a._v(" "),s("p",[s("strong",[a._v("å¤„ç†ç­–ç•¥")]),a._v("ï¼š")]),a._v(" "),s("ol",[s("li",[a._v("è®¾ç½®åˆç†çš„æ£€æŸ¥ç‚¹é—´éš”")]),a._v(" "),s("li",[a._v("é…ç½®é‡å¯ç­–ç•¥")]),a._v(" "),s("li",[a._v("å®ç°è‡ªå®šä¹‰æ¢å¤é€»è¾‘")])]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// é…ç½®é‡å¯ç­–ç•¥")]),a._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setRestartStrategy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RestartStrategies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("fixedDelayRestart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// é‡è¯•æ¬¡æ•°")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("seconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// é‡è¯•é—´éš”")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[a._v("#")]),a._v(" ç»“è¯­")]),a._v(" "),s("p",[a._v("Flinkçš„éƒ¨ç½²ä¸è¿ç»´æ˜¯ä¸€ä¸ªå¤æ‚ä½†è‡³å…³é‡è¦çš„ç¯èŠ‚ï¼Œå®ƒç›´æ¥å…³ç³»åˆ°æµå¤„ç†å¹³å°çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚é€šè¿‡åˆç†çš„éƒ¨ç½²æ¨¡å¼é€‰æ‹©ã€é›†ç¾¤é…ç½®ä¼˜åŒ–ã€ä½œä¸šç›‘æ§ç®¡ç†å’Œé—®é¢˜æ’æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªé«˜æ•ˆå¯é çš„Flinkæµå¤„ç†å¹³å°ã€‚")]),a._v(" "),s("blockquote",[s("p",[a._v("éƒ¨ç½²ä¸è¿ç»´ä¸æ˜¯ä¸€è¹´è€Œå°±çš„å·¥ä½œï¼Œå®ƒéœ€è¦æŒç»­çš„ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œåªæœ‰ä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œæ‰èƒ½æŒæ¡Flinkè¿ç»´çš„ç²¾é«“ã€‚")])]),a._v(" "),s("p",[a._v("å¸Œæœ›ä»Šå¤©çš„åˆ†äº«å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼ğŸ™‹â€â™‚ï¸")]),a._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[a._v('"è¿ç»´çš„æœ¬è´¨æ˜¯é¢„é˜²é—®é¢˜ï¼Œè€Œä¸æ˜¯è§£å†³é—®é¢˜"')])])])}),[],!1,null,null,null);s.default=e.exports}}]);