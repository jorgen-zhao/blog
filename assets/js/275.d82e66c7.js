(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{626:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨æµå¤„ç†çš„ä¸–ç•Œé‡Œï¼Œ"),s("strong",[t._v("çŠ¶æ€ç®¡ç†")]),t._v("ä¸"),s("strong",[t._v("å®¹é”™æœºåˆ¶")]),t._v("æ˜¯æ„å»ºå¯é åº”ç”¨çš„æ ¸å¿ƒè¦ç´ ã€‚ğŸ— å½“æˆ‘ä»¬è°ˆè®º Flink æ—¶ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒä»¬ç›´æ¥å†³å®šäº†æˆ‘ä»¬çš„åº”ç”¨èƒ½å¦åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œã€‚")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v('"æ²¡æœ‰çŠ¶æ€ç®¡ç†çš„æµå¤„ç†å°±åƒæ²¡æœ‰è®°å¿†çš„æ€è€ƒè€…ï¼Œå¯ä»¥å¤„ç†å½“å‰äº‹ä»¶ï¼Œä½†æ— æ³•ä»å†å²ä¸­å­¦ä¹ ã€‚"')])]),t._v(" "),s("p",[t._v("åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¢è®¨äº† Flink çš„æ¶æ„åŸç†å’ŒåŸºæœ¬é…ç½®ï¼Œä½†çŠ¶æ€ç®¡ç†ä¸å®¹é”™æœºåˆ¶è¿™ä¸€å…³é”®ä¸»é¢˜å°šæœªæ·±å…¥è®¨è®ºã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€ Flink çŠ¶æ€ç®¡ç†çš„ç¥ç§˜é¢çº±ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ä¿éšœæˆ‘ä»¬çš„æµå¤„ç†åº”ç”¨åœ¨æ•…éšœå‘ç”Ÿæ—¶ä¾ç„¶å¯é çš„ã€‚")]),t._v(" "),s("h2",{attrs:{id:"flinkçŠ¶æ€ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flinkçŠ¶æ€ç±»å‹"}},[t._v("#")]),t._v(" FlinkçŠ¶æ€ç±»å‹")]),t._v(" "),s("p",[t._v("Flink æä¾›äº†å¤šç§çŠ¶æ€ç±»å‹ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚äº†è§£è¿™äº›çŠ¶æ€ç±»å‹æ˜¯æ„å»ºé«˜æ•ˆæµå¤„ç†åº”ç”¨çš„ç¬¬ä¸€æ­¥ã€‚")]),t._v(" "),s("h3",{attrs:{id:"keyed-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keyed-state"}},[t._v("#")]),t._v(" Keyed State")]),t._v(" "),s("p",[t._v("Keyed State æ˜¯ä¸ç‰¹å®š Key ç»‘å®šçš„çŠ¶æ€ï¼Œåªèƒ½åœ¨ Keyed Stream ä¸Šä½¿ç”¨ã€‚å®ƒæä¾›äº†ä»¥ä¸‹å‡ ç§çŠ¶æ€ç±»å‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ValueState")]),t._v("ï¼šå­˜å‚¨å•ä¸ªå€¼çš„çŠ¶æ€")]),t._v(" "),s("li",[s("strong",[t._v("ListState")]),t._v("ï¼šå­˜å‚¨ä¸€ä¸ªåˆ—è¡¨çš„çŠ¶æ€")]),t._v(" "),s("li",[s("strong",[t._v("ReducingState")]),t._v("ï¼šå­˜å‚¨ä¸€ä¸ªå€¼ï¼Œé€šè¿‡ç”¨æˆ·æä¾›çš„ ReduceFunction è¿›è¡Œèšåˆ")]),t._v(" "),s("li",[s("strong",[t._v("AggregatingState")]),t._v("ï¼šå­˜å‚¨ä¸€ä¸ªå€¼ï¼Œé€šè¿‡ç”¨æˆ·æä¾›çš„ AggregateFunction è¿›è¡Œèšåˆ")]),t._v(" "),s("li",[s("strong",[t._v("MapState")]),t._v("ï¼šå­˜å‚¨ä¸€ä¸ªé”®å€¼å¯¹æ˜ å°„çš„çŠ¶æ€")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ValueState ç¤ºä¾‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueState")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntimeContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueStateDescriptor")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myState"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–çŠ¶æ€")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" currentState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°çŠ¶æ€")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"newValue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"operator-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#operator-state"}},[t._v("#")]),t._v(" Operator State")]),t._v(" "),s("p",[t._v("Operator State ä¹Ÿç§°ä¸ºéé”®æ§çŠ¶æ€ï¼Œå®ƒä¸ç‰¹å®š Operator å®ä¾‹ç»‘å®šï¼Œä¸ä¾èµ–äº Keyã€‚å®ƒä¸»è¦ç”¨äºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ‰¹å¤„ç†æºï¼ˆå¦‚è¯»å–æ–‡ä»¶ï¼‰")]),t._v(" "),s("li",[t._v("è¿­ä»£çŠ¶æ€")]),t._v(" "),s("li",[t._v("è®°å½•åç§»é‡ï¼ˆå¦‚ Kafka æ¶ˆè´¹è€…ï¼‰")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ListState ç¤ºä¾‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListState")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" listState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntimeContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getListState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListStateDescriptor")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myListState"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ·»åŠ å…ƒç´ åˆ°çŠ¶æ€")]),t._v("\nlistState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"element1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–çŠ¶æ€è¿­ä»£å™¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" elements "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" listState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"çŠ¶æ€åç«¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€åç«¯"}},[t._v("#")]),t._v(" çŠ¶æ€åç«¯")]),t._v(" "),s("p",[t._v("Flink çš„çŠ¶æ€åç«¯è´Ÿè´£å­˜å‚¨å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚Flink æä¾›äº†ä¸‰ç§çŠ¶æ€åç«¯ï¼š")]),t._v(" "),s("h3",{attrs:{id:"memorystatebackend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#memorystatebackend"}},[t._v("#")]),t._v(" MemoryStateBackend")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼šçŠ¶æ€å­˜å‚¨åœ¨ TaskManager çš„å†…å­˜ä¸­")]),t._v(" "),s("li",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šçŠ¶æ€è¾ƒå°ã€ä½å»¶è¿Ÿè¦æ±‚çš„ä½œä¸š")]),t._v(" "),s("li",[s("strong",[t._v("é™åˆ¶")]),t._v("ï¼šçŠ¶æ€å¤§å°å—é™ï¼Œé‡å¯åçŠ¶æ€ä¸¢å¤±")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½® MemoryStateBackend")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"fsstatebackend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fsstatebackend"}},[t._v("#")]),t._v(" FsStateBackend")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼šçŠ¶æ€å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼ˆå¦‚ HDFSã€S3ï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šéœ€è¦æŒä¹…åŒ–çŠ¶æ€ã€çŠ¶æ€è¾ƒå¤§çš„ä½œä¸š")]),t._v(" "),s("li",[s("strong",[t._v("ä¼˜åŠ¿")]),t._v("ï¼šä½œä¸šé‡å¯åçŠ¶æ€ä¸ä¸¢å¤±")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½® FsStateBackend")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FsStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hdfs://namenode:8021/flink/checkpoints"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"rocksdbstatebackend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rocksdbstatebackend"}},[t._v("#")]),t._v(" RocksDBStateBackend")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼šä½¿ç”¨ RocksDB ä½œä¸ºæœ¬åœ°çŠ¶æ€å­˜å‚¨ï¼Œå®šæœŸå°†æ£€æŸ¥ç‚¹ä¿å­˜åˆ°è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ")]),t._v(" "),s("li",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šè¶…å¤§è§„æ¨¡çŠ¶æ€ã€éœ€è¦é«˜ååé‡çš„ä½œä¸š")]),t._v(" "),s("li",[s("strong",[t._v("ä¼˜åŠ¿")]),t._v("ï¼šçŠ¶æ€å®¹é‡å¤§ï¼Œæ€§èƒ½å¥½")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½® RocksDBStateBackend")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RocksDBStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hdfs://namenode:8021/flink/checkpoints"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"checkpointæœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checkpointæœºåˆ¶"}},[t._v("#")]),t._v(" Checkpointæœºåˆ¶")]),t._v(" "),s("p",[t._v("Flink çš„ Checkpoint æœºåˆ¶æ˜¯å®ç°å®¹é”™çš„æ ¸å¿ƒã€‚å®ƒé€šè¿‡å®šæœŸä¿å­˜åº”ç”¨çŠ¶æ€çš„ä¸€è‡´æ€§å¿«ç…§ï¼Œä½¿åº”ç”¨åœ¨æ•…éšœå‘ç”Ÿåèƒ½å¤Ÿæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚")]),t._v(" "),s("h3",{attrs:{id:"checkpointåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checkpointåŸç†"}},[t._v("#")]),t._v(" CheckpointåŸç†")]),t._v(" "),s("p",[t._v("Flink çš„ Checkpoint æœºåˆ¶åŸºäº Chandy-Lamport ç®—æ³•å®ç°ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Barrier æ³¨å…¥")]),t._v("ï¼šSource æ³¨å…¥ Barrierï¼Œéšæ•°æ®æµå‘ä¸‹ä¼ æ’­")]),t._v(" "),s("li",[s("strong",[t._v("Barrier å¯¹é½")]),t._v("ï¼šæ‰€æœ‰è¾“å…¥æµéƒ½æ”¶åˆ° Barrier åï¼ŒOperator æ‰ä¼šå¤„ç† Checkpoint")]),t._v(" "),s("li",[s("strong",[t._v("çŠ¶æ€å¿«ç…§")]),t._v("ï¼šOperator å°†çŠ¶æ€å†™å…¥æŒä¹…åŒ–å­˜å‚¨")]),t._v(" "),s("li",[s("strong",[t._v("ç¡®è®¤")]),t._v("ï¼šå®Œæˆå¿«ç…§åå‘ JobManager å‘é€ç¡®è®¤")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨ Checkpoint")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableCheckpointing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯5ç§’æ‰§è¡Œä¸€æ¬¡Checkpoint")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXACTLY_ONCE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMinPauseBetweenCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCheckpointTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxConcurrentCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableExternalizedCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckpointConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ExternalizedCheckpointCleanup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RETAIN_ON_CANCELLATION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"checkpointé…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checkpointé…ç½®"}},[t._v("#")]),t._v(" Checkpointé…ç½®")]),t._v(" "),s("p",[t._v("Flink æä¾›äº†ä¸°å¯Œçš„ Checkpoint é…ç½®é€‰é¡¹ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("checkpointInterval")]),t._v("ï¼šCheckpoint æ‰§è¡Œé—´éš”")]),t._v(" "),s("li",[s("strong",[t._v("checkpointMode")]),t._v("ï¼šç²¾ç¡®ä¸€æ¬¡ï¼ˆEXACTLY_ONCEï¼‰æˆ–è‡³å°‘ä¸€æ¬¡ï¼ˆAT_LEAST_ONCEï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("minPauseBetweenCheckpoints")]),t._v("ï¼šä¸¤æ¬¡ Checkpoint ä¹‹é—´çš„æœ€å°é—´éš”")]),t._v(" "),s("li",[s("strong",[t._v("checkpointTimeout")]),t._v("ï¼šCheckpoint è¶…æ—¶æ—¶é—´")]),t._v(" "),s("li",[s("strong",[t._v("maxConcurrentCheckpoints")]),t._v("ï¼šæœ€å¤§å¹¶å‘ Checkpoint æ•°é‡")]),t._v(" "),s("li",[s("strong",[t._v("externalizedCheckpoints")]),t._v("ï¼šå¤–éƒ¨ Checkpoint ç®¡ç†")])]),t._v(" "),s("h2",{attrs:{id:"savepointæœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#savepointæœºåˆ¶"}},[t._v("#")]),t._v(" Savepointæœºåˆ¶")]),t._v(" "),s("p",[t._v("Savepoint æ˜¯ Flink æä¾›çš„ä¸€ç§æ‰‹åŠ¨è§¦å‘çš„ã€å¯ç§»æ¤çš„ Checkpointã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸ä¸¢å¤±çŠ¶æ€çš„æƒ…å†µä¸‹æ›´æ–°æˆ–è¿ç§»åº”ç”¨ã€‚")]),t._v(" "),s("h3",{attrs:{id:"åˆ›å»ºsavepoint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºsavepoint"}},[t._v("#")]),t._v(" åˆ›å»ºSavepoint")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä½¿ç”¨ Flink CLI åˆ›å»º Savepoint")]),t._v("\n./bin/flink savepoint "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("jobId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("savepointPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä½¿ç”¨ Flink REST API åˆ›å»º Savepoint")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" POST http://localhost:8081/jobs/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("jobId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/savepoints "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/json"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"target-directory": "/savepoints"}\'')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"ä»savepointæ¢å¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»savepointæ¢å¤"}},[t._v("#")]),t._v(" ä»Savepointæ¢å¤")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä» Savepoint å¯åŠ¨ä½œä¸š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FsStateBackend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hdfs://namenode:8021/flink/savepoints"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restoreSavepoint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/savepoint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"savepointç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#savepointç®¡ç†"}},[t._v("#")]),t._v(" Savepointç®¡ç†")]),t._v(" "),s("p",[t._v("Savepoint çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åˆ›å»º")]),t._v("ï¼šæ‰‹åŠ¨è§¦å‘")]),t._v(" "),s("li",[s("strong",[t._v("æ¢å¤")]),t._v("ï¼šç”¨äºä½œä¸šé‡å¯æˆ–å‡çº§")]),t._v(" "),s("li",[s("strong",[t._v("åˆ é™¤")]),t._v("ï¼šä¸å†éœ€è¦æ—¶æ¸…ç†ï¼Œé¿å…å ç”¨å­˜å‚¨ç©ºé—´")])]),t._v(" "),s("h2",{attrs:{id:"å®¹é”™ç­–ç•¥ä¸æœ€ä½³å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®¹é”™ç­–ç•¥ä¸æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" å®¹é”™ç­–ç•¥ä¸æœ€ä½³å®è·µ")]),t._v(" "),s("h3",{attrs:{id:"å®¹é”™ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®¹é”™ç­–ç•¥"}},[t._v("#")]),t._v(" å®¹é”™ç­–ç•¥")]),t._v(" "),s("p",[t._v("Flink æä¾›äº†å¤šç§å®¹é”™ç­–ç•¥ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è‡ªåŠ¨é‡å¯")]),t._v("ï¼šä½œä¸šå¤±è´¥æ—¶è‡ªåŠ¨é‡å¯")]),t._v(" "),s("li",[s("strong",[t._v("å›ºå®šå»¶è¿Ÿé‡å¯")]),t._v("ï¼šæœ€å¤šé‡å¯æŒ‡å®šæ¬¡æ•°")]),t._v(" "),s("li",[s("strong",[t._v("å¤±è´¥ç‡é‡å¯")]),t._v("ï¼šåŸºäºå¤±è´¥ç‡åŠ¨æ€è°ƒæ•´é‡å¯ç­–ç•¥")]),t._v(" "),s("li",[s("strong",[t._v("æ— é‡å¯")]),t._v("ï¼šä½œä¸šå¤±è´¥æ—¶ä¸è‡ªåŠ¨é‡å¯")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é‡å¯ç­–ç•¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRestartStrategy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestartStrategies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fixedDelayRestart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡è¯•æ¬¡æ•°")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡è¯•é—´éš”")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"æœ€ä½³å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" æœ€ä½³å®è·µ")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åˆç†é€‰æ‹©çŠ¶æ€åç«¯")]),t._v("ï¼šæ ¹æ®çŠ¶æ€å¤§å°å’Œæ€§èƒ½è¦æ±‚é€‰æ‹©åˆé€‚çš„çŠ¶æ€åç«¯")]),t._v(" "),s("li",[s("strong",[t._v("è®¾ç½®åˆç†çš„ Checkpoint é—´éš”")]),t._v("ï¼šå¹³è¡¡æ€§èƒ½å’Œæ¢å¤æ—¶é—´")]),t._v(" "),s("li",[s("strong",[t._v("ç›‘æ§ Checkpoint å¤§å°å’Œè€—æ—¶")]),t._v("ï¼šåŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½é—®é¢˜")]),t._v(" "),s("li",[s("strong",[t._v("å®šæœŸåˆ›å»º Savepoint")]),t._v("ï¼šç‰¹åˆ«æ˜¯åœ¨éƒ¨ç½²æ–°ç‰ˆæœ¬å‰")]),t._v(" "),s("li",[s("strong",[t._v("å¤„ç†åå‹é—®é¢˜")]),t._v("ï¼šé¿å… Checkpoint å› åå‹è€Œå¤±è´¥")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v("çŠ¶æ€ç®¡ç†ä¸å®¹é”™æœºåˆ¶æ˜¯ Flink æµå¤„ç†åº”ç”¨çš„åŸºçŸ³ã€‚ğŸ¤” æ²¡æœ‰è‰¯å¥½çš„çŠ¶æ€ç®¡ç†ï¼Œæˆ‘ä»¬çš„æµå¤„ç†åº”ç”¨å°†æ— æ³•å¤„ç†å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼›æ²¡æœ‰å¼ºå¤§çš„å®¹é”™æœºåˆ¶ï¼Œæˆ‘ä»¬çš„åº”ç”¨å°†åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ä¸¾æ­¥ç»´è‰°ã€‚")]),t._v(" "),s("p",[t._v("é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬äº†è§£äº† Flink çš„çŠ¶æ€ç±»å‹ã€çŠ¶æ€åç«¯ã€Checkpoint å’Œ Savepoint æœºåˆ¶ï¼Œä»¥åŠå¦‚ä½•é…ç½®å®¹é”™ç­–ç•¥ã€‚è¿™äº›çŸ¥è¯†å°†å¸®åŠ©æˆ‘ä»¬åœ¨æ„å»ºæµå¤„ç†åº”ç”¨æ—¶ï¼Œæ›´åŠ è‡ªä¿¡åœ°é¢å¯¹å„ç§æŒ‘æˆ˜ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v('"åœ¨æµå¤„ç†çš„ä¸–ç•Œé‡Œï¼ŒçŠ¶æ€ä¸æ˜¯è´Ÿæ‹…ï¼Œè€Œæ˜¯è´¢å¯Œã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿä»å†å²ä¸­å­¦ä¹ ï¼Œä»è€Œåšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ã€‚"')])]),t._v(" "),s("p",[t._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Flink çš„çŠ¶æ€ç®¡ç†ä¸å®¹é”™æœºåˆ¶ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ğŸ‘‹")])])}),[],!1,null,null,null);s.default=e.exports}}]);