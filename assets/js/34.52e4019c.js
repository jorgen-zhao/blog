(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{381:function(s,_,t){"use strict";t.r(_);var v=t(14),a=Object(v.a)({},(function(){var s=this,_=s._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[_("blockquote",[_("p",[s._v("曾经的表格，数据如风；\n变更无迹，查找成空。\n现今的系统，日志加持；\n模块清晰，管理轻松。")])]),s._v(" "),_("h2",{attrs:{id:"🤖-背景介绍"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🤖-背景介绍"}},[s._v("#")]),s._v(" 🤖 背景介绍")]),s._v(" "),_("p",[s._v("在机器人硬件设计上，模块化已经是标配了。这样可以让机器人具备更强的适应性，随时更换或升级不同的功能部件。")]),s._v(" "),_("p",[s._v("想象一下：你手头有一堆机器人，硬件设计得可漂亮了，全是模块化拼接，像搭乐高似的，通信模块、电源模块、传感器模块……听起来是不是很酷？")]),s._v(" "),_("p",[_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jorgen-zhao/picGo/blog/robot.jpg",alt:"ironman"}})]),s._v(" "),_("p",[s._v("但在管理层面，一直以来都是个麻烦事。")]),s._v(" "),_("p",[s._v("之前，我们团队主要通过 "),_("strong",[s._v("飞书表格")]),s._v(" 记录机器人使用的模块，比如某个机器人换了新的通信模块，大家就在表格里手动更新。但问题来了：")]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("无法追溯")]),s._v(" 🔍：换过几次？用过哪些版本？全靠翻表格，难查！")]),s._v(" "),_("li",[_("strong",[s._v("多人编辑，易出错")]),s._v(" 📝：手误或者遗漏，导致数据不准确。")]),s._v(" "),_("li",[_("strong",[s._v("管理效率低")]),s._v(" 🕑：想查询某个机器人当前的模块状态？要翻很多历史记录。")])]),s._v(" "),_("p",[s._v("于是，我们决定开发一个后台管理系统来解决这个问题，确保机器人模块信息 "),_("strong",[s._v("实时可查")]),s._v("，"),_("strong",[s._v("可追溯")]),s._v("，"),_("strong",[s._v("可管理")]),s._v("。")]),s._v(" "),_("hr"),s._v(" "),_("h2",{attrs:{id:"🛠️-方案构思"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🛠️-方案构思"}},[s._v("#")]),s._v(" 🛠️ 方案构思")]),s._v(" "),_("p",[s._v("我们的目标很明确：")]),s._v(" "),_("ol",[_("li",[_("strong",[s._v("实时查看")]),s._v(" 机器人当前使用的模块。")]),s._v(" "),_("li",[_("strong",[s._v("追踪模块更换历史")]),s._v("，做到可回溯。")]),s._v(" "),_("li",[_("strong",[s._v("模块管理")]),s._v("，支持更细粒度的模块记录，而不仅仅是完整模块。")]),s._v(" "),_("li",[_("strong",[s._v("全局设计")]),s._v("，考虑未来扩展性，避免后期改动成本过高。")])]),s._v(" "),_("h3",{attrs:{id:"🏗️-最初的构思"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🏗️-最初的构思"}},[s._v("#")]),s._v(" 🏗️ 最初的构思")]),s._v(" "),_("p",[s._v("最早，我们想直接 "),_("strong",[s._v("关联机器人和模块表")]),s._v("，在数据库里记录：")]),s._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[s._v("Robot A -> 通信模块V1\nRobot A -> 运动控制模块V2\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("p",[s._v("但很快发现这个设计 "),_("strong",[s._v("太简单")]),s._v("，没法满足需求，比如：")]),s._v(" "),_("ul",[_("li",[_("strong",[s._v("模块有层级关系")]),s._v("（比如通信模块里还有子模块）。")]),s._v(" "),_("li",[_("strong",[s._v("无法追踪模块变化历史")]),s._v("。")]),s._v(" "),_("li",[_("strong",[s._v("未来可能有多个机器人共享某些模块")]),s._v("。")])]),s._v(" "),_("h3",{attrs:{id:"🚀-迭代优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🚀-迭代优化"}},[s._v("#")]),s._v(" 🚀 迭代优化")]),s._v(" "),_("p",[s._v("于是，我们调整了设计，采用了 "),_("strong",[s._v("三层结构")]),s._v("：")]),s._v(" "),_("ol",[_("li",[_("strong",[s._v("机器人表（robots）")]),s._v("：存储机器人基本信息。")]),s._v(" "),_("li",[_("strong",[s._v("模块表（modules）")]),s._v("：记录所有模块，支持子模块。")]),s._v(" "),_("li",[_("strong",[s._v("机器人-模块关系表（robot_module_log）")]),s._v("：\n"),_("ul",[_("li",[s._v("记录机器人和模块的绑定关系。")]),s._v(" "),_("li",[s._v("记录变更时间，实现可追溯。")])])])]),s._v(" "),_("h4",{attrs:{id:"🎨-数据结构示意图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🎨-数据结构示意图"}},[s._v("#")]),s._v(" 🎨 数据结构示意图")]),s._v(" "),_("div",{staticClass:"language-plaintext line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-plaintext"}},[_("code",[s._v("Robots\n  |\n  ├── Robot A\n  |      ├── 通信模块 V1\n  |      |      ├── 4G 模块\n  |      |      ├── WiFi 模块\n  |      |\n  |      ├── 运动控制模块 V2\n  |\n  ├── Robot B\n         ├── 通信模块 V2\n         ├── 运动控制模块 V3\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br"),_("span",{staticClass:"line-number"},[s._v("3")]),_("br"),_("span",{staticClass:"line-number"},[s._v("4")]),_("br"),_("span",{staticClass:"line-number"},[s._v("5")]),_("br"),_("span",{staticClass:"line-number"},[s._v("6")]),_("br"),_("span",{staticClass:"line-number"},[s._v("7")]),_("br"),_("span",{staticClass:"line-number"},[s._v("8")]),_("br"),_("span",{staticClass:"line-number"},[s._v("9")]),_("br"),_("span",{staticClass:"line-number"},[s._v("10")]),_("br"),_("span",{staticClass:"line-number"},[s._v("11")]),_("br"),_("span",{staticClass:"line-number"},[s._v("12")]),_("br")])]),_("p",[s._v("这样，我们不仅能查 "),_("strong",[s._v("当前使用的模块")]),s._v("，还能回溯历史，比如：")]),s._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" robot_module_log "),_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" robot_id "),_("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A'")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" change_time "),_("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])]),_("h2",{attrs:{id:"就能看到-robot-a-过去使用过哪些模块-以及更换时间。🎯"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#就能看到-robot-a-过去使用过哪些模块-以及更换时间。🎯"}},[s._v("#")]),s._v(" 就能看到 "),_("strong",[s._v("Robot A 过去使用过哪些模块")]),s._v("，以及更换时间。🎯\n"),_("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jorgen-zhao/picGo/blog/timeline.png",alt:"timeline"}})]),s._v(" "),_("h2",{attrs:{id:"🤯-遇到的难题-解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🤯-遇到的难题-解决方案"}},[s._v("#")]),s._v(" 🤯 遇到的难题 & 解决方案")]),s._v(" "),_("h3",{attrs:{id:"_1️⃣-模块拆分粒度如何确定"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1️⃣-模块拆分粒度如何确定"}},[s._v("#")]),s._v(" 1️⃣ "),_("strong",[s._v("模块拆分粒度如何确定？")])]),s._v(" "),_("p",[s._v("一开始，我们纠结 "),_("strong",[s._v("模块的粒度")]),s._v("。比如，通信模块里有 4G、WiFi，应该拆开记录吗？")]),s._v(" "),_("p",[s._v("💡 "),_("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("采用 "),_("strong",[s._v("树状结构")]),s._v("，让模块支持子模块。")]),s._v(" "),_("li",[s._v("既能查询 "),_("strong",[s._v("完整模块")]),s._v("，又能查询 "),_("strong",[s._v("具体某个子模块")]),s._v("。")])]),s._v(" "),_("h3",{attrs:{id:"_2️⃣-模块编号咋办"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2️⃣-模块编号咋办"}},[s._v("#")]),s._v(" 2️⃣ 模块编号咋办？")]),s._v(" "),_("p",[s._v("一开始我想直接用序列号，比如“COMM-001”代表通信模块，但发现有些小模块是通用的，装在不同大模块里，编号重复了咋办？")]),s._v(" "),_("p",[s._v("💡 "),_("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("加了个“上下文前缀”，比如“COMM-001@SENSOR-003”，表示这个通信模块属于某个传感器模块。麻烦是麻烦了点，但至少不乱了。")])]),s._v(" "),_("h3",{attrs:{id:"_3️⃣-追溯的时候-历史数据咋展示"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3️⃣-追溯的时候-历史数据咋展示"}},[s._v("#")]),s._v(" 3️⃣ 追溯的时候，历史数据咋展示？")]),s._v(" "),_("p",[s._v("光知道模块换了没用，得知道为啥换、谁换的。")]),s._v(" "),_("p",[s._v("💡 "),_("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("给每次模块变更加个“日志”，记录操作人、时间、原因。后台加了个筛选功能，能按时间轴查历史，贼方便。")])]),s._v(" "),_("h3",{attrs:{id:"_4️⃣-如何高效查询机器人当前模块"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4️⃣-如何高效查询机器人当前模块"}},[s._v("#")]),s._v(" 4️⃣ "),_("strong",[s._v("如何高效查询机器人当前模块？")])]),s._v(" "),_("p",[s._v("由于历史变更数据很多，查询最新模块状态可能会很慢。")]),s._v(" "),_("p",[s._v("💡 "),_("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("采用 "),_("strong",[s._v("状态表缓存最新模块信息")]),s._v("，避免每次查询都扫描整个变更日志。")]),s._v(" "),_("li",[s._v("变更时自动更新状态表，加快查询速度。")])]),s._v(" "),_("h3",{attrs:{id:"_5️⃣-如何保证数据变更的正确性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5️⃣-如何保证数据变更的正确性"}},[s._v("#")]),s._v(" 5️⃣ "),_("strong",[s._v("如何保证数据变更的正确性？")])]),s._v(" "),_("p",[s._v("多人操作时，可能会发生 "),_("strong",[s._v("数据覆盖、误删")]),s._v(" 的情况。")]),s._v(" "),_("p",[s._v("💡 "),_("strong",[s._v("解决方案")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("采用 "),_("strong",[s._v("事务")]),s._v(" 确保数据一致性。")]),s._v(" "),_("li",[s._v("变更日志 "),_("strong",[s._v("不可删除")]),s._v("，只能追加，保证追溯能力。")])]),s._v(" "),_("hr"),s._v(" "),_("h2",{attrs:{id:"🎯-总结-感悟"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🎯-总结-感悟"}},[s._v("#")]),s._v(" 🎯 总结 & 感悟")]),s._v(" "),_("p",[_("strong",[s._v("从最初的表格管理，到结构化的数据库存储，再到考虑数据追溯、查询优化、事务管理，我们经历了一次完整的方案演进。")])]),s._v(" "),_("p",[s._v("📌 "),_("strong",[s._v("核心经验")]),s._v("：")]),s._v(" "),_("ul",[_("li",[s._v("设计时 "),_("strong",[s._v("考虑全局")]),s._v("，避免后期大改。")]),s._v(" "),_("li",[_("strong",[s._v("数据结构比代码更重要")]),s._v("，先想清楚再动手。")]),s._v(" "),_("li",[_("strong",[s._v("模块化不仅是硬件的事，管理同样需要模块化思维！")])])]),s._v(" "),_("p",[_("strong",[s._v("愿每一个代码变更，都是为了更好的未来！")]),s._v(" 🚀")])])}),[],!1,null,null,null);_.default=a.exports}}]);