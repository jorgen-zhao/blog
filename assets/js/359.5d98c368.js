(window.webpackJsonp=window.webpackJsonp||[]).push([[359],{710:function(s,t,a){"use strict";a.r(t);var r=a(15),v=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Jorgenï¼åœ¨ä¹‹å‰çš„åšå®¢ä¸­ï¼Œæˆ‘ä»¬å·²ç»èŠäº†å…³ç³»å‹æ•°æ®åº“çš„åŸºç¡€ã€SQLè¯­è¨€ã€ç´¢å¼•ä¼˜åŒ–ä»¥åŠå„ç§æ•°æ®åº“ç±»å‹ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªæå…¶é‡è¦çš„æ¦‚å¿µæˆ‘ä»¬è¿˜æ²¡æœ‰æ·±å…¥æ¢è®¨ï¼Œé‚£å°±æ˜¯"),t("strong",[s._v("äº‹åŠ¡")]),s._v("å’Œ"),t("strong",[s._v("å¹¶å‘æ§åˆ¶")]),s._v("ã€‚ğŸ¤”")]),s._v(" "),t("p",[s._v("æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªç¹å¿™çš„ç”µå•†ç³»ç»Ÿä¸­ï¼Œæœ‰æˆåƒä¸Šä¸‡çš„ç”¨æˆ·åŒæ—¶ä¸‹å•ã€ä»˜æ¬¾ã€åº“å­˜æ‰£å‡ã€‚å¦‚æœæ²¡æœ‰é€‚å½“çš„äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼šç”¨æˆ·ä»˜äº†é’±ä½†åº“å­˜æ²¡æ‰£ï¼Œæˆ–è€…åº“å­˜è¢«å¤šæ¬¡æ‰£å‡ï¼Œç”šè‡³å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼ğŸ˜±")]),s._v(" "),t("p",[s._v('ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨ä¸€ä¸‹æ•°æ®åº“äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶è¿™ä¸ª"å®ˆæŠ¤æ•°æ®ä¸€è‡´æ€§çš„å«å£«"å§ï¼')]),s._v(" "),t("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡ï¼Ÿ")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯æ•°æ®åº“æ“ä½œçš„åŸºæœ¬å•ä½ï¼Œæ˜¯ä¸€ç³»åˆ—æ“ä½œçš„é›†åˆï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚\n::_")]),s._v(" "),t("p",[s._v('ç®€å•æ¥è¯´ï¼Œäº‹åŠ¡å°±åƒæ˜¯ä¸€ä¸ª"æ‰“åŒ…å¥—é¤"ï¼Œé‡Œé¢çš„æ“ä½œå¿…é¡»ä¸€èµ·å®Œæˆï¼Œä¸èƒ½åªå®Œæˆä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œä¸‹å•è¿™ä¸ªæ“ä½œå¯èƒ½åŒ…å«å¤šä¸ªæ­¥éª¤ï¼š')]),s._v(" "),t("ol",[t("li",[s._v("åˆ›å»ºè®¢å•")]),s._v(" "),t("li",[s._v("æ‰£å‡åº“å­˜")]),s._v(" "),t("li",[s._v("å¢åŠ ç”¨æˆ·ç§¯åˆ†")]),s._v(" "),t("li",[s._v("å‘é€ç¡®è®¤é‚®ä»¶")])]),s._v(" "),t("p",[s._v("è¿™äº›æ­¥éª¤å¿…é¡»ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥æ‰§è¡Œï¼Œå¦‚æœä¸­é—´ä»»ä½•ä¸€æ­¥å¤±è´¥äº†ï¼Œæ•´ä¸ªæ“ä½œéƒ½åº”è¯¥å›æ»šåˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚")]),s._v(" "),t("h3",{attrs:{id:"acidç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acidç‰¹æ€§"}},[s._v("#")]),s._v(" ACIDç‰¹æ€§")]),s._v(" "),t("p",[s._v("å…³ç³»å‹æ•°æ®åº“ä¸­çš„äº‹åŠ¡é€šå¸¸éµå¾ªACIDç‰¹æ€§ï¼š")]),s._v(" "),t("div",{staticClass:"custom-block theorem"},[t("p",{staticClass:"title"},[s._v("THEOREM")]),t("p",[t("strong",[s._v("A")]),s._v("tomicityï¼ˆåŸå­æ€§ï¼‰ï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("C")]),s._v("onsistencyï¼ˆä¸€è‡´æ€§ï¼‰ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("I")]),s._v("solationï¼ˆéš”ç¦»æ€§ï¼‰ï¼šå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´åº”è¯¥ç›¸äº’éš”ç¦»ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”è¯¥è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("D")]),s._v("urabilityï¼ˆæŒä¹…æ€§ï¼‰ï¼šä¸€æ—¦äº‹åŠ¡è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚\n::_")]),s._v(" "),t("p",[s._v('è¿™å››ä¸ªç‰¹æ€§å°±åƒæ˜¯ä¸€ä¸ªäº‹åŠ¡çš„"å››é‡ä¿æŠ¤ç½©"ï¼Œç¡®ä¿äº†å³ä½¿åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ä¹Ÿèƒ½å¾—åˆ°ä¿è¯ã€‚')]),s._v(" "),t("h2",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶ï¼Ÿ")]),s._v(" "),t("p",[s._v("åœ¨ç°ä»£åº”ç”¨ä¸­ï¼Œæ•°æ®åº“é€šå¸¸éœ€è¦åŒæ—¶å¤„ç†æ¥è‡ªå¤šä¸ªç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰é€‚å½“çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå°±ä¼šå‡ºç°å„ç§é—®é¢˜ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("ä¸¢å¤±æ›´æ–°")]),s._v("ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ•°æ®ï¼Œç„¶åå„è‡ªä¿®æ”¹å¹¶æäº¤ï¼Œå¯¼è‡´å…¶ä¸­ä¸€ä¸ªä¿®æ”¹è¢«è¦†ç›–ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("è¯»è„æ•°æ®")]),s._v("ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("ä¸å¯é‡å¤è¯»")]),s._v("ï¼šä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œä½†å¾—åˆ°çš„ç»“æœä¸åŒï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†è¯¥æ•°æ®ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("å¹»è¯»")]),s._v("ï¼šä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢æ»¡è¶³æŸäº›æ¡ä»¶çš„æ•°æ®ï¼Œä½†ç»“æœé›†çš„è¡Œæ•°ä¸åŒï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡æ’å…¥äº†æ–°æ•°æ®ã€‚")])]),s._v(" "),t("p",[s._v("è¿™äº›é—®é¢˜ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œç”šè‡³å¼•å‘ä¸šåŠ¡é€»è¾‘é”™è¯¯ã€‚ğŸ˜±")]),s._v(" "),t("h2",{attrs:{id:"å¹¶å‘æ§åˆ¶æœºåˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘æ§åˆ¶æœºåˆ¶"}},[s._v("#")]),s._v(" å¹¶å‘æ§åˆ¶æœºåˆ¶")]),s._v(" "),t("p",[s._v("ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæ•°æ®åº“ç³»ç»Ÿå®ç°äº†å¤šç§å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼š")]),s._v(" "),t("h3",{attrs:{id:"_1-é”æœºåˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é”æœºåˆ¶"}},[s._v("#")]),s._v(" 1. é”æœºåˆ¶")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("é”æ˜¯æœ€å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œé€šè¿‡åœ¨æ•°æ®å¯¹è±¡ä¸Šè®¾ç½®é”æ¥é™åˆ¶å…¶ä»–äº‹åŠ¡çš„è®¿é—®ã€‚\n::_")]),s._v(" "),t("h4",{attrs:{id:"æ‚²è§‚é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‚²è§‚é”"}},[s._v("#")]),s._v(" æ‚²è§‚é”")]),s._v(" "),t("p",[s._v("æ‚²è§‚é”å‡è®¾å¹¶å‘å†²çªä¸€å®šä¼šå‘ç”Ÿï¼Œå› æ­¤åœ¨æ“ä½œæ•°æ®ä¹‹å‰å…ˆè·å–é”ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä½¿ç”¨SELECT FOR UPDATEè·å–è¡Œçº§æ‚²è§‚é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("æ‚²è§‚é”é€‚åˆå†™æ“ä½œé¢‘ç¹ã€å†²çªæ¦‚ç‡é«˜çš„åœºæ™¯ï¼Œä½†ä¼šé™ä½å¹¶å‘æ€§èƒ½ã€‚")]),s._v(" "),t("h4",{attrs:{id:"ä¹è§‚é”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¹è§‚é”"}},[s._v("#")]),s._v(" ä¹è§‚é”")]),s._v(" "),t("p",[s._v("ä¹è§‚é”å‡è®¾å¹¶å‘å†²çªå¾ˆå°‘å‘ç”Ÿï¼Œåªåœ¨æäº¤æ—¶æ£€æŸ¥æ˜¯å¦å†²çªï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä½¿ç”¨ç‰ˆæœ¬å·å®ç°ä¹è§‚é”")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" products \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" stock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" version "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("ä¹è§‚é”é€‚åˆè¯»å¤šå†™å°‘ã€å†²çªæ¦‚ç‡ä½çš„åœºæ™¯ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_2-éš”ç¦»çº§åˆ«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-éš”ç¦»çº§åˆ«"}},[s._v("#")]),s._v(" 2. éš”ç¦»çº§åˆ«")]),s._v(" "),t("p",[s._v("SQLæ ‡å‡†å®šä¹‰äº†å››ç§éš”ç¦»çº§åˆ«ï¼Œä»¥å¹³è¡¡ä¸€è‡´æ€§å’Œå¹¶å‘æ€§ï¼š")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("éš”ç¦»çº§åˆ«")]),s._v(" "),t("th",[s._v("è„è¯»")]),s._v(" "),t("th",[s._v("ä¸å¯é‡å¤è¯»")]),s._v(" "),t("th",[s._v("å¹»è¯»")]),s._v(" "),t("th",[s._v("å¹¶å‘æ€§èƒ½")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("è¯»æœªæäº¤(RU)")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("æœ€é«˜")])]),s._v(" "),t("tr",[t("td",[s._v("è¯»å·²æäº¤(RC)")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("è¾ƒé«˜")])]),s._v(" "),t("tr",[t("td",[s._v("å¯é‡å¤è¯»(RR)")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("å¯èƒ½")]),s._v(" "),t("td",[s._v("ä¸­ç­‰")])]),s._v(" "),t("tr",[t("td",[s._v("ä¸²è¡ŒåŒ–(S)")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("ä¸å¯èƒ½")]),s._v(" "),t("td",[s._v("æœ€ä½")])])])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRANSACTION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ISOLATION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("READ")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMITTED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ä¸åŒæ•°æ®åº“ç³»ç»Ÿé»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸åŒï¼š")]),s._v(" "),t("ul",[t("li",[s._v("MySQLé»˜è®¤ä¸ºå¯é‡å¤è¯»(RR)")]),s._v(" "),t("li",[s._v("PostgreSQLé»˜è®¤ä¸ºè¯»å·²æäº¤(RC)")]),s._v(" "),t("li",[s._v("Oracleé»˜è®¤ä¸ºè¯»å·²æäº¤(RC)")])]),s._v(" "),t("h3",{attrs:{id:"_3-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶-mvcc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶-mvcc"}},[s._v("#")]),s._v(" 3. å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶(MVCC)")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("MVCCæ˜¯ä¸€ç§é€šè¿‡æ•°æ®ç‰ˆæœ¬ç®¡ç†æ¥å®ç°å¹¶å‘æ§åˆ¶çš„æœºåˆ¶ï¼Œå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ•°æ®çš„ä¸åŒç‰ˆæœ¬ã€‚\n::_")]),s._v(" "),t("p",[s._v("ç°ä»£æ•°æ®åº“å¦‚PostgreSQLã€Oracleç­‰éƒ½é‡‡ç”¨äº†MVCCæŠ€æœ¯ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("æ¯æ¡æ•°æ®éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸€ä¸ªæ—¶é—´æˆ³æˆ–äº‹åŠ¡ID")]),s._v(" "),t("li",[s._v("è¯»å–æ“ä½œä¸ä¼šé˜»å¡å†™å…¥ï¼Œå†™å…¥æ“ä½œä¹Ÿä¸ä¼šé˜»å¡è¯»å–")]),s._v(" "),t("li",[s._v("æ¯ä¸ªäº‹åŠ¡åªèƒ½çœ‹åˆ°å®ƒå¯åŠ¨æ—¶å·²æäº¤çš„æ•°æ®ç‰ˆæœ¬")])]),s._v(" "),t("p",[s._v("MVCCå¤§å¤§æé«˜äº†æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å®è·µæ¡ˆä¾‹-é“¶è¡Œè½¬è´¦ç³»ç»Ÿ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µæ¡ˆä¾‹-é“¶è¡Œè½¬è´¦ç³»ç»Ÿ"}},[s._v("#")]),s._v(" å®è·µæ¡ˆä¾‹ï¼šé“¶è¡Œè½¬è´¦ç³»ç»Ÿ")]),s._v(" "),t("p",[s._v("è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªé“¶è¡Œè½¬è´¦ç³»ç»Ÿçš„ä¾‹å­æ¥ç†è§£äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶çš„é‡è¦æ€§ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è½¬è´¦äº‹åŠ¡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ£€æŸ¥è´¦æˆ·ä½™é¢")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_number "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A123'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ‰§è¡Œè½¬è´¦")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_number "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_number "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'B456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æäº¤äº‹åŠ¡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMIT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("BEGIN")]),s._v("å¼€å§‹äº‹åŠ¡")]),s._v(" "),t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("FOR UPDATE")]),s._v("é”å®šè´¦æˆ·A123çš„è®°å½•ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶ä¿®æ”¹")]),s._v(" "),t("li",[s._v("æ‰§è¡Œä¸¤ä¸ªæ›´æ–°æ“ä½œ")]),s._v(" "),t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("COMMIT")]),s._v("æäº¤äº‹åŠ¡ï¼Œæ‰€æœ‰æ›´æ”¹æ°¸ä¹…ç”Ÿæ•ˆ")])]),s._v(" "),t("p",[s._v("å¦‚æœä¸­é—´ä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨"),t("code",[s._v("ROLLBACK")]),s._v("å›æ»šæ•´ä¸ªäº‹åŠ¡ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¸€äº›æ“ä½œ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¦‚æœå‘ç”Ÿé”™è¯¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROLLBACK")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"æ•°æ®åº“äº‹åŠ¡çš„æœ€ä½³å®è·µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“äº‹åŠ¡çš„æœ€ä½³å®è·µ"}},[s._v("#")]),s._v(" æ•°æ®åº“äº‹åŠ¡çš„æœ€ä½³å®è·µ")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("ä¿æŒäº‹åŠ¡ç®€çŸ­")]),s._v("ï¼šäº‹åŠ¡æ—¶é—´è¶Šé•¿ï¼ŒæŒæœ‰é”çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå¹¶å‘æ€§èƒ½è¶Šå·®ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é¿å…é•¿äº‹åŠ¡")]),s._v("ï¼šé•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡ä¼šå¯¼è‡´é”äº‰ç”¨å’Œèµ„æºå ç”¨ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("åˆç†è®¾ç½®éš”ç¦»çº§åˆ«")]),s._v("ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«ï¼Œä¸å¿…æ€»æ˜¯ä½¿ç”¨æœ€é«˜éš”ç¦»çº§åˆ«ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨åªè¯»äº‹åŠ¡")]),s._v("ï¼šå¯¹äºåªè¯»æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨åªè¯»äº‹åŠ¡æé«˜æ€§èƒ½ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æ³¨æ„æ­»é”")]),s._v("ï¼šåˆç†è®¾è®¡äº‹åŠ¡é¡ºåºï¼Œé¿å…æ­»é”å‘ç”Ÿã€‚")])])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è®¾ç½®åªè¯»äº‹åŠ¡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRANSACTION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("READ")]),s._v(" ONLY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åªè¯»æ“ä½œ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMIT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v("äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ã€‚å®ƒä»¬ç¡®ä¿äº†å³ä½¿åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ä¹Ÿèƒ½å¾—åˆ°ä¿è¯ã€‚ğŸ’ª")]),s._v(" "),t("p",[s._v("é€šè¿‡ç†è§£ACIDç‰¹æ€§ã€é”æœºåˆ¶ã€éš”ç¦»çº§åˆ«å’ŒMVCCç­‰æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºæ›´åŠ å¥å£®ã€é«˜æ•ˆçš„æ•°æ®åº“åº”ç”¨ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†ä½¿ç”¨äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œæå‡ç³»ç»Ÿçš„å¯é æ€§å’Œæ€§èƒ½ã€‚")]),s._v(" "),t("p",[s._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ•°æ®åº“äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµã€‚ğŸ‘‡")]),s._v(" "),t("blockquote",[t("p",[s._v("æ•°æ®åº“äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶å°±åƒäº¤é€šä¿¡å·ç¯ï¼Œè™½ç„¶æœ‰æ—¶ä¼šè®©æˆ‘ä»¬ç­‰å¾…ï¼Œä½†å®ƒä»¬ç¡®ä¿äº†æ•´ä¸ªç³»ç»Ÿçš„æœ‰åºè¿è¡Œå’Œæ•°æ®å®‰å…¨ã€‚")])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("æ„Ÿè°¢é˜…è¯»ï¼ä¸‹æ¬¡æˆ‘ä»¬å°†æ¢è®¨æ•°æ®åº“ç›‘æ§ä¸è¿ç»´çš„è¯é¢˜ï¼Œæ•¬è¯·æœŸå¾…ï¼ğŸš€")])])])])])])}),[],!1,null,null,null);t.default=v.exports}}]);