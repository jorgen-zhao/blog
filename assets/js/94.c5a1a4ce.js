(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{439:function(s,t,n){"use strict";n.r(t);var e=n(14),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("WSL")]),s._v(" "),t("p",[s._v("The Windows Subsystem for Linux => 适用于 Linux 的 Windows 子系统")])]),s._v(" "),t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("上一篇环境搭建中，我在本地搭建了一个虚拟机，然后在虚拟机上运行了Ubuntu的镜像，然后基于Ubuntu搭建了开发环境。不过这样其实比较重，每次启动对系统的资源占用也会非常的高。window本身也提供了解决方案，微软的提供的文档也是非常的详细。具体可以参阅"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/",target:"_blank",rel:"noopener noreferrer"}},[s._v("WSL文档"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("p",[s._v("适用于 Linux 的 Windows 子系统可让开发人员按原样运行 GNU/Linux 环境 - 包括大多数命令行工具、实用工具和应用程序 - 且不会产生传统虚拟机或双启动设置开销。")]),s._v(" "),t("p",[s._v("WSL 2 是适用于 Linux 的 Windows 子系统体系结构的一个新版本，它支持适用于 Linux 的 Windows 子系统在 Windows 上运行 ELF64 Linux 二进制文件。 它的主要目标是提高文件系统性能，以及添加完全的系统调用兼容性。")]),s._v(" "),t("p",[s._v("这一新的体系结构改变了这些 Linux 二进制文件与Windows 和计算机硬件进行交互的方式，但仍然提供与 WSL 1（当前广泛可用的版本）中相同的用户体验。")]),s._v(" "),t("p",[s._v("单个 Linux 分发版可以在 WSL 1 或 WSL 2 体系结构中运行。 每个分发版可随时升级或降级，并且你可以并行运行 WSL 1 和 WSL 2 分发版。 WSL 2 使用全新的体系结构，该体系结构受益于运行真正的 Linux 内核。")]),s._v(" "),t("h2",{attrs:{id:"先决条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先决条件"}},[s._v("#")]),s._v(" 先决条件")]),s._v(" "),t("p",[s._v("必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11 才能使用以下命令。 如果使用的是更早的版本，请参阅"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/install-manual",target:"_blank",rel:"noopener noreferrer"}},[s._v("手动安装页"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("p",[s._v("安装 WSL 命令\n现在，可以使用单个命令安装运行 WSL 所需的一切内容。 在管理员模式下打开 PowerShell 或 Windows 命令提示符，方法是右键单击并选择“以管理员身份运行”，输入 wsl --install 命令，然后重启计算机。")]),s._v(" "),t("p",[s._v("PowerShell")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("wsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此命令将启用运行 WSL 并安装 Linux 的 Ubuntu 发行版所需的功能。 （"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#install",target:"_blank",rel:"noopener noreferrer"}},[s._v("可以更改此默认发行版"),t("OutboundLink")],1),s._v("）。")]),s._v(" "),t("p",[s._v("如果你运行的是旧版，或只是不想使用 install 命令并希望获得分步指引，请参阅"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/install-manual",target:"_blank",rel:"noopener noreferrer"}},[s._v("旧版 WSL 手动安装步骤"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("p",[s._v("首次启动新安装的 Linux 发行版时，将打开一个控制台窗口，要求你等待将文件解压缩并存储到计算机上。 未来的所有启动时间应不到一秒。")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),t("p",[s._v("上述命令仅在完全未安装 WSL 时才有效，如果运行 "),t("code",[s._v("wsl --install")]),s._v(" 并查看 WSL 帮助文本，请尝试运行  "),t("code",[s._v("wsl --list --online")]),s._v(" 以查看可用发行版列表并运行 "),t("code",[s._v("wsl --install -d <DistroName>")]),s._v(" 以安装发行版。 若要卸载 WSL，请参阅"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/troubleshooting#uninstall-legacy-version-of-wsl",target:"_blank",rel:"noopener noreferrer"}},[s._v("卸载旧版 WSL"),t("OutboundLink")],1),s._v(" 或"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#unregister-or-uninstall-a-linux-distribution",target:"_blank",rel:"noopener noreferrer"}},[s._v("注销或卸载 Linux 发行版"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("为简单起见，通常建议使用 wsl --install 安装适用于 Linux 的 Windows 子系统，但如果运行的是旧版 Windows，则可能不支持这种方式。 下面介绍了手动安装步骤。")]),s._v(" "),t("h3",{attrs:{id:"启用适用于-linux-的-windows-子系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用适用于-linux-的-windows-子系统"}},[s._v("#")]),s._v(" 启用适用于 Linux 的 Windows 子系统")]),s._v(" "),t("p",[s._v("需要先启用“适用于 Linux 的 Windows 子系统”可选功能，然后才能在 Windows 上安装 Linux 分发。")]),s._v(" "),t("p",[s._v("以管理员身份打开 PowerShell（“开始”菜单 >“PowerShell” >单击右键 >“以管理员身份运行”），然后输入以下命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("建议现在转到步骤 #2，更新到 WSL 2，但如果只想安装 WSL 1，现在可以重新启动计算机，然后继续执行步骤 6 - 安装所选的 Linux 发行版。 若要更新到 WSL 2，请等待重新启动计算机，然后继续执行下一步。")]),s._v(" "),t("h3",{attrs:{id:"检查运行-wsl-2-的要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查运行-wsl-2-的要求"}},[s._v("#")]),s._v(" 检查运行 WSL 2 的要求")]),s._v(" "),t("p",[s._v("若要更新到 WSL 2，需要运行 Windows 10。")]),s._v(" "),t("ul",[t("li",[s._v("对于 x64 系统：版本 1903 或更高版本，内部版本为 18362 或更高版本。")]),s._v(" "),t("li",[s._v("对于 ARM64 系统：版本 2004 或更高版本，内部版本为 19041 或更高版本。\n或 Windows 11。")])]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),t("p",[s._v("低于 18362 的版本不支持 WSL 2。 使用 "),t("a",{attrs:{href:"https://www.microsoft.com/software-download/windows10",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows Update 助手"),t("OutboundLink")],1),s._v("更新 Windows 版本。")])]),s._v(" "),t("p",[s._v("若要检查 Windows 版本及内部版本号，选择 Windows 徽标键 + R，然后键入“winver”，选择“确定”。 更新到“设置”菜单中的[最新 Windows 版本]。")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),t("p",[s._v("如果运行的是 Windows 10 版本1903 或 1909，请在 Windows 菜单中打开“设置”，导航到“更新和安全性”，然后选择“检查更新”。 内部版本号必须是 18362.1049+ 或 18363.1049+，次要内部版本号需要高于 .1049。 阅读详细信息："),t("a",{attrs:{href:"https://devblogs.microsoft.com/commandline/wsl-2-support-is-coming-to-windows-10-versions-1903-and-1909/",target:"_blank",rel:"noopener noreferrer"}},[s._v("WSL 2 即将支持 Windows 10 版本 1903 和 1909"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"启用虚拟机功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用虚拟机功能"}},[s._v("#")]),s._v(" 启用虚拟机功能")]),s._v(" "),t("p",[s._v("安装 WSL 2 之前，必须启用“虚拟机平台”可选功能。 计算机需要虚拟化功能才能使用此功能。")]),s._v(" "),t("p",[s._v("以管理员身份打开 PowerShell 并运行：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("重新启动计算机，以完成 WSL 安装并更新到 WSL 2。")]),s._v(" "),t("h3",{attrs:{id:"下载-linux-内核更新包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-linux-内核更新包"}},[s._v("#")]),s._v(" 下载 Linux 内核更新包")]),s._v(" "),t("ol",[t("li",[s._v("下载最新包："),t("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[s._v("适用于 x64 计算机的 WSL2 Linux 内核更新包"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),t("p",[s._v("如果使用的是 ARM64 计算机，请下载 "),t("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[s._v("ARM64 包"),t("OutboundLink")],1),s._v("。 如果不确定自己计算机的类型，请打开命令提示符或 PowerShell，并输入："),t("code",[s._v('systeminfo | find "System Type"')]),s._v("。")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("运行上一步中下载的更新包。 （双击以运行 - 系统将提示你提供提升的权限，选择“是”以批准此安装。）")])]),s._v(" "),t("p",[s._v("安装完成后，请继续执行下一步 - 在安装新的 Linux 分发时，将 WSL 2 设置为默认版本。 （如果希望将新的 Linux 安装设置为 WSL 1，请跳过此步骤。）")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("备注")]),s._v(" "),t("p",[s._v("有关详细信息，请参阅 "),t("a",{attrs:{href:"https://aka.ms/cliblog",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows 命令行博客"),t("OutboundLink")],1),s._v("上的文章"),t("a",{attrs:{href:"https://devblogs.microsoft.com/commandline/wsl2-will-be-generally-available-in-windows-10-version-2004",target:"_blank",rel:"noopener noreferrer"}},[s._v("对更新 WSL2 Linux 内核的更改"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"将-wsl-2-设置为默认版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将-wsl-2-设置为默认版本"}},[s._v("#")]),s._v(" 将 WSL 2 设置为默认版本")]),s._v(" "),t("p",[s._v("打开 PowerShell，然后在安装新的 Linux 发行版时运行以下命令，将 WSL 2 设置为默认版本：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("wsl --set-default-version 2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"安装所选的-linux-分发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装所选的-linux-分发"}},[s._v("#")]),s._v(" 安装所选的 Linux 分发")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("打开 Microsoft Store，并选择你偏好的 Linux 分发版。\n"),t("img",{attrs:{src:"https://learn.microsoft.com/zh-cn/windows/wsl/media/store.png",alt:"Linux分发版"}})])]),s._v(" "),t("li",[t("p",[s._v("在分发版的页面中，选择“获取”。\n"),t("img",{attrs:{src:"https://learn.microsoft.com/zh-cn/windows/wsl/media/ubuntustore.png",alt:"Ubuntu页面"}}),s._v("\n首次启动新安装的 Linux 分发版时，将打开一个控制台窗口，系统会要求你等待一分钟或两分钟，以便文件解压缩并存储到电脑上。 未来的所有启动时间应不到一秒。")])])]),s._v(" "),t("p",[s._v("然后，需要"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/setup/environment#set-up-your-linux-username-and-password",target:"_blank",rel:"noopener noreferrer"}},[s._v("为新的 Linux 分发版创建用户帐户和密码"),t("OutboundLink")],1),s._v("。\n"),t("img",{attrs:{src:"https://learn.microsoft.com/zh-cn/windows/wsl/media/ubuntuinstall.png",alt:"ubuntu账号米啊"}})]),s._v(" "),t("p",[s._v("能够进行到这一步，就算成功安装成功了。开心的玩耍吧🥳")])])}),[],!1,null,null,null);t.default=r.exports}}]);