(window.webpackJsonp=window.webpackJsonp||[]).push([[394],{746:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨DevOpsçš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨åŸºç¡€è®¾æ–½å³ä»£ç (IaC)å’Œåº”ç”¨ç¨‹åºçš„æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²(CI/CD)ä¸Šã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªå…³é”®ç»„ä»¶ç»å¸¸è¢«å¿½è§†ï¼šæ•°æ®ç®¡ç†ï¼ğŸ¤” æ•°æ®åº“ä½œä¸ºåº”ç”¨çš„æ ¸å¿ƒï¼Œå…¶ç®¡ç†æ–¹å¼å´å¸¸å¸¸åœç•™åœ¨æ‰‹åŠ¨æ“ä½œå’Œè„šæœ¬åŒ–çš„é˜¶æ®µï¼Œè¿™ä¸DevOpsçš„è‡ªåŠ¨åŒ–ç†å¿µèƒŒé“è€Œé©°ã€‚")]),t._v(" "),s("p",[t._v('ä½œä¸ºä¸€åDevOpså·¥ç¨‹å¸ˆï¼Œæˆ‘äº²èº«ç»å†è¿‡å› æ•°æ®åº“å˜æ›´å¯¼è‡´çš„ç”Ÿäº§äº‹æ•…ï¼Œä¹Ÿä½“éªŒè¿‡é€šè¿‡å°†æ•°æ®åº“ç®¡ç†çº³å…¥DevOpsæµç¨‹æ‰€å¸¦æ¥çš„æ•ˆç‡å’Œç¨³å®šæ€§æå‡ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«å¦‚ä½•åœ¨DevOpså®è·µä¸­å®ç°æœ‰æ•ˆçš„æ•°æ®ç®¡ç†ï¼Œæ„å»ºçœŸæ­£çš„"æ•°æ®åº“å³ä»£ç "(DBaC)ä½“ç³»ã€‚')]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v("æ•°æ®æ˜¯åº”ç”¨çš„æ ¸å¿ƒèµ„äº§ï¼Œå°†æ•°æ®åº“ç®¡ç†çº³å…¥DevOpsæµç¨‹æ˜¯å®ç°å…¨é¢è‡ªåŠ¨åŒ–çš„å…³é”®ä¸€æ­¥ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"ä¸ºä»€ä¹ˆæ•°æ®ç®¡ç†åœ¨devopsä¸­å¦‚æ­¤é‡è¦"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆæ•°æ®ç®¡ç†åœ¨devopsä¸­å¦‚æ­¤é‡è¦"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆæ•°æ®ç®¡ç†åœ¨DevOpsä¸­å¦‚æ­¤é‡è¦ï¼Ÿ")]),t._v(" "),s("p",[t._v("åœ¨æ·±å…¥æ¢è®¨å…·ä½“å®è·µä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä½ çš„å›¢é˜Ÿæ˜¯å¦ç»å¸¸æ‰‹åŠ¨æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬ï¼Ÿ")]),t._v(" "),s("li",[t._v("æ•°æ®åº“å˜æ›´æ˜¯å¦éµå¾ªä¸ä»£ç å˜æ›´ç›¸åŒçš„è´¨é‡ä¿è¯æµç¨‹ï¼Ÿ")]),t._v(" "),s("li",[t._v("ç”Ÿäº§ç¯å¢ƒçš„æ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹æ˜¯å¦è‡ªåŠ¨åŒ–ä¸”å¯æµ‹è¯•ï¼Ÿ")])]),t._v(" "),s("p",[t._v("å¦‚æœè¿™äº›é—®é¢˜è®©ä½ æ„Ÿåˆ°ä¸å®‰ï¼Œé‚£ä¹ˆè¯´æ˜ä½ çš„DevOpså®è·µåœ¨æ•°æ®ç®¡ç†æ–¹é¢è¿˜æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´ã€‚ğŸ“¡")]),t._v(" "),s("p",[t._v("æ•°æ®ç®¡ç†åœ¨DevOpsä¸­çš„é‡è¦æ€§ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä¸€è‡´æ€§")]),t._v("ï¼šç¡®ä¿å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒçš„æ•°æ®ç»“æ„ä¸€è‡´")]),t._v(" "),s("li",[s("strong",[t._v("å¯é‡å¤æ€§")]),t._v("ï¼šæ•°æ®åº“å˜æ›´å¯ä»¥åƒä»£ç ä¸€æ ·è¢«ç‰ˆæœ¬æ§åˆ¶å’Œé‡ç”¨")]),t._v(" "),s("li",[s("strong",[t._v("å®‰å…¨æ€§")]),t._v("ï¼šé€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹å‡å°‘äººä¸ºé”™è¯¯ï¼Œæé«˜æ•°æ®å®‰å…¨æ€§")]),t._v(" "),s("li",[s("strong",[t._v("æ•ˆç‡")]),t._v("ï¼šåŠ é€Ÿæ•°æ®åº“å˜æ›´çš„éƒ¨ç½²è¿‡ç¨‹ï¼Œå‡å°‘åœæœºæ—¶é—´")])]),t._v(" "),s("h2",{attrs:{id:"æ•°æ®åº“å³ä»£ç -dbac-çš„æ ¸å¿ƒæ¦‚å¿µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“å³ä»£ç -dbac-çš„æ ¸å¿ƒæ¦‚å¿µ"}},[t._v("#")]),t._v(" æ•°æ®åº“å³ä»£ç (DBaC)çš„æ ¸å¿ƒæ¦‚å¿µ")]),t._v(" "),s("p",[t._v("æ•°æ®åº“å³ä»£ç (DBaC)æ˜¯å°†æ•°æ®åº“è§†ä¸ºä»£ç åº“çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨ä¸åŸºç¡€è®¾æ–½å³ä»£ç (IaC)ç›¸ä¼¼çš„åŸåˆ™æ¥ç®¡ç†æ•°æ®åº“ã€‚è¿™æ„å‘³ç€ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ•°æ®åº“æ¨¡å¼(è¡¨ç»“æ„ã€ç´¢å¼•ã€çº¦æŸç­‰)è¢«å­˜å‚¨åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­")]),t._v(" "),s("li",[t._v("æ•°æ®åº“å˜æ›´é€šè¿‡æ‹‰å–è¯·æ±‚(PR)è¿›è¡Œå®¡æŸ¥å’Œæ‰¹å‡†")]),t._v(" "),s("li",[t._v("æ•°æ®åº“è¿ç§»è„šæœ¬åƒåº”ç”¨ç¨‹åºä»£ç ä¸€æ ·è¿›è¡Œæµ‹è¯•å’Œéƒ¨ç½²")])]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("æ•°æ®åº“å³ä»£ç (DBaC)çš„æ ¸å¿ƒåŸåˆ™æ˜¯å°†æ•°æ®åº“å˜æ›´è§†ä¸ºåº”ç”¨ç¨‹åºä»£ç å˜æ›´ï¼Œéµå¾ªç›¸åŒçš„è‡ªåŠ¨åŒ–ã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚")])]),s("h3",{attrs:{id:"å®ç°dbacçš„å…³é”®ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°dbacçš„å…³é”®ç»„ä»¶"}},[t._v("#")]),t._v(" å®ç°DBaCçš„å…³é”®ç»„ä»¶")]),t._v(" "),s("p",[t._v("è¦å®ç°çœŸæ­£çš„æ•°æ®åº“å³ä»£ç ï¼Œéœ€è¦ä»¥ä¸‹å‡ ä¸ªå…³é”®ç»„ä»¶ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ")]),t._v("ï¼šå­˜å‚¨æ•°æ®åº“æ¨¡å¼å’Œå˜æ›´è„šæœ¬")]),t._v(" "),s("li",[s("strong",[t._v("è¿ç§»å·¥å…·")]),t._v("ï¼šè·Ÿè¸ªå’Œæ‰§è¡Œæ•°æ®åº“å˜æ›´")]),t._v(" "),s("li",[s("strong",[t._v("æµ‹è¯•æ¡†æ¶")]),t._v("ï¼šéªŒè¯æ•°æ®åº“å˜æ›´çš„æ­£ç¡®æ€§")]),t._v(" "),s("li",[s("strong",[t._v("è‡ªåŠ¨åŒ–æµç¨‹")]),t._v("ï¼šå°†æ•°æ®åº“å˜æ›´é›†æˆåˆ°CI/CDç®¡é“ä¸­")])]),t._v(" "),s("h2",{attrs:{id:"ä¸»æµæ•°æ®åº“è¿ç§»å·¥å…·å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»æµæ•°æ®åº“è¿ç§»å·¥å…·å¯¹æ¯”"}},[t._v("#")]),t._v(" ä¸»æµæ•°æ®åº“è¿ç§»å·¥å…·å¯¹æ¯”")]),t._v(" "),s("p",[t._v("å¸‚åœºä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„æ•°æ®åº“è¿ç§»å·¥å…·ï¼Œå®ƒä»¬å„æœ‰ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å‡ ä¸ªä¸»æµå·¥å…·çš„å¯¹æ¯”ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("å·¥å…·")]),t._v(" "),s("th",[t._v("è¯­è¨€æ”¯æŒ")]),t._v(" "),s("th",[t._v("ç‰ˆæœ¬æ§åˆ¶")]),t._v(" "),s("th",[t._v("å›æ»šæ”¯æŒ")]),t._v(" "),s("th",[t._v("ç¤¾åŒºæ´»è·ƒåº¦")]),t._v(" "),s("th",[t._v("é€‚ç”¨åœºæ™¯")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Flyway")]),t._v(" "),s("td",[t._v("Javaä¸ºä¸»")]),t._v(" "),s("td",[t._v("SQL/Java")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("é«˜")]),t._v(" "),s("td",[t._v("Javaåº”ç”¨ï¼Œä¼ ç»Ÿæ•°æ®åº“")])]),t._v(" "),s("tr",[s("td",[t._v("Liquibase")]),t._v(" "),s("td",[t._v("Javaä¸ºä¸»")]),t._v(" "),s("td",[t._v("XML/YAML/JSON")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("é«˜")]),t._v(" "),s("td",[t._v("å¤šè¯­è¨€åº”ç”¨ï¼Œå¤æ‚å˜æ›´")])]),t._v(" "),s("tr",[s("td",[t._v("Alembic")]),t._v(" "),s("td",[t._v("Python")]),t._v(" "),s("td",[t._v("Python")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("ä¸­é«˜")]),t._v(" "),s("td",[t._v("Pythonåº”ç”¨")])]),t._v(" "),s("tr",[s("td",[t._v("Django Migrations")]),t._v(" "),s("td",[t._v("Python")]),t._v(" "),s("td",[t._v("Python")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("é«˜")]),t._v(" "),s("td",[t._v("Djangoåº”ç”¨")])]),t._v(" "),s("tr",[s("td",[t._v("Rails Migrations")]),t._v(" "),s("td",[t._v("Ruby")]),t._v(" "),s("td",[t._v("Ruby")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("é«˜")]),t._v(" "),s("td",[t._v("Ruby on Railsåº”ç”¨")])]),t._v(" "),s("tr",[s("td",[t._v("Mongock")]),t._v(" "),s("td",[t._v("Java/Python/Node.js")]),t._v(" "),s("td",[t._v("å¤šç§")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("ä¸­")]),t._v(" "),s("td",[t._v("MongoDBç­‰NoSQLæ•°æ®åº“")])]),t._v(" "),s("tr",[s("td",[t._v("Atlas")]),t._v(" "),s("td",[t._v("Go")]),t._v(" "),s("td",[t._v("HCL/SQL")]),t._v(" "),s("td",[t._v("æ˜¯")]),t._v(" "),s("td",[t._v("é«˜")]),t._v(" "),s("td",[t._v("å¤šè¯­è¨€ï¼Œå¤šäº‘ç¯å¢ƒ")])])])]),t._v(" "),s("p",[t._v("æˆ‘ä¸ªäººæ›´å€¾å‘äºä½¿ç”¨ "),s("strong",[t._v("Liquibase")]),t._v(" æˆ– "),s("strong",[t._v("Flyway")]),t._v("ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†å¼ºå¤§çš„ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»šåŠŸèƒ½ï¼Œå¹¶ä¸”æ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ•°æ®åº“è¿ç§»ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“è¿ç§»ç­–ç•¥"}},[t._v("#")]),t._v(" æ•°æ®åº“è¿ç§»ç­–ç•¥")]),t._v(" "),s("p",[t._v("åœ¨DevOpsç¯å¢ƒä¸­ï¼Œæ•°æ®åº“è¿ç§»éœ€è¦è°¨æ…è§„åˆ’å’Œæ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„è¿ç§»ç­–ç•¥ï¼š")]),t._v(" "),s("h3",{attrs:{id:"_1-è“ç»¿éƒ¨ç½²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-è“ç»¿éƒ¨ç½²"}},[t._v("#")]),t._v(" 1. è“ç»¿éƒ¨ç½²")]),t._v(" "),s("p",[t._v("è“ç»¿éƒ¨ç½²æ˜¯ä¸€ç§é›¶åœæœºæ—¶é—´çš„éƒ¨ç½²ç­–ç•¥ï¼Œé€šè¿‡ç»´æŠ¤ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„ç”Ÿäº§ç¯å¢ƒ(è“è‰²å’Œç»¿è‰²)æ¥å®ç°ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å½“å‰ç”¨æˆ·è®¿é—®è“è‰²ç¯å¢ƒ")]),t._v(" "),s("li",[t._v("å°†æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°ç»¿è‰²ç¯å¢ƒ")]),t._v(" "),s("li",[t._v("æ‰§è¡Œæ•°æ®åº“è¿ç§»")]),t._v(" "),s("li",[t._v("åˆ‡æ¢æµé‡åˆ°ç»¿è‰²ç¯å¢ƒ")]),t._v(" "),s("li",[t._v("è“è‰²ç¯å¢ƒä½œä¸ºä¸‹ä¸€è½®éƒ¨ç½²çš„å€™é€‰")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v("è“ç»¿éƒ¨ç½²é€‚ç”¨äºä¸èƒ½æœ‰åœæœºæ—¶é—´çš„æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿï¼Œä½†éœ€è¦æ›´å¤šçš„èµ„æºæŠ•å…¥ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_2-é‡‘ä¸é›€å‘å¸ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é‡‘ä¸é›€å‘å¸ƒ"}},[t._v("#")]),t._v(" 2. é‡‘ä¸é›€å‘å¸ƒ")]),t._v(" "),s("p",[t._v("é‡‘ä¸é›€å‘å¸ƒé€æ­¥å°†æµé‡è¿ç§»åˆ°æ–°ç‰ˆæœ¬ï¼ŒåŒæ—¶å¯†åˆ‡ç›‘æ§æ€§èƒ½å’Œé”™è¯¯ç‡ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("éƒ¨ç½²æ–°ç‰ˆæœ¬åˆ°ä¸€å°éƒ¨åˆ†æœåŠ¡å™¨(å¦‚10%)")]),t._v(" "),s("li",[t._v("æ‰§è¡Œæ•°æ®åº“è¿ç§»")]),t._v(" "),s("li",[t._v("å°†å°‘é‡æµé‡(å¦‚5%)è·¯ç”±åˆ°æ–°ç‰ˆæœ¬")]),t._v(" "),s("li",[t._v("ç›‘æ§æŒ‡æ ‡å’Œé”™è¯¯ç‡")]),t._v(" "),s("li",[t._v("é€æ­¥å¢åŠ æµé‡ç›´åˆ°100%")])]),t._v(" "),s("h3",{attrs:{id:"_3-åŠŸèƒ½å¼€å…³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-åŠŸèƒ½å¼€å…³"}},[t._v("#")]),t._v(" 3. åŠŸèƒ½å¼€å…³")]),t._v(" "),s("p",[t._v("åŠŸèƒ½å¼€å…³(Feature Flags)æ˜¯ä¸€ç§æ›´ç²¾ç»†çš„éƒ¨ç½²æ§åˆ¶æ–¹å¼ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä»£ç å’Œæ•°æ®åº“å˜æ›´åŒæ—¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ")]),t._v(" "),s("li",[t._v("é€šè¿‡åŠŸèƒ½å¼€å…³æ§åˆ¶å“ªäº›ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ–°åŠŸèƒ½")]),t._v(" "),s("li",[t._v("æ•°æ®åº“å˜æ›´åœ¨åŠŸèƒ½å¼€å¯å‰ä¸ä¼šç”Ÿæ•ˆ")]),t._v(" "),s("li",[t._v("å‡ºç°é—®é¢˜æ—¶å¯ä»¥å¿«é€Ÿå…³é—­åŠŸèƒ½")])]),t._v(" "),s("h2",{attrs:{id:"æµ‹è¯•æ•°æ®ç®¡ç†ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•æ•°æ®ç®¡ç†ç­–ç•¥"}},[t._v("#")]),t._v(" æµ‹è¯•æ•°æ®ç®¡ç†ç­–ç•¥")]),t._v(" "),s("p",[t._v("æµ‹è¯•æ•°æ®ç®¡ç†æ˜¯DBaCå®è·µä¸­çš„å¦ä¸€ä¸ªå…³é”®ç¯èŠ‚ã€‚æ²¡æœ‰åˆé€‚çš„æµ‹è¯•æ•°æ®ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•å°±æ— æ³•æœ‰æ•ˆè¿è¡Œã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-æ•°æ®å­é›†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•°æ®å­é›†"}},[t._v("#")]),t._v(" 1. æ•°æ®å­é›†")]),t._v(" "),s("p",[t._v("ä»ç”Ÿäº§ç¯å¢ƒæå–æ•°æ®å­é›†ç”¨äºæµ‹è¯•ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨å·¥å…·å¦‚ "),s("strong",[t._v("pg_dump")]),t._v("ã€"),s("strong",[t._v("mysqldump")]),t._v(" æˆ–ä¸“ä¸šå·¥å…·å¦‚ "),s("strong",[t._v("Delphix")]),t._v("ã€"),s("strong",[t._v("Informatica")])]),t._v(" "),s("li",[t._v("ç¡®ä¿æ•°æ®è„±æ•ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯")]),t._v(" "),s("li",[t._v("ä¿æŒæ•°æ®å…³ç³»å®Œæ•´æ€§")])]),t._v(" "),s("h3",{attrs:{id:"_2-åˆæˆæ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-åˆæˆæ•°æ®"}},[t._v("#")]),t._v(" 2. åˆæˆæ•°æ®")]),t._v(" "),s("p",[t._v("ç”Ÿæˆçœ‹èµ·æ¥çœŸå®ä½†ä¸åŒ…å«å®é™…ä¸ªäººä¿¡æ¯çš„åˆæˆæ•°æ®ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨å·¥å…·å¦‚ "),s("strong",[t._v("Mockaroo")]),t._v("ã€"),s("strong",[t._v("Faker.js")])]),t._v(" "),s("li",[t._v("é€‚ç”¨äºéœ€è¦å¤§é‡æµ‹è¯•æ•°æ®çš„åœºæ™¯")]),t._v(" "),s("li",[t._v("ä¸å—æ•°æ®éšç§æ³•è§„é™åˆ¶")])]),t._v(" "),s("h3",{attrs:{id:"_3-æ•°æ®å·¥å‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ•°æ®å·¥å‚"}},[t._v("#")]),t._v(" 3. æ•°æ®å·¥å‚")]),t._v(" "),s("p",[t._v("åˆ›å»ºå¯é‡å¤ç”Ÿæˆçš„æµ‹è¯•æ•°æ®é›†ï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ç¤ºä¾‹ï¼šä½¿ç”¨SQLç”Ÿæˆæµ‹è¯•æ•°æ®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" email"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" created_at"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" generate_series"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" generate_series"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@example.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NOW")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("365")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' days'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_4-æµ‹è¯•æ•°æ®å®¹å™¨åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æµ‹è¯•æ•°æ®å®¹å™¨åŒ–"}},[t._v("#")]),t._v(" 4. æµ‹è¯•æ•°æ®å®¹å™¨åŒ–")]),t._v(" "),s("p",[t._v("å°†æµ‹è¯•æ•°æ®ä½œä¸ºå®¹å™¨çš„ä¸€éƒ¨åˆ†ï¼š")]),t._v(" "),s("div",{staticClass:"language-dockerfile line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dockerfileç¤ºä¾‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" postgres:13")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" ./sql/init.sql /docker-entrypoint-initdb.d/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" ./sql/test-data.sql /docker-entrypoint-initdb.d/")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"æ•°æ®åº“å®‰å…¨ä¸åˆè§„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“å®‰å…¨ä¸åˆè§„"}},[t._v("#")]),t._v(" æ•°æ®åº“å®‰å…¨ä¸åˆè§„")]),t._v(" "),s("p",[t._v("åœ¨DevOpsæµç¨‹ä¸­ï¼Œæ•°æ®åº“å®‰å…¨ä¸åˆè§„æ˜¯ä¸å¯å¿½è§†çš„é‡è¦ç¯èŠ‚ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-æ•°æ®åº“è®¿é—®æ§åˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•°æ®åº“è®¿é—®æ§åˆ¶"}},[t._v("#")]),t._v(" 1. æ•°æ®åº“è®¿é—®æ§åˆ¶")]),t._v(" "),s("ul",[s("li",[t._v("å®æ–½æœ€å°æƒé™åŸåˆ™")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ä¸´æ—¶å‡­è¯è€Œéé•¿æœŸå‡­è¯")]),t._v(" "),s("li",[t._v("å®šæœŸè½®æ¢è®¿é—®å¯†é’¥")]),t._v(" "),s("li",[t._v("è®°å½•å’Œç›‘æ§æ‰€æœ‰æ•°æ®åº“è®¿é—®")])]),t._v(" "),s("h3",{attrs:{id:"_2-æ•°æ®åŠ å¯†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ•°æ®åŠ å¯†"}},[t._v("#")]),t._v(" 2. æ•°æ®åŠ å¯†")]),t._v(" "),s("ul",[s("li",[t._v("é™æ€æ•°æ®åŠ å¯†ï¼šæ•°æ®åº“åŠ å¯†ã€æ–‡ä»¶ç³»ç»ŸåŠ å¯†")]),t._v(" "),s("li",[t._v("ä¼ è¾“ä¸­æ•°æ®åŠ å¯†ï¼šTLS/SSLè¿æ¥")]),t._v(" "),s("li",[t._v("åº”ç”¨å±‚åŠ å¯†ï¼šæ•æ„Ÿæ•°æ®åœ¨åº”ç”¨å±‚é¢åŠ å¯†åå†å­˜å‚¨")])]),t._v(" "),s("h3",{attrs:{id:"_3-å®¡è®¡ä¸åˆè§„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å®¡è®¡ä¸åˆè§„"}},[t._v("#")]),t._v(" 3. å®¡è®¡ä¸åˆè§„")]),t._v(" "),s("ul",[s("li",[t._v("å¯ç”¨æ•°æ®åº“å®¡è®¡åŠŸèƒ½")]),t._v(" "),s("li",[t._v("è®°å½•æ‰€æœ‰å˜æ›´å’Œè®¿é—®")]),t._v(" "),s("li",[t._v("å®šæœŸå®¡æŸ¥å®¡è®¡æ—¥å¿—")]),t._v(" "),s("li",[t._v("ç¡®ä¿ç¬¦åˆè¡Œä¸šæ³•è§„(å¦‚GDPRã€HIPAAç­‰)")])]),t._v(" "),s("h2",{attrs:{id:"å®è·µæ¡ˆä¾‹-å°†æ•°æ®åº“è¿ç§»çº³å…¥ci-cdæµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µæ¡ˆä¾‹-å°†æ•°æ®åº“è¿ç§»çº³å…¥ci-cdæµç¨‹"}},[t._v("#")]),t._v(" å®è·µæ¡ˆä¾‹ï¼šå°†æ•°æ®åº“è¿ç§»çº³å…¥CI/CDæµç¨‹")]),t._v(" "),s("p",[t._v("è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…æ¡ˆä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•å°†æ•°æ®åº“è¿ç§»é›†æˆåˆ°CI/CDæµç¨‹ä¸­ã€‚")]),t._v(" "),s("h3",{attrs:{id:"å·¥å…·é“¾é€‰æ‹©"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å·¥å…·é“¾é€‰æ‹©"}},[t._v("#")]),t._v(" å·¥å…·é“¾é€‰æ‹©")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç‰ˆæœ¬æ§åˆ¶")]),t._v("ï¼šGit")]),t._v(" "),s("li",[s("strong",[t._v("è¿ç§»å·¥å…·")]),t._v("ï¼šLiquibase")]),t._v(" "),s("li",[s("strong",[t._v("CI/CD")]),t._v("ï¼šGitHub Actions")]),t._v(" "),s("li",[s("strong",[t._v("å®¹å™¨åŒ–")]),t._v("ï¼šDocker")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®åº“")]),t._v("ï¼šPostgreSQL")])]),t._v(" "),s("h3",{attrs:{id:"liquibaseé…ç½®ç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#liquibaseé…ç½®ç¤ºä¾‹"}},[t._v("#")]),t._v(" Liquibaseé…ç½®ç¤ºä¾‹")]),t._v(" "),s("p",[t._v("é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª"),s("code",[t._v("changelog")]),t._v("ç›®å½•æ¥å­˜å‚¨æ‰€æœ‰æ•°æ®åº“å˜æ›´ï¼š")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# changelog-master.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("databaseChangeLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("includeAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" changelog/\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªå…·ä½“çš„å˜æ›´æ–‡ä»¶ï¼š")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- changelog/20230128-create-users-table.xml --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("databaseChangeLog")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.liquibase.org/xml/ns/dbchangelog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.liquibase.org/xml/ns/dbchangelog\n         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("changeSet")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("author")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jorgen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("createTable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tableName")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("bigint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("autoIncrement")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constraints")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("primaryKey")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("nullable")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("varchar(50)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constraints")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("nullable")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("unique")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("email"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("varchar(100)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constraints")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("nullable")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("unique")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("column")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("created_at"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constraints")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("nullable")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("createTable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("changeSet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("databaseChangeLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("h3",{attrs:{id:"github-actionså·¥ä½œæµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actionså·¥ä½œæµ"}},[t._v("#")]),t._v(" GitHub Actionså·¥ä½œæµ")]),t._v(" "),s("p",[t._v("åˆ›å»ºä¸€ä¸ª"),s("code",[t._v(".github/workflows/database.yml")]),t._v("æ–‡ä»¶ï¼š")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Database CI/CD\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" main "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pull_request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" main "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("postgres")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("POSTGRES_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgres\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("health"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cmd pg_isready\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("health"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("interval 10s\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("health"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("timeout 5s\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("health"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("retries 5\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 5432"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5432")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Set up JDK 11\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("java@v2\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("java-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'11'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("distribution")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'temurin'")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cache Maven dependencies\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/cache@v2\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/.m2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hashFiles('"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**/pom.xml')")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restore-keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m2\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Run tests with database\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mvn test "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Dspring.profiles.active=test\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("postgresql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("5432/testdb\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_USERNAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgres\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgres\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("migrate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("needs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" test\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github.ref == 'refs/heads/main'\n\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Set up JDK 11\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("java@v2\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("java-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'11'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("distribution")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'temurin'")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cache Maven dependencies\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/cache@v2\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/.m2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hashFiles('"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**/pom.xml')")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restore-keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("m2\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Run database migration\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mvn liquibase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("update "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Dspring.profiles.active=prod\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_URL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_USERNAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_USERNAME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_PASSWORD "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br")])]),s("h3",{attrs:{id:"æ•°æ®åº“å›æ»šç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“å›æ»šç­–ç•¥"}},[t._v("#")]),t._v(" æ•°æ®åº“å›æ»šç­–ç•¥")]),t._v(" "),s("p",[t._v("å³ä½¿æœ‰å®Œå–„çš„æµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒä»å¯èƒ½å‡ºç°é—®é¢˜ã€‚å› æ­¤ï¼Œåˆ¶å®šå›æ»šç­–ç•¥è‡³å…³é‡è¦ï¼š")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Rollback database migration\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" failure()\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mvn liquibase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("rollback "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Dspring.profiles.active=prod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Dliquibase.rollbackCount=1\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_URL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_USERNAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_USERNAME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SPRING_DATASOURCE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.PROD_DB_PASSWORD "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"æ•°æ®åº“ç›‘æ§ä¸å¯è§‚æµ‹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“ç›‘æ§ä¸å¯è§‚æµ‹æ€§"}},[t._v("#")]),t._v(" æ•°æ®åº“ç›‘æ§ä¸å¯è§‚æµ‹æ€§")]),t._v(" "),s("p",[t._v("å°†æ•°æ®åº“ç®¡ç†çº³å…¥DevOpsåï¼Œè¿˜éœ€è¦å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œç¡®ä¿æ•°æ®åº“çš„å¥åº·å’Œæ€§èƒ½ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-å…³é”®æŒ‡æ ‡ç›‘æ§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…³é”®æŒ‡æ ‡ç›‘æ§"}},[t._v("#")]),t._v(" 1. å…³é”®æŒ‡æ ‡ç›‘æ§")]),t._v(" "),s("p",[t._v("ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„æ•°æ®åº“æŒ‡æ ‡ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è¿æ¥æ•°")]),t._v("ï¼šç›‘æ§æ´»è·ƒè¿æ¥æ•°ï¼Œé¿å…è¿æ¥è€—å°½")]),t._v(" "),s("li",[s("strong",[t._v("æŸ¥è¯¢æ€§èƒ½")]),t._v("ï¼šæ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆ")]),t._v(" "),s("li",[s("strong",[t._v("ç£ç›˜ç©ºé—´")]),t._v("ï¼šç›‘æ§æ•°æ®æ–‡ä»¶å¤§å°ï¼Œé˜²æ­¢ç©ºé—´ä¸è¶³")]),t._v(" "),s("li",[s("strong",[t._v("é”ç­‰å¾…")]),t._v("ï¼šç›‘æ§é”ç­‰å¾…æƒ…å†µï¼Œé¿å…æ­»é”")]),t._v(" "),s("li",[s("strong",[t._v("å¤åˆ¶å»¶è¿Ÿ")]),t._v("ï¼šå¯¹äºä¸»ä»æ¶æ„ï¼Œç›‘æ§å¤åˆ¶å»¶è¿Ÿ")])]),t._v(" "),s("h3",{attrs:{id:"_2-æ—¥å¿—èšåˆä¸åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ—¥å¿—èšåˆä¸åˆ†æ"}},[t._v("#")]),t._v(" 2. æ—¥å¿—èšåˆä¸åˆ†æ")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨ELK(Elasticsearch, Logstash, Kibana)æˆ–EFK(Elasticsearch, Fluentd, Kibana)æ ˆ")]),t._v(" "),s("li",[t._v("é›†ä¸­æ”¶é›†å’Œåˆ†ææ•°æ®åº“æ—¥å¿—")]),t._v(" "),s("li",[t._v("è®¾ç½®å‘Šè­¦è§„åˆ™ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸")])]),t._v(" "),s("h3",{attrs:{id:"_3-æ•°æ®åº“å¥åº·æ£€æŸ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ•°æ®åº“å¥åº·æ£€æŸ¥"}},[t._v("#")]),t._v(" 3. æ•°æ®åº“å¥åº·æ£€æŸ¥")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šPrometheusæ•°æ®åº“ç›‘æ§æŒ‡æ ‡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# postgres_up{instance="db:5432"} 1')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# postgres_pg_stat_database_numbackends{datname="app"} 5')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# postgres_pg_stat_database_xact_commit{datname="app"} 1234')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# postgres_pg_stat_database_xact_rollback{datname="app"} 2')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"æ•°æ®åº“å¤‡ä»½ä¸ç¾éš¾æ¢å¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“å¤‡ä»½ä¸ç¾éš¾æ¢å¤"}},[t._v("#")]),t._v(" æ•°æ®åº“å¤‡ä»½ä¸ç¾éš¾æ¢å¤")]),t._v(" "),s("p",[t._v("è‡ªåŠ¨åŒ–å¤‡ä»½æ˜¯DevOpsæ•°æ®åº“ç®¡ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_1-å¤‡ä»½ç­–ç•¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¤‡ä»½ç­–ç•¥"}},[t._v("#")]),t._v(" 1. å¤‡ä»½ç­–ç•¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®šæœŸå…¨é‡å¤‡ä»½")]),t._v("ï¼šæ¯å¤©æˆ–æ¯å‘¨è¿›è¡Œå®Œæ•´å¤‡ä»½")]),t._v(" "),s("li",[s("strong",[t._v("å¢é‡å¤‡ä»½")]),t._v("ï¼šåœ¨ä¸¤æ¬¡å…¨é‡å¤‡ä»½ä¹‹é—´è¿›è¡Œå¢é‡å¤‡ä»½")]),t._v(" "),s("li",[s("strong",[t._v("äº‹åŠ¡æ—¥å¿—å¤‡ä»½")]),t._v("ï¼šå¯¹äºæ”¯æŒæ—¶é—´ç‚¹æ¢å¤çš„æ•°æ®åº“")])]),t._v(" "),s("h3",{attrs:{id:"_2-å¤‡ä»½éªŒè¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¤‡ä»½éªŒè¯"}},[t._v("#")]),t._v(" 2. å¤‡ä»½éªŒè¯")]),t._v(" "),s("p",[t._v("å®šæœŸæµ‹è¯•å¤‡ä»½çš„å¯ç”¨æ€§å’Œå®Œæ•´æ€§ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¤ºä¾‹ï¼šPostgreSQLå¤‡ä»½éªŒè¯è„šæœ¬")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BACKUP_FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/backups/postgresql/'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" +%Y%m%d"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('.sqlc"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RESTORE_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/restore_test"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ›å»ºä¸´æ—¶ç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RESTORE_DIR")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è§£å‹å¤‡ä»½æ–‡ä»¶")]),t._v("\npg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RESTORE_DIR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-F")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BACKUP_FILE")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# éªŒè¯è¡¨æ•°é‡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ORIGINAL_COUNT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SELECT COUNT(*) FROM information_schema.tables WHERE table_schema='public';\"")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RESTORED_COUNT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" $RESTORE_DIR "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SELECT COUNT(*) FROM information_schema.tables WHERE table_schema='public';\"")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ORIGINAL_COUNT")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-eq")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RESTORED_COUNT")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Backup verification successful"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Backup verification failed"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("h3",{attrs:{id:"_3-ç¾éš¾æ¢å¤æ¼”ç»ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¾éš¾æ¢å¤æ¼”ç»ƒ"}},[t._v("#")]),t._v(" 3. ç¾éš¾æ¢å¤æ¼”ç»ƒ")]),t._v(" "),s("p",[t._v("å®šæœŸè¿›è¡Œç¾éš¾æ¢å¤æ¼”ç»ƒï¼Œç¡®ä¿å¤‡ä»½ç­–ç•¥çš„æœ‰æ•ˆæ€§ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("æ¨¡æ‹Ÿæ•°æ®åº“æ•…éšœ")]),t._v(" "),s("li",[t._v("ä»å¤‡ä»½æ¢å¤æ•°æ®åº“")]),t._v(" "),s("li",[t._v("éªŒè¯æ•°æ®å®Œæ•´æ€§")]),t._v(" "),s("li",[t._v("æµ‹è¯•åº”ç”¨è¿æ¥")]),t._v(" "),s("li",[t._v("è®°å½•æ¢å¤æ—¶é—´å’Œæ•°æ®ä¸¢å¤±æƒ…å†µ")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v("å°†æ•°æ®ç®¡ç†çº³å…¥DevOpså®è·µæ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ï¼Œéœ€è¦å›¢é˜Ÿçš„å…±åŒåŠªåŠ›å’ŒæŒç»­æ”¹è¿›ã€‚ğŸ— é€šè¿‡æ•°æ®åº“å³ä»£ç (DBaC)çš„å®è·µï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ•°æ®åº“å˜æ›´çš„è‡ªåŠ¨åŒ–ã€å¯é‡å¤å’Œå¯æµ‹è¯•ï¼Œä»è€Œæé«˜æ•´ä¸ªDevOpsæµç¨‹çš„æ•ˆç‡å’Œè´¨é‡ã€‚")]),t._v(" "),s("p",[t._v("è®°ä½ï¼Œæ•°æ®æ˜¯åº”ç”¨çš„æ ¸å¿ƒèµ„äº§ï¼ŒæŠ•èµ„äºæ•°æ®ç®¡ç†å°±æ˜¯æŠ•èµ„äºåº”ç”¨çš„é•¿æœŸå¥åº·å’ŒæˆåŠŸã€‚"),s("s",[t._v('ä¸è¦è®©æ•°æ®åº“æˆä¸ºDevOpså®è·µä¸­çš„"å­¤å„¿"')]),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ•°æ®ç®¡ç†ä¸æ˜¯DevOpsçš„é™„åŠ åŠŸèƒ½ï¼Œè€Œæ˜¯å…¶æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚åªæœ‰å°†æ•°æ®åº“ä¸åº”ç”¨ç¨‹åºåŒç­‰å¯¹å¾…ï¼Œæ‰èƒ½çœŸæ­£å®ç°å…¨é¢è‡ªåŠ¨åŒ–çš„DevOpså®è·µã€‚")])]),t._v(" "),s("p",[t._v("å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ä¸ºä½ çš„DevOpsä¹‹æ—…æä¾›ä¸€äº›å¯å‘å’ŒæŒ‡å¯¼ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–ç»éªŒåˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š")])])}),[],!1,null,null,null);s.default=e.exports}}]);