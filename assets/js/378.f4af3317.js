(window.webpackJsonp=window.webpackJsonp||[]).push([[378],{731:function(a,e,t){"use strict";t.r(e);var s=t(15),n=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("advantage")]),a._v(" "),e("h2",{attrs:{id:"container-advantage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#container-advantage"}},[a._v("#")]),a._v(" container advantage")])]),a._v(" "),e("ol",[e("li",[a._v("easy to develop")]),a._v(" "),e("li",[a._v("easy to deploy")])]),a._v(" "),e("h2",{attrs:{id:"what-is-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-is-container"}},[a._v("#")]),a._v(" What is containerï¼Ÿ")]),a._v(" "),e("ol",[e("li",[a._v("Layers of imagesï¼šonly different layers are downloaded")]),a._v(" "),e("li",[a._v("Mostly Linux Base Image, small in size")]),a._v(" "),e("li",[a._v("Application image on top")])]),a._v(" "),e("h2",{attrs:{id:"difference-between-docker-image-and-docker-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#difference-between-docker-image-and-docker-container"}},[a._v("#")]),a._v(" Difference between Docker Image and Docker Container?")]),a._v(" "),e("p",[e("strong",[a._v("Docker Image")])]),a._v(" "),e("ol",[e("li",[a._v("the actual package")]),a._v(" "),e("li",[a._v("artifactï¼Œthat can be moved around")]),a._v(" "),e("li",[e("strong",[a._v("not running")])])]),a._v(" "),e("p",[e("strong",[a._v("Docker Container")])]),a._v(" "),e("ol",[e("li",[a._v("actually start the application")]),a._v(" "),e("li",[a._v("container environment is created")]),a._v(" "),e("li",[e("strong",[a._v("running")])])]),a._v(" "),e("h2",{attrs:{id:"docker-vs-virtual-machine"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-vs-virtual-machine"}},[a._v("#")]),a._v(" Docker vs Virtual Machine")]),a._v(" "),e("p",[a._v("Application  â€” OS Kernel â€” Hardware")]),a._v(" "),e("p",[e("strong",[a._v("Docker")])]),a._v(" "),e("ol",[e("li",[a._v("Application layer, it uses host OS Kernel")]),a._v(" "),e("li",[a._v("docker imageâ€™s size smaller than VM")]),a._v(" "),e("li",[a._v("running speed faster")])]),a._v(" "),e("p",[a._v("Virtual Machine")]),a._v(" "),e("ol",[e("li",[a._v("Both Application And its own OS kernel.")]),a._v(" "),e("li",[a._v("good Compatibility  than Docker")])]),a._v(" "),e("h2",{attrs:{id:"installing-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installing-docker"}},[a._v("#")]),a._v(" Installing Docker")]),a._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://docs.docker.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("doc url"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("pre-requirement")]),a._v(" "),e("li",[a._v("docker-toolbox that brige enable OS to run docker")])]),a._v(" "),e("h2",{attrs:{id:"common-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#common-command"}},[a._v("#")]),a._v(" Common Command")]),a._v(" "),e("ol",[e("li",[a._v("docker pull [name]:[version] if no version, then will get the latest version.")]),a._v(" "),e("li",[a._v("docket images : show list images you have pulled")]),a._v(" "),e("li",[a._v("docker run [xxx]: to run an image ; -d daemon; -p bind host port to container port. â€”nameï¼šspecify a name.")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p6000:6379")]),a._v(" â€”name redis redis\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ol",[e("li",[a._v("docker ps : show you have running containers; -a: show history you have running.")]),a._v(" "),e("li",[a._v("docker stop [containerId]ï¼šgracelly stop the running container.")])]),a._v(" "),e("h2",{attrs:{id:"debug-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#debug-docker"}},[a._v("#")]),a._v(" Debug docker")]),a._v(" "),e("ol",[e("li",[a._v("docker log [containerId]/[container name]ï¼šshow logs when docker running an images.")]),a._v(" "),e("li",[a._v("docker exec "),e("strong",[a._v("-it(inside terminal")]),a._v(") [containerId/containerName] /bin/bashï¼šcheck running containerâ€™s running state")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" log redis\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" redis /biin/bash\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("docker run vs docker start")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run: create a new container\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start: restart a stopped container\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[a._v("#")]),a._v(" Docker compose")]),a._v(" "),e("ol",[e("li",[a._v("specify the docker run command in yaml file.")]),a._v(" "),e("li",[a._v("every config can map to the docker run command")])]),a._v(" "),e("h2",{attrs:{id:"docker-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-file"}},[a._v("#")]),a._v(" Docker file")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9ec00ae4-db40-4e66-a296-151b89e04785/Untitled.png",alt:"Untitled"}})]),a._v(" "),e("ol",[e("li",[a._v("start by basing it on another image")]),a._v(" "),e("li",[a._v("optionally define environment variablesï¼ˆrecommendï¼‰")]),a._v(" "),e("li",[a._v("run â€” execute any linux command")]),a._v(" "),e("li",[a._v("copy â€” execute command on the HOST machine")]),a._v(" "),e("li",[a._v("CMD[â€nodeâ€ , â€œserver.jsâ€] â€” execute node server.js command")])]),a._v(" "),e("ul",[e("li",[a._v("CMD = entrypoint command")]),a._v(" "),e("li",[a._v("docker file is blueprint of any docker image, that means any docker image is on the docker hub should be built on its own docker file.")]),a._v(" "),e("li",[a._v("when you "),e("strong",[a._v("adjust")]),a._v(" the Dockerfile, you "),e("strong",[a._v("MUST")]),a._v(" rebuild the "),e("strong",[a._v("Image")])])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" name:tag\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"docker-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-registry"}},[a._v("#")]),a._v(" docker registry")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/347d714d-3630-44a7-a9da-47279718c456/Untitled.png",alt:"Untitled"}})]),a._v(" "),e("p",[a._v("author use A.W.S for example.")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" tag name:tage  xxx/cloudserver/name:tag  -- é‡å‘½å\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" push xxx/cloudserver/name:tag            -- æ¨é€docker to "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" repository     \n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"deploy-containered-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-containered-image"}},[a._v("#")]),a._v(" Deploy containered image")]),a._v(" "),e("p",[a._v("The Server needs to login to pull from "),e("strong",[a._v("PRIVETE")]),a._v(" repositoryï¼›Login not needed for "),e("strong",[a._v("PUBLIC")]),a._v(" DockerHub.")]),a._v(" "),e("h2",{attrs:{id:"docker-volumes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-volumes"}},[a._v("#")]),a._v(" Docker Volumes")]),a._v(" "),e("p",[e("strong",[a._v("When do we need Docker Volumes?")])]),a._v(" "),e("p",[a._v("Data is gone! When restarting or removing the container. The container has virtual file system which is mapping the hostâ€™s physical file system.")]),a._v(" "),e("p",[e("strong",[a._v("3 Volume Types")])]),a._v(" "),e("ol",[e("li",[a._v("Host Volumeï¼šyou decide "),e("strong",[a._v("where on the host file system")]),a._v(" the reference is made.")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("dir")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" container "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("dir")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("Anonymous Volumesï¼šfor each container a folder is generated that gets mounted.")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/lib/mysql/data --"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /var/lib/docker/volumes/random-hash/_data\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[a._v("Named Volumesï¼šyou can "),e("strong",[a._v("reference")]),a._v(" the volume by "),e("strong",[a._v("name")]),a._v("; ï¼ˆğŸ‘ğŸ‘ğŸ‘ï¼‰")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" name:/var/lib/mysql/data\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"how-to-use-it-to-persite-docker-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-it-to-persite-docker-data"}},[a._v("#")]),a._v(" how to use it to persite docker data?")]),a._v(" "),e("ol",[e("li",[a._v("config it on docker-compose.yaml")])]),a._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[a._v("version"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'3'")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" \n\t"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mongodb")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("images")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" mongo\n\t"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" 27017"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("27017")]),a._v("\n\t"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" mongo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/data/db "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mysql:var/lib/mysql / postgres")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" var/lib/postgresql/data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  xxx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("other config\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n\t"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mongo-data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n\t"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("driver")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" local\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[a._v("Docker Volume Locations\n"),e("ol",[e("li",[a._v("Windowsï¼šC:\\ProgramData\\docker\\volumes")]),a._v(" "),e("li",[a._v("Linuxï¼š/var/lib/docker/volumes")]),a._v(" "),e("li",[a._v("Macï¼š/var/lib/docker/volumes")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);