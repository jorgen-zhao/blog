(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{625:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨æµå¤„ç†çš„ä¸–ç•Œé‡Œï¼Œæ•°æ®ä¸ä¸¢å¤±ä¸”è®¡ç®—ç»“æœæ­£ç¡®æ˜¯åŸºæœ¬è¦æ±‚ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„é“¶è¡Œäº¤æ˜“ç³»ç»Ÿå› ä¸ºç½‘ç»œæ³¢åŠ¨è€Œä¸¢å¤±äº†ä¸€ç¬”è½¬è´¦è®°å½•ï¼Œé‚£åæœä¸å ªè®¾æƒ³ï¼ğŸ¤¯ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆçŠ¶æ€ç®¡ç†å’Œå®¹é”™æœºåˆ¶åœ¨Flinkä¸­å¦‚æ­¤é‡è¦çš„åŸå› ã€‚")]),t._v(" "),s("p",[t._v("åœ¨æˆ‘ä¹‹å‰çš„Flinkç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†Flinkçš„åŸºæœ¬æ¶æ„å’Œé…ç½®ï¼Œä½†è¿˜æ²¡æœ‰æ·±å…¥æ¢è®¨Flinkå¦‚ä½•ä¿è¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦å¤§å®¶ä¸€èµ·æ¢ç´¢Flinkçš„çŠ¶æ€ç®¡ç†ä¸å®¹é”™æœºåˆ¶ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•æ„å»ºå¯é çš„æ•°æ®å¤„ç†ç®¡é“çš„ã€‚")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v("çŠ¶æ€ç®¡ç†æ˜¯æµå¤„ç†æ¡†æ¶çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œå®¹é”™æœºåˆ¶åˆ™æ˜¯ä¿è¯ç³»ç»Ÿå¯é æ€§çš„åŸºçŸ³ã€‚ç†è§£è¿™ä¸¤è€…å¯¹äºæ„å»ºç”Ÿäº§çº§çš„Flinkåº”ç”¨è‡³å…³é‡è¦ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†ï¼Ÿ")]),t._v(" "),s("p",[t._v("åœ¨æµå¤„ç†åº”ç”¨ä¸­ï¼ŒçŠ¶æ€(State)æ˜¯æŒ‡ç®—å­ä¸ºäº†å¤„ç†è¿ç»­äº‹ä»¶è€Œéœ€è¦ç»´æŠ¤çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œè®¡ç®—çª—å£å†…å¹³å‡å€¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜å½“å‰çª—å£çš„å’Œä¸è®¡æ•°ï¼›æˆ–è€…æ£€æµ‹ç”¨æˆ·è¡Œä¸ºæ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•ç”¨æˆ·çš„å†å²è¡Œä¸ºã€‚")]),t._v(" "),s("h3",{attrs:{id:"çŠ¶æ€ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç±»å‹"}},[t._v("#")]),t._v(" çŠ¶æ€ç±»å‹")]),t._v(" "),s("p",[t._v("Flinkä¸»è¦æ”¯æŒä¸¤ç§ç±»å‹çš„çŠ¶æ€ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("æ‰˜ç®¡çŠ¶æ€(Managed State)")])]),t._v(" "),s("ul",[s("li",[t._v("ç”±Flink runtimeç®¡ç†ï¼Œå­˜å‚¨åœ¨Flinkå†…éƒ¨çš„æ•°æ®ç»“æ„ä¸­")]),t._v(" "),s("li",[t._v("å…·æœ‰æ›´å¥½çš„å¯ç§»æ¤æ€§å’Œä¼˜åŒ–èƒ½åŠ›")]),t._v(" "),s("li",[t._v("åŒ…æ‹¬ï¼šValueStateã€ListStateã€MapStateã€ReducingStateã€AggregatingStateç­‰")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åŸå§‹çŠ¶æ€(Raw State)")])]),t._v(" "),s("ul",[s("li",[t._v("ç”±ç”¨æˆ·è‡ªå·±ç®¡ç†ï¼Œå­˜å‚¨åœ¨ä»»æ„æ•°æ®ç»“æ„ä¸­")]),t._v(" "),s("li",[t._v("Flinkä»…å°†çŠ¶æ€æ•°æ®ä½œä¸ºå­—èŠ‚æ•°ç»„è¿›è¡ŒæŒä¹…åŒ–å’Œæ¢å¤")]),t._v(" "),s("li",[t._v("å…·æœ‰æ›´é«˜çš„çµæ´»æ€§ï¼Œä½†å¯ç§»æ¤æ€§è¾ƒå·®")])])])]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("æ‰˜ç®¡çŠ¶æ€æ˜¯Flinkæ¨èä½¿ç”¨çš„æ–¹å¼ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿæ›´å¥½åœ°ä¸Flinkçš„æ£€æŸ¥ç‚¹æœºåˆ¶é›†æˆï¼Œå¹¶ä¸”Flinkå¯ä»¥å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚")])]),s("h3",{attrs:{id:"çŠ¶æ€åç«¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€åç«¯"}},[t._v("#")]),t._v(" çŠ¶æ€åç«¯")]),t._v(" "),s("p",[t._v("çŠ¶æ€åç«¯(State Backend)å†³å®šäº†çŠ¶æ€æ•°æ®çš„å­˜å‚¨æ–¹å¼å’Œä½ç½®ã€‚Flinkæä¾›äº†ä¸‰ç§å†…ç½®çš„çŠ¶æ€åç«¯ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("MemoryStateBackend")])]),t._v(" "),s("ul",[s("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨TaskManagerçš„å†…å­˜ä¸­")]),t._v(" "),s("li",[t._v("é€‚åˆå°è§„æ¨¡çŠ¶æ€å’Œå¿«é€Ÿå¤„ç†")]),t._v(" "),s("li",[t._v("ä¸æ”¯æŒæ£€æŸ¥ç‚¹æŒä¹…åŒ–ï¼ˆä»…ä¿å­˜åˆ°JobManagerå†…å­˜ï¼‰")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("FsStateBackend")])]),t._v(" "),s("ul",[s("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨TaskManagerå†…å­˜ä¸­ï¼Œä½†æ£€æŸ¥ç‚¹ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­")]),t._v(" "),s("li",[t._v("é€‚åˆå¤§è§„æ¨¡çŠ¶æ€å’Œéœ€è¦å®¹é”™çš„åœºæ™¯")]),t._v(" "),s("li",[t._v("æ£€æŸ¥ç‚¹æ¢å¤æ—¶éœ€è¦ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½çŠ¶æ€")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("RocksDBStateBackend")])]),t._v(" "),s("ul",[s("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨RocksDBæ•°æ®åº“ä¸­ï¼ˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼‰")]),t._v(" "),s("li",[t._v("é€‚åˆè¶…å¤§è§„æ¨¡çŠ¶æ€")]),t._v(" "),s("li",[t._v("æ”¯æŒå¢é‡æ£€æŸ¥ç‚¹ï¼Œå‡å°‘æ£€æŸ¥ç‚¹æ—¶é—´")])])])]),t._v(" "),s("h2",{attrs:{id:"å®¹é”™æœºåˆ¶ä¸æ£€æŸ¥ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®¹é”™æœºåˆ¶ä¸æ£€æŸ¥ç‚¹"}},[t._v("#")]),t._v(" å®¹é”™æœºåˆ¶ä¸æ£€æŸ¥ç‚¹")]),t._v(" "),s("p",[t._v("Flinké€šè¿‡åˆ†å¸ƒå¼å¿«ç…§æŠ€æœ¯å®ç°å®¹é”™ï¼Œæ ¸å¿ƒæœºåˆ¶æ˜¯"),s("strong",[t._v("æ£€æŸ¥ç‚¹(Checkpoint)")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"æ£€æŸ¥ç‚¹åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥ç‚¹åŸç†"}},[t._v("#")]),t._v(" æ£€æŸ¥ç‚¹åŸç†")]),t._v(" "),s("p",[t._v("Flinkçš„æ£€æŸ¥ç‚¹æœºåˆ¶åŸºäºChandy-Lamportç®—æ³•çš„å˜ç§ï¼Œä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("æ£€æŸ¥ç‚¹åè°ƒå™¨(Coordinator)å¯åŠ¨æ£€æŸ¥ç‚¹")]),t._v("ï¼šJobManagerä¸­çš„æ£€æŸ¥ç‚¹åè°ƒå™¨å‘æ‰€æœ‰Sourceç®—å­å‘é€ barriersï¼ˆå±éšœï¼‰")]),t._v(" "),s("li",[t._v("** barriersä¼ æ’­**ï¼šbarriersåœ¨ç®—å­é—´ä¼ é€’ï¼Œç¡®ä¿æ¯ä¸ªç®—å­å¤„ç†å®Œbarrierä¹‹å‰çš„æ•°æ®åæ‰ä¼šç»§ç»­å¤„ç†barrierä¹‹åçš„æ•°æ®")]),t._v(" "),s("li",[s("strong",[t._v("çŠ¶æ€å¿«ç…§")]),t._v("ï¼šå½“ç®—å­æ¥æ”¶åˆ°barrieræ—¶ï¼Œä¼šå°†è‡ªå·±çš„çŠ¶æ€ä¿å­˜åˆ°æŒä¹…åŒ–å­˜å‚¨ä¸­")]),t._v(" "),s("li",[s("strong",[t._v("ç¡®è®¤é€šçŸ¥")]),t._v("ï¼šç®—å­å®ŒæˆçŠ¶æ€å¿«ç…§åï¼Œå‘åè°ƒå™¨å‘é€ç¡®è®¤")]),t._v(" "),s("li",[s("strong",[t._v("å®Œæˆæ£€æŸ¥ç‚¹")]),t._v("ï¼šå½“æ‰€æœ‰ç®—å­éƒ½ç¡®è®¤å®Œæˆï¼Œåè°ƒå™¨è®¤ä¸ºæ£€æŸ¥ç‚¹æˆåŠŸ")])]),t._v(" "),s("div",{staticClass:"language-mermaid line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\n    A"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Sourceç®—å­]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|Barrier|")]),t._v(" B"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Transformationç®—å­1]")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|Barrier|")]),t._v(" C"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Transformationç®—å­2]")]),t._v("\n    C "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|Barrier|")]),t._v(" D"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Sinkç®—å­]")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|çŠ¶æ€å¿«ç…§|")]),t._v(" E"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[æŒä¹…åŒ–å­˜å‚¨]")]),t._v("\n    C "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),s("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|çŠ¶æ€å¿«ç…§|")]),t._v(" E\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"æ£€æŸ¥ç‚¹é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥ç‚¹é…ç½®"}},[t._v("#")]),t._v(" æ£€æŸ¥ç‚¹é…ç½®")]),t._v(" "),s("p",[t._v("åœ¨Flinkä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®æ£€æŸ¥ç‚¹ï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼€å¯æ£€æŸ¥ç‚¹å¹¶è®¾ç½®é—´éš”")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableCheckpointing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯5ç§’è¿›è¡Œä¸€æ¬¡æ£€æŸ¥ç‚¹")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é«˜çº§é…ç½®")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXACTLY_ONCE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMinPauseBetweenCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€å°é—´éš”")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCheckpointTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¶…æ—¶æ—¶é—´")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxConcurrentCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€å¤§å¹¶å‘æ•°")]),t._v("\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableExternalizedCheckpoints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckpointConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ExternalizedCheckpointCleanup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RETAIN_ON_CANCELLATION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–æ¶ˆä½œä¸šæ—¶ä¿ç•™æ£€æŸ¥ç‚¹")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"æ£€æŸ¥ç‚¹æ¢å¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥ç‚¹æ¢å¤"}},[t._v("#")]),t._v(" æ£€æŸ¥ç‚¹æ¢å¤")]),t._v(" "),s("p",[t._v("å½“ä½œä¸šå¤±è´¥æ—¶ï¼ŒFlinkå¯ä»¥é€šè¿‡æœ€è¿‘çš„æ£€æŸ¥ç‚¹æ¢å¤ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("JobManageré€šçŸ¥æ‰€æœ‰ç®—å­åœæ­¢å¤„ç†æ•°æ®")]),t._v(" "),s("li",[t._v("ç®—å­ä»æŒä¹…åŒ–å­˜å‚¨ä¸­åŠ è½½æœ€è¿‘ä¸€æ¬¡æˆåŠŸæ£€æŸ¥ç‚¹çš„çŠ¶æ€")]),t._v(" "),s("li",[t._v("Sourceç®—å­ä»æ£€æŸ¥ç‚¹ä¿å­˜çš„ä½ç½®é‡æ–°è¯»å–æ•°æ®")]),t._v(" "),s("li",[t._v("ç®—å­ä»ä¿å­˜çš„offsetç»§ç»­å¤„ç†æ•°æ®")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),s("p",[t._v('æ£€æŸ¥ç‚¹æœºåˆ¶ç¡®ä¿äº†Flinkåº”ç”¨èƒ½å¤Ÿä»æ•…éšœä¸­æ¢å¤ï¼Œå¹¶ä¿æŒ"ç²¾ç¡®ä¸€æ¬¡"(Exactly-Once)çš„å¤„ç†è¯­ä¹‰ã€‚')])]),t._v(" "),s("h2",{attrs:{id:"é«˜çº§å®¹é”™æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é«˜çº§å®¹é”™æœºåˆ¶"}},[t._v("#")]),t._v(" é«˜çº§å®¹é”™æœºåˆ¶")]),t._v(" "),s("p",[t._v("é™¤äº†åŸºæœ¬çš„æ£€æŸ¥ç‚¹æœºåˆ¶ï¼ŒFlinkè¿˜æä¾›äº†ä¸€äº›é«˜çº§å®¹é”™ç‰¹æ€§ï¼š")]),t._v(" "),s("h3",{attrs:{id:"ä¿å­˜ç‚¹-savepoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¿å­˜ç‚¹-savepoints"}},[t._v("#")]),t._v(" ä¿å­˜ç‚¹(Savepoints)")]),t._v(" "),s("p",[t._v("ä¿å­˜ç‚¹æ˜¯æ£€æŸ¥ç‚¹çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç”±ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼Œä¸å—è‡ªåŠ¨æ£€æŸ¥ç‚¹é—´éš”é™åˆ¶")]),t._v(" "),s("li",[t._v("ä¸ä¾èµ–äºä½œä¸šçš„åœæ­¢å’Œé‡å¯")]),t._v(" "),s("li",[t._v("å¯ä»¥ç”¨äºä½œä¸šå‡çº§ã€è¿ç§»æˆ–A/Bæµ‹è¯•")])]),t._v(" "),s("p",[t._v("åˆ›å»ºä¿å­˜ç‚¹ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("flink savepoints "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("jobId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("targetDirectory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"ä¸¤é˜¶æ®µæäº¤-two-phase-commit-2pc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¤é˜¶æ®µæäº¤-two-phase-commit-2pc"}},[t._v("#")]),t._v(" ä¸¤é˜¶æ®µæäº¤(Two-Phase Commit, 2PC)")]),t._v(" "),s("p",[t._v("å¯¹äºéœ€è¦ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰çš„å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚Kafkaã€JDBCç­‰ï¼‰ï¼ŒFlinkæ”¯æŒä¸¤é˜¶æ®µæäº¤æœºåˆ¶ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("é¢„æäº¤(Pre-commit)")]),t._v("ï¼šç®—å­å°†äº‹åŠ¡æ—¥å¿—å†™å…¥æ£€æŸ¥ç‚¹ï¼Œä½†ä¸æäº¤å®é™…æ“ä½œ")]),t._v(" "),s("li",[s("strong",[t._v("æäº¤(Commit)")]),t._v("ï¼šæ£€æŸ¥ç‚¹æˆåŠŸå®Œæˆåï¼Œç®—å­æäº¤æ‰€æœ‰äº‹åŠ¡")])]),t._v(" "),s("p",[t._v("å®ç°ä¸¤é˜¶æ®µæäº¤éœ€è¦å®ç°"),s("code",[t._v("TwoPhaseCommitSinkFunction")]),t._v("æ¥å£ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ç«¯åˆ°ç«¯ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç«¯åˆ°ç«¯ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰"}},[t._v("#")]),t._v(" ç«¯åˆ°ç«¯ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰")]),t._v(" "),s("p",[t._v("Flinké€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°ç«¯åˆ°ç«¯çš„ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("æº(Source)")]),t._v("ï¼šå¯é‡ç½®åç§»é‡çš„æºï¼ˆå¦‚Kafkaï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("Flinkå†…éƒ¨")]),t._v("ï¼šæ£€æŸ¥ç‚¹æœºåˆ¶")]),t._v(" "),s("li",[s("strong",[t._v("æ±‡(Sink)")]),t._v("ï¼šæ”¯æŒä¸¤é˜¶æ®µæäº¤çš„æ±‡ï¼ˆå¦‚Kafkaã€å…³ç³»å‹æ•°æ®åº“ï¼‰")])]),t._v(" "),s("h2",{attrs:{id:"å®æˆ˜ç¤ºä¾‹-çŠ¶æ€ç®¡ç†ä¸æ£€æŸ¥ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ç¤ºä¾‹-çŠ¶æ€ç®¡ç†ä¸æ£€æŸ¥ç‚¹"}},[t._v("#")]),t._v(" å®æˆ˜ç¤ºä¾‹ï¼šçŠ¶æ€ç®¡ç†ä¸æ£€æŸ¥ç‚¹")]),t._v(" "),s("p",[t._v("ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥å±•ç¤ºå¦‚ä½•åœ¨Flinkä¸­ä½¿ç”¨çŠ¶æ€ç®¡ç†å’Œæ£€æŸ¥ç‚¹ï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StateManagementExample")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºæ‰§è¡Œç¯å¢ƒ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨æ£€æŸ¥ç‚¹")]),t._v("\n        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableCheckpointing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯5ç§’ä¸€æ¬¡æ£€æŸ¥ç‚¹")]),t._v("\n        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckpointConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckpointingMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXACTLY_ONCE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»Kafkaè¯»å–æ•°æ®")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bootstrap.servers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9092"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group.id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"state-example"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataStream")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" stream "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlinkKafkaConsumer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input-topic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleStringSchema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kafka-source"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨KeyedStateè¿›è¡ŒçŠ¶æ€ç®¡ç†")]),t._v("\n        stream\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‰ç¬¬ä¸€ä¸ªå­—æ®µåˆ†ç»„")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KeyedProcessFunction")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueState")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" countState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                \n                "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),t._v(" parameters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–çŠ¶æ€")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueStateDescriptor")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" descriptor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueStateDescriptor")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    countState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntimeContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descriptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                \n                "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Context")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collector")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰çŠ¶æ€")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" currentCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" countState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        currentCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    \n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°çŠ¶æ€")]),t._v("\n                    currentCount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    countState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    \n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡ºç»“æœ")]),t._v("\n                    out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Key: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", Count: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" currentCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyed-process"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œä½œä¸š")]),t._v("\n        env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"State Management Example"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br")])]),s("h2",{attrs:{id:"æ€§èƒ½ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½ä¼˜åŒ–"}},[t._v("#")]),t._v(" æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),s("p",[t._v("åœ¨çŠ¶æ€ç®¡ç†å’Œå®¹é”™æœºåˆ¶æ–¹é¢ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("çŠ¶æ€åç«¯é€‰æ‹©")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å°è§„æ¨¡çŠ¶æ€ï¼šMemoryStateBackend")]),t._v(" "),s("li",[t._v("å¤§è§„æ¨¡çŠ¶æ€ï¼šRocksDBStateBackend")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ£€æŸ¥ç‚¹é…ç½®ä¼˜åŒ–")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("è°ƒæ•´æ£€æŸ¥ç‚¹é—´éš”ï¼Œé¿å…è¿‡äºé¢‘ç¹æˆ–è¿‡äºç¨€ç–")]),t._v(" "),s("li",[t._v("å¢åŠ æ£€æŸ¥ç‚¹è¶…æ—¶æ—¶é—´ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿæ—¶é—´å®Œæˆ")]),t._v(" "),s("li",[t._v("ä½¿ç”¨å¢é‡æ£€æŸ¥ç‚¹å‡å°‘æ£€æŸ¥ç‚¹æ—¶é—´")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("çŠ¶æ€è®¿é—®ä¼˜åŒ–")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é¿å…åœ¨æ¯æ¡è®°å½•ä¸­è®¿é—®çŠ¶æ€")]),t._v(" "),s("li",[t._v("æ‰¹é‡è®¿é—®çŠ¶æ€å‡å°‘ç½‘ç»œå¼€é”€")]),t._v(" "),s("li",[t._v("åˆç†è®¾è®¡çŠ¶æ€ç»“æ„ï¼Œå‡å°‘çŠ¶æ€å¤§å°")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¼‚æ­¥å¿«ç…§")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¯ç”¨å¼‚æ­¥å¿«ç…§ï¼Œå‡å°‘å¯¹å¤„ç†å»¶è¿Ÿçš„å½±å“")])])])]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("é€šè¿‡ä»Šå¤©çš„åˆ†äº«ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº†Flinkçš„çŠ¶æ€ç®¡ç†å’Œå®¹é”™æœºåˆ¶ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("çŠ¶æ€ç®¡ç†")]),t._v("ï¼šæ‰˜ç®¡çŠ¶æ€å’ŒåŸå§‹çŠ¶æ€ä¸¤ç§ç±»å‹ï¼Œä»¥åŠä¸‰ç§çŠ¶æ€åç«¯")]),t._v(" "),s("li",[s("strong",[t._v("å®¹é”™æœºåˆ¶")]),t._v("ï¼šåŸºäºæ£€æŸ¥ç‚¹çš„åˆ†å¸ƒå¼å¿«ç…§æŠ€æœ¯")]),t._v(" "),s("li",[s("strong",[t._v("é«˜çº§ç‰¹æ€§")]),t._v("ï¼šä¿å­˜ç‚¹ã€ä¸¤é˜¶æ®µæäº¤å’Œç«¯åˆ°ç«¯ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰")]),t._v(" "),s("li",[s("strong",[t._v("å®é™…åº”ç”¨")]),t._v("ï¼šå¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨çŠ¶æ€ç®¡ç†å’Œé…ç½®æ£€æŸ¥ç‚¹")])]),t._v(" "),s("p",[t._v("çŠ¶æ€ç®¡ç†å’Œå®¹é”™æœºåˆ¶æ˜¯æ„å»ºå¯é æµå¤„ç†åº”ç”¨çš„åŸºç¡€ï¼Œç†è§£å¹¶æŒæ¡è¿™äº›æœºåˆ¶å¯¹äºå¼€å‘ç”Ÿäº§çº§çš„Flinkåº”ç”¨è‡³å…³é‡è¦ã€‚å¸Œæœ›ä»Šå¤©çš„åˆ†äº«èƒ½å¤Ÿå¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Flinkçš„çŠ¶æ€ç®¡ç†ä¸å®¹é”™æœºåˆ¶ï¼")]),t._v(" "),s("blockquote",[s("p",[t._v('"åœ¨æµå¤„ç†çš„æ—…ç¨‹ä¸­ï¼ŒçŠ¶æ€æ˜¯è®°å¿†ï¼Œå®¹é”™æ˜¯ä¿éšœã€‚åªæœ‰æ‹¥æœ‰å¯é çš„çŠ¶æ€ç®¡ç†å’Œå®¹é”™æœºåˆ¶ï¼Œæˆ‘ä»¬çš„æ•°æ®ç®¡é“æ‰èƒ½ç©¿è¶Šé£é›¨ï¼Œå§‹ç»ˆå¦‚ä¸€ã€‚"')])]),t._v(" "),s("p",[t._v("å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ğŸ‘‡")]),t._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[t._v('"çŠ¶æ€ç®¡ç†æ˜¯æµå¤„ç†çš„æ ¸å¿ƒï¼Œå®¹é”™æ˜¯å¯é æ€§çš„ä¿è¯ã€‚"')]),t._v(" "),s("ul",[s("li",[t._v("Jorgen")])])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code")]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);s.default=e.exports}}]);