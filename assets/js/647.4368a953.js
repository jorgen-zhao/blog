(window.webpackJsonp=window.webpackJsonp||[]).push([[647],{1004:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("åœ¨å®æ—¶é€šä¿¡é¢†åŸŸï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†WebSocketå’ŒMQTTè¿™ä¸¤ç§å¼ºå¤§çš„åè®®ã€‚ğŸ—ï¸ ä½†ä½ æ˜¯å¦æƒ³è¿‡ï¼Œæœ‰ä¸€ç§æ›´è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäºæˆ‘ä»¬ç†Ÿæ‚‰çš„HTTPåè®®ï¼Œå´èƒ½å®ç°é«˜æ•ˆçš„æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ•°æ®æ¨é€ï¼Ÿè¿™å°±æ˜¯ä»Šå¤©çš„ä¸»è§’â€”â€”"),s("strong",[t._v("æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰")]),t._v("ã€‚è®©æˆ‘å¸¦ä½ æ¢ç´¢è¿™ä¸ªè¢«ä½ä¼°çš„å®æ—¶é€šä¿¡æŠ€æœ¯ï¼ğŸš€")]),t._v(" "),s("h2",{attrs:{id:"sseæ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sseæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" SSEæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("div",{staticClass:"custom-block theorem"},[s("p",{staticClass:"title"},[t._v("THEOREM")]),s("p",[t._v("**æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆServer-Sent Events, SSEï¼‰**æ˜¯ä¸€ç§å…è®¸æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ›´æ–°çš„æŠ€æœ¯æ ‡å‡†ã€‚å®ƒåŸºäºHTTPåè®®ï¼Œä½¿ç”¨å•å‘é€šä¿¡ï¼ˆæœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼‰ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦æœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ•°æ®çš„åœºæ™¯ã€‚")])]),s("p",[t._v("SSEçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åŸºäº"),s("strong",[t._v("HTTP")]),t._v("ï¼ˆé»˜è®¤ç«¯å£80/443ï¼‰")]),t._v(" "),s("li",[t._v("ä½¿ç”¨"),s("strong",[t._v("æŒä¹…HTTPè¿æ¥")])]),t._v(" "),s("li",[t._v("å•å‘é€šä¿¡ï¼ˆä»…æœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼‰")]),t._v(" "),s("li",[t._v("è‡ªåŠ¨é‡è¿æœºåˆ¶")]),t._v(" "),s("li",[t._v("æ–‡æœ¬æ¶ˆæ¯æ ¼å¼ï¼ˆUTF-8ï¼‰")]),t._v(" "),s("li",[t._v("è½»é‡çº§å®ç°")])]),t._v(" "),s("h2",{attrs:{id:"ä¸websocketçš„å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸websocketçš„å¯¹æ¯”"}},[t._v("#")]),t._v(" ä¸WebSocketçš„å¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç‰¹æ€§")]),t._v(" "),s("th",[t._v("SSE")]),t._v(" "),s("th",[t._v("WebSocket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("åè®®")]),t._v(" "),s("td",[t._v("HTTP")]),t._v(" "),s("td",[t._v("è‡ªå®šä¹‰åè®®")])]),t._v(" "),s("tr",[s("td",[t._v("åŒå‘é€šä¿¡")]),t._v(" "),s("td",[t._v("âŒ ä»…å•å‘")]),t._v(" "),s("td",[t._v("âœ… åŒå‘")])]),t._v(" "),s("tr",[s("td",[t._v("é‡è¿æœºåˆ¶")]),t._v(" "),s("td",[t._v("âœ… å†…ç½®")]),t._v(" "),s("td",[t._v("âŒ éœ€æ‰‹åŠ¨å®ç°")])]),t._v(" "),s("tr",[s("td",[t._v("äºŒè¿›åˆ¶æ”¯æŒ")]),t._v(" "),s("td",[t._v("âŒ ä»…æ–‡æœ¬")]),t._v(" "),s("td",[t._v("âœ… æ”¯æŒäºŒè¿›åˆ¶")])]),t._v(" "),s("tr",[s("td",[t._v("å¤æ‚åº¦")]),t._v(" "),s("td",[t._v("ğŸŸ¢ ç®€å•")]),t._v(" "),s("td",[t._v("ğŸŸ¡ ä¸­ç­‰")])]),t._v(" "),s("tr",[s("td",[t._v("æµè§ˆå™¨å…¼å®¹æ€§")]),t._v(" "),s("td",[t._v("ğŸŸ¢ å¹¿æ³›")]),t._v(" "),s("td",[t._v("ğŸŸ¡ éœ€polyfill")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ’¡ "),s("strong",[t._v("ä¸ªäººå»ºè®®")]),t._v("ï¼šå¦‚æœä½ çš„åœºæ™¯åªéœ€è¦æœåŠ¡å™¨â†’å®¢æˆ·ç«¯çš„å•å‘æ¨é€ï¼ŒSSEæ˜¯æ¯”WebSocketæ›´ç®€å•ã€æ›´è½»é‡çš„é€‰æ‹©ï¼")])]),t._v(" "),s("h2",{attrs:{id:"sseå·¥ä½œåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sseå·¥ä½œåŸç†"}},[t._v("#")]),t._v(" SSEå·¥ä½œåŸç†")]),t._v(" "),s("p",[t._v("SSEçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("å®¢æˆ·ç«¯é€šè¿‡"),s("code",[t._v("EventSource")]),t._v("APIå‘èµ·è¯·æ±‚")]),t._v(" "),s("li",[t._v("æœåŠ¡å™¨ä¿æŒHTTPé•¿è¿æ¥")]),t._v(" "),s("li",[t._v("æœåŠ¡å™¨ä»¥"),s("code",[t._v("text/event-stream")]),t._v("æ ¼å¼å‘é€æ•°æ®")]),t._v(" "),s("li",[t._v("å®¢æˆ·ç«¯è‡ªåŠ¨å¤„ç†æ¶ˆæ¯å’Œé‡è¿")])]),t._v(" "),s("p",[t._v("å…¸å‹çš„SSEæ¶ˆæ¯æ ¼å¼ï¼š")]),t._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("event: message  \ndata: è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯\nid: 123  \n\ndata: è¿™æ˜¯ç¬¬äºŒæ¡æ¶ˆæ¯\nid: 124\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h2",{attrs:{id:"å®æˆ˜-ä½¿ç”¨sseå®ç°å®æ—¶é€šçŸ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜-ä½¿ç”¨sseå®ç°å®æ—¶é€šçŸ¥"}},[t._v("#")]),t._v(" å®æˆ˜ï¼šä½¿ç”¨SSEå®ç°å®æ—¶é€šçŸ¥")]),t._v(" "),s("h3",{attrs:{id:"å‰ç«¯å®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç«¯å®ç°"}},[t._v("#")]),t._v(" å‰ç«¯å®ç°")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºEventSourceè¿æ¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" eventSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/notifications'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬æ¶ˆæ¯")]),t._v("\neventSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ”¶åˆ°æ–°é€šçŸ¥:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬ç‰¹å®šäº‹ä»¶ç±»å‹")]),t._v("\neventSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newOrder'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ–°è®¢å•æé†’:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†é”™è¯¯")]),t._v("\neventSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SSEé”™è¯¯:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  eventSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h3",{attrs:{id:"åç«¯å®ç°-node-jsç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åç«¯å®ç°-node-jsç¤ºä¾‹"}},[t._v("#")]),t._v(" åç«¯å®ç°ï¼ˆNode.jsç¤ºä¾‹ï¼‰")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/notifications'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/event-stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cache-Control'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'no-cache'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'keep-alive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿå®æ—¶æ¨é€")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'notification'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ–°æ¶ˆæ¯ ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLocaleTimeString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("data: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\n\\n")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SSEæœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h2",{attrs:{id:"sseé€‚ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sseé€‚ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" SSEé€‚ç”¨åœºæ™¯")]),t._v(" "),s("p",[t._v("SSEåœ¨ä»¥ä¸‹åœºæ™¯è¡¨ç°å‡ºè‰²ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å®æ—¶ä»ªè¡¨ç›˜")]),t._v("ï¼šè‚¡ç¥¨è¡Œæƒ…ã€ç³»ç»Ÿç›‘æ§")]),t._v(" "),s("li",[s("strong",[t._v("é€šçŸ¥ç³»ç»Ÿ")]),t._v("ï¼šæ¶ˆæ¯æ¨é€ã€é‚®ä»¶æé†’")]),t._v(" "),s("li",[s("strong",[t._v("æ–°é—»æ›´æ–°")]),t._v("ï¼šå®æ—¶æ–°é—»æµ")]),t._v(" "),s("li",[s("strong",[t._v("ç¤¾äº¤åª’ä½“")]),t._v("ï¼šåŠ¨æ€æ›´æ–°")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨çº¿åä½œ")]),t._v("ï¼šæ–‡æ¡£åä½œçŠ¶æ€")])]),t._v(" "),s("h2",{attrs:{id:"ç»“è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[t._v("#")]),t._v(" ç»“è¯­")]),t._v(" "),s("p",[t._v("SSEè™½ç„¶ä¸å¦‚WebSocketçµæ´»ï¼Œä½†å®ƒä»¥"),s("strong",[t._v("æä½çš„å®ç°æˆæœ¬")]),t._v("å’Œ"),s("strong",[t._v("å‡ºè‰²çš„æµè§ˆå™¨å…¼å®¹æ€§")]),t._v("ï¼Œåœ¨å•å‘å®æ—¶é€šä¿¡é¢†åŸŸå æ®ç€ä¸å¯æ›¿ä»£çš„ä½ç½®ã€‚ğŸ¤” å½“ä½ åªéœ€è¦æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®æ—¶ï¼Œä¸å¦¨è€ƒè™‘SSEè¿™ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸŒŸ "),s("strong",[t._v("æ€»ç»“")]),t._v('ï¼šé€‰æ‹©é€šä¿¡åè®®æ—¶ï¼Œä¸è¦åªè¿½é€æœ€å¼ºå¤§çš„æŠ€æœ¯ï¼Œè€Œåº”æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„å·¥å…·ã€‚SSEæ­£æ˜¯è¿™ç§"æ°åˆ°å¥½å¤„"çš„è§£å†³æ–¹æ¡ˆâ€”â€”ç®€å•ã€é«˜æ•ˆã€å¯é ï¼')])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[t._v('"ç®€å•æ˜¯æœ€ç»ˆçš„å¤æ‚" â€”â€” è¾¾èŠ¬å¥‡')])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code")]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);s.default=e.exports}}]);