(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{378:function(s,t,a){"use strict";a.r(t);var n=a(15),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"èƒŒæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯"}},[s._v("#")]),s._v(" èƒŒæ™¯")]),s._v(" "),t("p",[s._v("è‡ªå»ºç‰©è”ç½‘å¹³å°æœ€å…³é”®çš„æ˜¯ä¸è®¾å¤‡è¿›è¡Œäº¤äº’ã€‚è®¾å¤‡é‡‡é›†åˆ°çš„ä¼ æ„Ÿå™¨ä¿¡æ¯æ˜¯æ•´ä¸ªç‰©è”ç½‘æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚æ‰€ä»¥å°±è¦æ±‚åœ¨è®¾è®¡ç‰©è”ç½‘å¹³å°æ—¶ï¼Œè¾¾åˆ°é«˜æ€§èƒ½ä¸é«˜å¯ç”¨ã€‚è¦èƒ½æ»¡è¶³æµ·é‡è®¾å¤‡è¿æ¥ä¸ä¿¡æ¯äº¤äº’ã€‚")]),s._v(" "),t("h2",{attrs:{id:"é«˜æ€§èƒ½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é«˜æ€§èƒ½"}},[s._v("#")]),s._v(" é«˜æ€§èƒ½")]),s._v(" "),t("p",[s._v("ä¸ºäº†å®ç°å¹³å°ä¸è®¾å¤‡äº¤äº’çš„é«˜æ€§èƒ½ï¼Œå…¼é¡¾æ¶ˆæ¯çš„ç¨³å®šæ€§(ä¸èƒ½ä¸¢å¤±æ•°æ®)ã€‚ä¸»è¦çš„ä½¿ç”¨åˆ°æ–¹æ³•ï¼š")]),s._v(" "),t("p",[s._v("âœ…IOå¤šè·¯å¤ç”¨")]),s._v(" "),t("p",[s._v("âœ…å¼‚æ­¥")]),s._v(" "),t("p",[s._v("âœ…æ± åŒ–æ€æƒ³")]),s._v(" "),t("h3",{attrs:{id:"ä¿¡æ¯æ¥æ”¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¿¡æ¯æ¥æ”¶"}},[s._v("#")]),s._v(" ä¿¡æ¯æ¥æ”¶")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("èƒŒæ™¯")]),s._v(" "),t("p",[s._v("èµ·åˆï¼Œæ²¡äººåœ¨æ„è®¾å¤‡ä¸å¹³å°çš„ä¿¡æ¯äº¤äº’ã€‚è¿™ä¸è¿‡æ˜¯ä¸€æ¡ç®€å•çš„æŠ¥æ–‡ã€‚åå‡ ä¸ªå­—èŠ‚çš„ä¿¡æ¯ã€‚åœ¨æµ©ç€šçš„ç½‘ç»œä¸Šç¿»ä¸èµ·ä»€ä¹ˆæ¶Ÿæ¼ªã€‚")])]),s._v(" "),t("ul",[t("li",[s._v("è®¾å¤‡ä¸å¹³å°äº¤äº’ï¼Œä¸»è¦æ˜¯è‡ªå®¶è®¾è®¡çš„åè®®ã€‚")]),s._v(" "),t("li",[s._v("åº•å±‚é‡‡ç”¨TCPæ–¹å¼ï¼Œ16è¿›åˆ¶è¿›è¡Œé€šä¿¡ã€‚")]),s._v(" "),t("li",[s._v("å¹³å°ä½œä¸ºæš´éœ²ç«¯å£ï¼Œè®¾å¤‡é€šè¿‡ç«¯å£è¿æ¥åˆ°å¹³å°ã€‚è¿æ¥æˆåŠŸåï¼Œé€šè¿‡ç«¯å£è¿›è¡Œä¿¡æ¯äº¤äº’ã€‚")])]),s._v(" "),t("p",[s._v("åŸºäºè¿™ç§æ¨¡å¼çš„è¿æ¥æ–¹å¼ã€‚é¦–å…ˆè„‘æµ·ä¸­å°±æƒ³èµ·äº†é‚£ä¸ªæ¡†æ¶ -- "),t("code",[s._v("Netty")]),s._v("ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("Nettyæ˜¯ ä¸€ä¸ª"),t("strong",[s._v("å¼‚æ­¥äº‹ä»¶é©±åŠ¨")]),s._v("çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œç”¨äº"),t("strong",[s._v("å¿«é€Ÿå¼€å‘å¯ç»´æŠ¤çš„é«˜æ€§èƒ½åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("åŸºäºä¼˜ç§€çš„è®¾è®¡ï¼Œæ•°æ®ä»è®¾å¤‡ä¾§é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¹³å°è¿™ä¸€å±‚ï¼Œå®Œå…¨ä¸éœ€è¦æˆ‘çš„è€ƒè™‘ã€‚åªéœ€è¦ä½¿ç”¨"),t("code",[s._v("Netty")]),s._v(" å¼€å‘ä¸€ä¸ª"),t("code",[s._v("ServerBootStrap")]),s._v("åï¼Œé€šè¿‡ç®€å•çš„é…ç½®:")]),s._v(" "),t("p",[s._v("âœ… è®¾ç½®ä¸¤ä¸ªçº¿ç¨‹ç»„"),t("code",[s._v("boosGroup")]),s._v("å’Œ"),t("code",[s._v("workerGroup")])]),s._v(" "),t("p",[s._v("âœ… è®¾ç½®æœåŠ¡ç«¯é€šé“å®ç°ç±»å‹")]),s._v(" "),t("p",[s._v("âœ… è®¾ç½®çº¿ç¨‹é˜Ÿåˆ—å¾—åˆ°è¿æ¥ä¸ªæ•°")]),s._v(" "),t("p",[s._v("âœ… è®¾ç½®ä¿æŒæ´»åŠ¨è¿æ¥çŠ¶æ€")]),s._v(" "),t("p",[s._v("âœ… ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å½¢å¼åˆå§‹åŒ–é€šé“å¯¹è±¡")]),s._v(" "),t("p",[s._v("âœ… ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡ç«¯")]),s._v(" "),t("p",[s._v("âœ… å¯¹å…³é—­é€šé“è¿›è¡Œç›‘å¬")]),s._v(" "),t("p",[s._v("âœ… æœ€ååœ¨ç»™ä¸€ä¸ªä¼˜é›…çš„å…³é—­ã€‚\né½æ´»ğŸ¤£")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyServer")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ç»„ boosGroupã€workerGroup")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EventLoopGroup")]),s._v(" bossGroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NioEventLoopGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EventLoopGroup")]),s._v(" workerGroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NioEventLoopGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆ›å»ºæœåŠ¡ç«¯çš„å¯åŠ¨å¯¹è±¡ï¼Œè®¾ç½®å‚æ•°")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerBootstrap")]),s._v(" bootstrap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerBootstrap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è®¾ç½®ä¸¤ä¸ªçº¿ç¨‹ç»„boosGroupå’ŒworkerGroup")]),s._v("\n            bootstrap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bossGroup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" workerGroup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è®¾ç½®æœåŠ¡ç«¯é€šé“å®ç°ç±»å‹    ")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("channel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NioServerSocketChannel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è®¾ç½®çº¿ç¨‹é˜Ÿåˆ—å¾—åˆ°è¿æ¥ä¸ªæ•°    ")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelOption")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SO_BACKLOG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è®¾ç½®ä¿æŒæ´»åŠ¨è¿æ¥çŠ¶æ€    ")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("childOption")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelOption")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SO_KEEPALIVE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å½¢å¼åˆå§‹åŒ–é€šé“å¯¹è±¡    ")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("childHandler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelInitializer")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SocketChannel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("initChannel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SocketChannel")]),s._v(" socketChannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç»™pipelineç®¡é“è®¾ç½®å¤„ç†å™¨")]),s._v("\n                            socketChannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pipeline")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addLast")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyServerHandler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç»™workerGroupçš„EventLoopå¯¹åº”çš„ç®¡é“è®¾ç½®å¤„ç†å™¨")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server is on call..."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡ç«¯")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelFuture")]),s._v(" channelFuture "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bootstrap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6666")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¯¹å…³é—­é€šé“è¿›è¡Œç›‘å¬")]),s._v("\n            channelFuture"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("channel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("closeFuture")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            bossGroup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdownGracefully")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            workerGroup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdownGracefully")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("h3",{attrs:{id:"å¼‚æ­¥å¤„ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥å¤„ç†"}},[s._v("#")]),s._v(" å¼‚æ­¥å¤„ç†")]),s._v(" "),t("p",[s._v("ä¸Šä¸€æ­¥ä¸­å·²ç»æ¥æ”¶åˆ°äº†æ¶ˆæ¯ã€‚æ­¤æ—¶å°±éœ€è¦é©¬ä¸Šå¤„ç†æ•°æ®ã€‚ä¸ºäº†ä¸é•¿æ—¶é—´çš„ä¸šåŠ¡æ“ä½œå¯¼è‡´"),t("code",[s._v("Handler")]),s._v("é˜»å¡ã€‚æ­¤å¤„ï¼Œæˆ‘ä¸€æ‹¿åˆ°æ¶ˆæ¯å°±æ˜¯ç”¨é»˜è®¤çš„Nettyä¸­çš„"),t("code",[s._v("taskQueue")]),s._v("å¼‚æ­¥å¤„ç†ã€‚å¯¹æ¶ˆæ¯è¿›è¡Œæ ¡éªŒã€åˆ†ç±»ç­‰æ“ä½œã€‚æœ€åå°†å¤„ç†å¥½çš„ä¿¡æ¯æ¨é€çš„åˆ°"),t("code",[s._v("Kafka")]),s._v("ä¸­ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyServerHandler")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelInboundHandlerAdapter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("channelRead")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ChannelHandlerContext")]),s._v(" ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è·å–åˆ°çº¿ç¨‹æ± eventLoopï¼Œæ·»åŠ çº¿ç¨‹ï¼Œæ‰§è¡Œ")]),s._v("\n        ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("channel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("eventLoop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é•¿æ—¶é—´æ“ä½œï¼Œä¸è‡³äºé•¿æ—¶é—´çš„ä¸šåŠ¡æ“ä½œå¯¼è‡´Handleré˜»å¡")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// do something right here......")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"æ€»ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),t("p",[s._v("Nettyæœ¬èº«ä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„ç½‘ç»œå¤„ç†æ¡†æ¶ã€‚å…¶ä¸­æœ‰å¤ªå¤šå€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚"),t("strong",[s._v("IOå¤šè·¯å¤ç”¨")]),s._v("ã€"),t("strong",[s._v("Reactoræ¨¡å¼")]),s._v("ã€"),t("strong",[s._v("çº¿ç¨‹æ¨¡å‹")]),s._v("ã€"),t("strong",[s._v("é›¶æ‹·è´")]),s._v("ã€"),t("strong",[s._v("å¼‚æ­¥æ¨¡å‹")]),s._v("ç­‰ç­‰ã€‚å­¦ä¹ ä¼˜ç§€çš„æ¡†æ¶è§£å†³é—®é¢˜çš„æ€è·¯ï¼Œç„¶åè¿ç”¨åœ¨è‡ªå·±çš„ä¸šåŠ¡ä¸­ã€‚é‚£ç§é€šè¿‡è‡ªå·±ç†è§£ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ‰æ˜¯æˆé•¿çš„ç§¯ç´¯ã€‚")]),s._v(" "),t("h2",{attrs:{id:"é«˜å¯ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é«˜å¯ç”¨"}},[s._v("#")]),s._v(" é«˜å¯ç”¨")]),s._v(" "),t("p",[s._v("ç°ä»£åŒ–æ¶æ„ä¸€èˆ¬é‡‡ç”¨å¾®æœåŠ¡åˆ†å¸ƒå¼æ¶æ„ã€‚å¯ä»¥é€šè¿‡éƒ¨ç½²å¤šå¥—è®¾å¤‡äº¤äº’æœåŠ¡ï¼Œç„¶åç”¨è´Ÿè½½å‡è¡¡è½¯ä»¶æ»¡è¶³è¦æ±‚ã€‚ä¸€èˆ¬è€Œè¨€ã€‚å¯é€‰çš„è´Ÿè½½å‡è¡¡è½¯ä»¶ä¸»è¦æ˜¯3æ¬¾ã€‚"),t("code",[s._v("Nginx")]),s._v("ã€"),t("code",[s._v("LVS")]),s._v("ã€"),t("code",[s._v("Haproxy")]),s._v("ã€‚å…·ä½“ä¸‰è€…å¯¹æ¯”å¯ä»¥å‚è§: "),t("a",{attrs:{href:"https://www.cnblogs.com/jojoword/p/10835102.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("LVSã€nginxã€Haproxyå¯¹æ¯”"),t("OutboundLink")],1),s._v(", "),t("a",{attrs:{href:"https://www.cnblogs.com/struggle-1216/p/13511703.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("LVSã€Nginxå’ŒHAProxyåŒºåˆ«"),t("OutboundLink")],1),s._v("ã€‚é’ˆå¯¹ç‰©è”ç½‘åœºæ™¯ä¸€èˆ¬ä½¿ç”¨"),t("code",[s._v("Haproxy")]),s._v("ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸€æ¬¾ä½¿ç”¨ C è¯­è¨€ç¼–å†™çš„è‡ªç”±åŠå¼€æ”¾æºä»£ç è½¯ä»¶ï¼Œå…¶æä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡ï¼Œä»¥åŠåŸºäº TCP å’Œ HTTP çš„åº”ç”¨ç¨‹åºä»£ç†ï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚")])]),s._v(" "),t("h3",{attrs:{id:"haproxyç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#haproxyç®€ä»‹"}},[s._v("#")]),s._v(" HAProxyç®€ä»‹")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("HAProxy æ˜¯ä¸€æ¬¾æä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡ä»¥åŠåŸºäºTCPï¼ˆç¬¬å››å±‚ï¼‰å’ŒHTTPï¼ˆç¬¬ä¸ƒå±‚ï¼‰åº”ç”¨çš„ä»£ç†è½¯ä»¶ï¼Œæ”¯æŒè™šæ‹Ÿä¸»æœºï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ HAProxyç‰¹åˆ«é€‚ç”¨äºé‚£äº›è´Ÿè½½ç‰¹å¤§çš„webç«™ç‚¹ï¼Œè¿™äº›ç«™ç‚¹é€šå¸¸åˆéœ€è¦ä¼šè¯ä¿æŒæˆ–ä¸ƒå±‚å¤„ç†ã€‚HAProxyè¿è¡Œåœ¨æ—¶ä¸‹çš„ç¡¬ä»¶ä¸Šï¼Œå®Œå…¨å¯ä»¥æ”¯æŒæ•°ä»¥ä¸‡è®¡çš„ å¹¶å‘è¿æ¥ã€‚å¹¶ä¸”å®ƒçš„è¿è¡Œæ¨¡å¼ä½¿å¾—å®ƒå¯ä»¥å¾ˆç®€å•å®‰å…¨çš„æ•´åˆè¿›æ‚¨å½“å‰çš„æ¶æ„ä¸­ï¼Œ åŒæ—¶å¯ä»¥ä¿æŠ¤ä½ çš„webæœåŠ¡å™¨ä¸è¢«æš´éœ²åˆ°ç½‘ç»œä¸Šã€‚")])]),s._v(" "),t("li",[t("p",[s._v("HAProxy å®ç°äº†ä¸€ç§äº‹ä»¶é©±åŠ¨ã€å•ä¸€è¿›ç¨‹æ¨¡å‹ï¼Œæ­¤æ¨¡å‹æ”¯æŒéå¸¸å¤§çš„å¹¶å‘è¿æ¥æ•°ã€‚å¤šè¿›ç¨‹æˆ–å¤šçº¿ç¨‹æ¨¡å‹å—å†…å­˜é™åˆ¶ ã€ç³»ç»Ÿè°ƒåº¦å™¨é™åˆ¶ä»¥åŠæ— å¤„ä¸åœ¨çš„é”é™åˆ¶ï¼Œå¾ˆå°‘èƒ½å¤„ç†æ•°åƒå¹¶å‘è¿æ¥ã€‚äº‹ä»¶é©±åŠ¨æ¨¡å‹å› ä¸ºåœ¨æœ‰æ›´å¥½çš„èµ„æºå’Œæ—¶é—´ç®¡ç†çš„ç”¨æˆ·ç«¯(User-Space) å®ç°æ‰€æœ‰è¿™äº›ä»»åŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™äº›é—®é¢˜ã€‚æ­¤æ¨¡å‹çš„å¼Šç«¯æ˜¯ï¼Œåœ¨å¤šæ ¸ç³»ç»Ÿä¸Šï¼Œè¿™äº›ç¨‹åºé€šå¸¸æ‰©å±•æ€§è¾ƒå·®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä»–ä»¬å¿…é¡»è¿›è¡Œä¼˜åŒ–ä»¥ ä½¿æ¯ä¸ªCPUæ—¶é—´ç‰‡(Cycle)åšæ›´å¤šçš„å·¥ä½œã€‚")])]),s._v(" "),t("li",[t("p",[s._v("HAProxy æ”¯æŒè¿æ¥æ‹’ç» : å› ä¸ºç»´æŠ¤ä¸€ä¸ªè¿æ¥çš„æ‰“å¼€çš„å¼€é”€æ˜¯å¾ˆä½çš„ï¼Œæœ‰æ—¶æˆ‘ä»¬å¾ˆéœ€è¦é™åˆ¶æ”»å‡»è •è™«ï¼ˆattack botsï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´é™åˆ¶å®ƒä»¬çš„è¿æ¥æ‰“å¼€ä»è€Œé™åˆ¶å®ƒä»¬çš„å±å®³ã€‚ è¿™ä¸ªå·²ç»ä¸ºä¸€ä¸ªé™·äºå°å‹DDoSæ”»å‡»çš„ç½‘ç«™å¼€å‘äº†è€Œä¸”å·²ç»æ‹¯æ•‘äº†å¾ˆå¤šç«™ç‚¹ï¼Œè¿™ä¸ªä¼˜ç‚¹ä¹Ÿæ˜¯å…¶å®ƒè´Ÿè½½å‡è¡¡å™¨æ²¡æœ‰çš„ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("HAProxy æ”¯æŒå…¨é€æ˜ä»£ç†ï¼ˆå·²å…·å¤‡ç¡¬ä»¶é˜²ç«å¢™çš„å…¸å‹ç‰¹ç‚¹ï¼‰: å¯ä»¥ç”¨å®¢æˆ·ç«¯IPåœ°å€æˆ–è€…ä»»ä½•å…¶ä»–åœ°å€æ¥è¿æ¥åç«¯æœåŠ¡å™¨. è¿™ä¸ªç‰¹æ€§ä»…åœ¨Linux 2.4/2.6å†…æ ¸æ‰“äº†cttproxyè¡¥ä¸åæ‰å¯ä»¥ä½¿ç”¨. è¿™ä¸ªç‰¹æ€§ä¹Ÿä½¿å¾—ä¸ºæŸç‰¹æ®ŠæœåŠ¡å™¨å¤„ç†éƒ¨åˆ†æµé‡åŒæ—¶åˆä¸ä¿®æ”¹æœåŠ¡å™¨çš„åœ°å€æˆä¸ºå¯èƒ½ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"æ€§èƒ½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½"}},[s._v("#")]),s._v(" æ€§èƒ½")]),s._v(" "),t("p",[s._v("HAProxyå€ŸåŠ©äºOSä¸Šå‡ ç§å¸¸è§çš„æŠ€æœ¯æ¥å®ç°æ€§èƒ½çš„æœ€å¤§åŒ–ã€‚")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("å•è¿›ç¨‹ã€äº‹ä»¶é©±åŠ¨æ¨¡å‹æ˜¾è‘—é™ä½äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€åŠå†…å­˜å ç”¨ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("O(1)äº‹ä»¶æ£€æŸ¥å™¨(event checker)å…è®¸å…¶åœ¨é«˜å¹¶å‘è¿æ¥ä¸­å¯¹ä»»ä½•è¿æ¥çš„ä»»ä½•äº‹ä»¶å®ç°å³æ—¶æ¢æµ‹ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("åœ¨ä»»ä½•å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå•ç¼“å†²(single buffering)æœºåˆ¶èƒ½ä»¥ä¸å¤åˆ¶ä»»ä½•æ•°æ®çš„æ–¹å¼å®Œæˆè¯»å†™æ“ä½œï¼Œè¿™ä¼šèŠ‚çº¦å¤§é‡çš„CPUæ—¶é’Ÿå‘¨æœŸåŠå†…å­˜å¸¦å®½ï¼›")])]),s._v(" "),t("li",[t("p",[s._v("å€ŸåŠ©äºLinux 2.6 (>= 2.6.27.19)ä¸Šçš„splice()ç³»ç»Ÿè°ƒç”¨ï¼ŒHAProxyå¯ä»¥å®ç°é›¶å¤åˆ¶è½¬å‘(Zero-copy forwarding)ï¼Œåœ¨Linux 3.5åŠä»¥ä¸Šçš„OSä¸­è¿˜å¯ä»¥å®ç°é›¶å¤åˆ¶å¯åŠ¨(zero-starting)ï¼›")])]),s._v(" "),t("li",[t("p",[s._v("å†…å­˜åˆ†é…å™¨åœ¨å›ºå®šå¤§å°çš„å†…å­˜æ± ä¸­å¯å®ç°å³æ—¶å†…å­˜åˆ†é…ï¼Œè¿™èƒ½å¤Ÿæ˜¾è‘—å‡å°‘åˆ›å»ºä¸€ä¸ªä¼šè¯çš„æ—¶é•¿ï¼›")])]),s._v(" "),t("li",[t("p",[s._v("æ ‘å‹å­˜å‚¨ï¼šä¾§é‡äºä½¿ç”¨ä½œè€…å¤šå¹´å‰å¼€å‘çš„å¼¹æ€§äºŒå‰æ ‘ï¼Œå®ç°äº†ä»¥O(log(N))çš„ä½å¼€é”€æ¥ä¿æŒè®¡æ—¶å™¨å‘½ä»¤ã€ä¿æŒè¿è¡Œé˜Ÿåˆ—å‘½ä»¤åŠç®¡ç†è½®è¯¢åŠæœ€å°‘è¿æ¥é˜Ÿåˆ—ï¼›")])]),s._v(" "),t("li",[t("p",[s._v("ä¼˜åŒ–çš„HTTPé¦–éƒ¨åˆ†æï¼šä¼˜åŒ–çš„é¦–éƒ¨åˆ†æåŠŸèƒ½é¿å…äº†åœ¨HTTPé¦–éƒ¨åˆ†æè¿‡ç¨‹ä¸­é‡è¯»ä»»ä½•å†…å­˜åŒºåŸŸï¼›")])]),s._v(" "),t("li",[t("p",[s._v("ç²¾å¿ƒåœ°é™ä½äº†æ˜‚è´µçš„ç³»ç»Ÿè°ƒç”¨ï¼Œå¤§éƒ¨åˆ†å·¥ä½œéƒ½åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆï¼Œå¦‚æ—¶é—´è¯»å–ã€ç¼“å†²èšåˆåŠæ–‡ä»¶æè¿°ç¬¦çš„å¯ç”¨å’Œç¦ç”¨ç­‰ï¼›")])])]),s._v(" "),t("p",[s._v("æ‰€æœ‰çš„è¿™äº›ç»†å¾®ä¹‹å¤„çš„ä¼˜åŒ–å®ç°äº†åœ¨ä¸­ç­‰è§„æ¨¡è´Ÿè½½ä¹‹ä¸Šä¾ç„¶æœ‰ç€ç›¸å½“ä½çš„CPUè´Ÿè½½ï¼Œç”šè‡³äºåœ¨éå¸¸é«˜çš„è´Ÿè½½åœºæ™¯ä¸­ï¼Œ5%çš„ç”¨æˆ·ç©ºé—´å ç”¨ç‡å’Œ95%çš„ç³»ç»Ÿç©ºé—´å ç”¨ç‡ä¹Ÿæ˜¯éå¸¸æ™®éçš„ç°è±¡ï¼Œè¿™æ„å‘³ç€HAProxyè¿›ç¨‹æ¶ˆè€—æ¯”ç³»ç»Ÿç©ºé—´æ¶ˆè€—ä½20å€ä»¥ä¸Šã€‚å› æ­¤ï¼Œå¯¹OSè¿›è¡Œæ€§èƒ½è°ƒä¼˜æ˜¯éå¸¸é‡è¦çš„ã€‚å³ä½¿ç”¨æˆ·ç©ºé—´çš„å ç”¨ç‡æé«˜ä¸€å€ï¼Œå…¶CPUå ç”¨ç‡ä¹Ÿä»…ä¸º10%ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä½•7å±‚å¤„ç†å¯¹æ€§èƒ½å½±å“æœ‰é™è¿™ä¸€ç°è±¡ã€‚ç”±æ­¤ï¼Œåœ¨é«˜ç«¯ç³»ç»Ÿä¸ŠHAProxyçš„7å±‚æ€§èƒ½å¯è½»æ˜“è¶…è¿‡ç¡¬ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡ã€‚")]),s._v(" "),t("p",[s._v("åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåœ¨7å±‚å¤„ç†ä¸Šä½¿ç”¨HAProxyä½œä¸ºæ˜‚è´µçš„é«˜ç«¯ç¡¬ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡æ•…éšœæ•…éšœæ—¶çš„ç´§æ€¥è§£å†³æ–¹æ¡ˆä¹Ÿæ—¶é•¿å¯è§ã€‚ç¡¬ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡åœ¨â€œæŠ¥æ–‡â€çº§åˆ«å¤„ç†è¯·æ±‚ï¼Œè¿™åœ¨æ”¯æŒè·¨æŠ¥æ–‡è¯·æ±‚(request across multiple packets)æœ‰ç€è¾ƒé«˜çš„éš¾åº¦ï¼Œå¹¶ä¸”å®ƒä»¬ä¸ç¼“å†²ä»»ä½•æ•°æ®ï¼Œå› æ­¤æœ‰ç€è¾ƒé•¿çš„å“åº”æ—¶é—´ã€‚å¯¹åº”åœ°ï¼Œè½¯ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡ä½¿ç”¨TCPç¼“å†²ï¼Œå¯å»ºç«‹æé•¿çš„è¯·æ±‚ï¼Œä¸”æœ‰ç€è¾ƒå¤§çš„å“åº”æ—¶é—´ã€‚")])])}),[],!1,null,null,null);t.default=e.exports}}]);