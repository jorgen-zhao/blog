(window.webpackJsonp=window.webpackJsonp||[]).push([[549],{903:function(s,t,a){"use strict";a.r(t);var n=a(15),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v("åœ¨å½“ä»Šå¤§æ•°æ®å’Œåˆ†å¸ƒå¼ç³»ç»Ÿç››è¡Œçš„æ—¶ä»£ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä½œä¸ºç³»ç»Ÿé—´é€šä¿¡çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ‰¿æ‹…ç€æ•°æ®ä¼ è¾“ã€è§£è€¦å’Œå‰Šå³°å¡«è°·çš„é‡è¦èŒè´£ã€‚ç„¶è€Œï¼Œéšç€ä¸šåŠ¡æ•°æ®é‡çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¢ä¸´ç€å·¨å¤§çš„ä¼ è¾“å‹åŠ›å’Œå¸¦å®½æŒ‘æˆ˜ã€‚ğŸ“¡")]),s._v(" "),t("p",[s._v("æœ¬æ–‡å°†æ·±å…¥æ¢è®¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å‹ç¼©ä¸ä¼ è¾“ä¼˜åŒ–æŠ€æœ¯ï¼Œåˆ†æä¸åŒå‹ç¼©ç®—æ³•çš„é€‚ç”¨åœºæ™¯ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡åˆç†çš„ä¼ è¾“ç­–ç•¥æå‡æ•´ä½“ç³»ç»Ÿæ€§èƒ½ã€‚æ— è®ºä½ æ˜¯æ¶æ„å¸ˆã€å¼€å‘äººå‘˜è¿˜æ˜¯è¿ç»´å·¥ç¨‹å¸ˆï¼Œè¿™äº›çŸ¥è¯†éƒ½å°†å¸®åŠ©ä½ æ„å»ºæ›´é«˜æ•ˆã€æ›´å¯é çš„æ¶ˆæ¯ç³»ç»Ÿã€‚")]),s._v(" "),t("h2",{attrs:{id:"æ¶ˆæ¯å‹ç¼©çš„é‡è¦æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯å‹ç¼©çš„é‡è¦æ€§"}},[s._v("#")]),s._v(" æ¶ˆæ¯å‹ç¼©çš„é‡è¦æ€§")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©ï¼Ÿ")]),s._v(" "),t("p",[s._v("åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆæ¯å‹ç¼©ä¸»è¦å¸¦æ¥ä»¥ä¸‹å‡ æ–¹é¢çš„å¥½å¤„ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("å‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—")]),s._v("ï¼šå‹ç¼©åçš„æ¶ˆæ¯ä½“ç§¯æ˜¾è‘—å‡å°ï¼Œç‰¹åˆ«æ˜¯åœ¨è·¨åœ°åŸŸæˆ–è·¨æ•°æ®ä¸­å¿ƒä¼ è¾“æ—¶ï¼Œå¯å¤§å¹…é™ä½ç½‘ç»œæˆæœ¬")]),s._v(" "),t("li",[t("strong",[s._v("æé«˜ååé‡")]),s._v("ï¼šè¾ƒå°çš„æ¶ˆæ¯ä½“ç§¯æ„å‘³ç€å¯ä»¥åœ¨ç›¸åŒæ—¶é—´å†…ä¼ è¾“æ›´å¤šæ¶ˆæ¯")]),s._v(" "),t("li",[t("strong",[s._v("é™ä½å­˜å‚¨æˆæœ¬")]),s._v("ï¼šæŒä¹…åŒ–å­˜å‚¨æ—¶ï¼Œå‹ç¼©æ¶ˆæ¯å¯ä»¥å‡å°‘ç£ç›˜ç©ºé—´å ç”¨")]),s._v(" "),t("li",[t("strong",[s._v("å‡å°‘åºåˆ—åŒ–/ååºåˆ—åŒ–æ—¶é—´")]),s._v("ï¼šæŸäº›å‹ç¼©ç®—æ³•å¯ä»¥åŠ é€Ÿæ•°æ®è½¬æ¢è¿‡ç¨‹")])]),s._v(" "),t("h3",{attrs:{id:"ä¸å‹ç¼©çš„åœºæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸å‹ç¼©çš„åœºæ™¯"}},[s._v("#")]),s._v(" ä¸å‹ç¼©çš„åœºæ™¯")]),s._v(" "),t("p",[s._v("å½“ç„¶ï¼Œæ¶ˆæ¯å‹ç¼©å¹¶éé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ã€‚ä»¥ä¸‹æƒ…å†µå¯èƒ½ä¸é€‚åˆä½¿ç”¨å‹ç¼©ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æ¶ˆæ¯æœ¬èº«å·²ç»éå¸¸å°ï¼ˆå¦‚å‡ KBï¼‰")]),s._v(" "),t("li",[s._v("CPUèµ„æºç´§å¼ ï¼Œå‹ç¼©/è§£å‹å¼€é”€å¤§äºèŠ‚çœçš„å¸¦å®½")]),s._v(" "),t("li",[s._v("æ¶ˆæ¯å†…å®¹æœ¬èº«å·²ç»é«˜åº¦å‹ç¼©ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ï¼‰")]),s._v(" "),t("li",[s._v("å¯¹æ¶ˆæ¯å¤„ç†å»¶è¿Ÿè¦æ±‚æé«˜")])]),s._v(" "),t("h2",{attrs:{id:"ä¸»æµå‹ç¼©ç®—æ³•å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»æµå‹ç¼©ç®—æ³•å¯¹æ¯”"}},[s._v("#")]),s._v(" ä¸»æµå‹ç¼©ç®—æ³•å¯¹æ¯”")]),s._v(" "),t("h3",{attrs:{id:"å‹ç¼©ç®—æ³•ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‹ç¼©ç®—æ³•ç±»å‹"}},[s._v("#")]),s._v(" å‹ç¼©ç®—æ³•ç±»å‹")]),s._v(" "),t("p",[s._v("æ¶ˆæ¯é˜Ÿåˆ—ä¸­å¸¸ç”¨çš„å‹ç¼©ç®—æ³•ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("ç®—æ³•ç±»å‹")]),s._v(" "),t("th",[s._v("å‹ç¼©ç‡")]),s._v(" "),t("th",[s._v("å‹ç¼©é€Ÿåº¦")]),s._v(" "),t("th",[s._v("è§£å‹é€Ÿåº¦")]),s._v(" "),t("th",[s._v("é€‚ç”¨åœºæ™¯")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("GZIP")]),s._v(" "),t("td",[s._v("é«˜")]),s._v(" "),t("td",[s._v("ä¸­")]),s._v(" "),t("td",[s._v("å¿«")]),s._v(" "),t("td",[s._v("é€šç”¨åœºæ™¯")])]),s._v(" "),t("tr",[t("td",[s._v("LZ4")]),s._v(" "),t("td",[s._v("ä½")]),s._v(" "),t("td",[s._v("æå¿«")]),s._v(" "),t("td",[s._v("æå¿«")]),s._v(" "),t("td",[s._v("å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯")])]),s._v(" "),t("tr",[t("td",[s._v("Snappy")]),s._v(" "),t("td",[s._v("ä½")]),s._v(" "),t("td",[s._v("æå¿«")]),s._v(" "),t("td",[s._v("æå¿«")]),s._v(" "),t("td",[s._v("å¤§æ•°æ®åœºæ™¯")])]),s._v(" "),t("tr",[t("td",[s._v("Zstd")]),s._v(" "),t("td",[s._v("é«˜")]),s._v(" "),t("td",[s._v("å¿«")]),s._v(" "),t("td",[s._v("å¿«")]),s._v(" "),t("td",[s._v("éœ€è¦é«˜å‹ç¼©æ¯”çš„åœºæ™¯")])]),s._v(" "),t("tr",[t("td",[s._v("Brotli")]),s._v(" "),t("td",[s._v("æé«˜")]),s._v(" "),t("td",[s._v("æ…¢")]),s._v(" "),t("td",[s._v("ä¸­")]),s._v(" "),t("td",[s._v("Webå†…å®¹ä¼ è¾“")])])])]),s._v(" "),t("h3",{attrs:{id:"å„ç®—æ³•è¯¦ç»†åˆ†æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å„ç®—æ³•è¯¦ç»†åˆ†æ"}},[s._v("#")]),s._v(" å„ç®—æ³•è¯¦ç»†åˆ†æ")]),s._v(" "),t("h4",{attrs:{id:"gzip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gzip"}},[s._v("#")]),s._v(" GZIP")]),s._v(" "),t("p",[s._v("GZIPæ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„å‹ç¼©ç®—æ³•ä¹‹ä¸€ï¼ŒåŸºäºDEFLATEç®—æ³•ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Javaä¸­ä½¿ç”¨GZIPå‹ç¼©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressGzip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" str"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteArrayOutputStream")]),s._v(" bos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteArrayOutputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("str"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("length")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GZIPOutputStream")]),s._v(" gzip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GZIPOutputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        gzip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("str"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StandardCharsets")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UTF_8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" bos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toByteArray")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©ç‡è¾ƒé«˜ï¼Œå¹³å‡å¯è¾¾70%ä»¥ä¸Š")]),s._v(" "),t("li",[s._v("å…¼å®¹æ€§å¥½ï¼Œå‡ ä¹æ‰€æœ‰ç³»ç»Ÿéƒ½æ”¯æŒ")]),s._v(" "),t("li",[s._v("å®ç°ç®€å•ï¼Œåº“æ”¯æŒå¹¿æ³›")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢")]),s._v(" "),t("li",[s._v("å¯¹äºå·²ç»å‹ç¼©çš„æ•°æ®ï¼ˆå¦‚JSONï¼‰æ•ˆæœæœ‰é™")])]),s._v(" "),t("h4",{attrs:{id:"lz4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lz4"}},[s._v("#")]),s._v(" LZ4")]),s._v(" "),t("p",[s._v("LZ4æ˜¯ä¸€ç§æå¿«çš„å‹ç¼©ç®—æ³•ï¼Œæ³¨é‡é€Ÿåº¦è€Œéå‹ç¼©ç‡ï¼š")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Pythonä¸­ä½¿ç”¨LZ4å‹ç¼©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" lz4\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compress_lz4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" lz4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("decompress_lz4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compressed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" lz4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decompress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compressed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©å’Œè§£å‹é€Ÿåº¦æå¿«ï¼ˆé€šå¸¸æ¯”GZIPå¿«5-10å€ï¼‰")]),s._v(" "),t("li",[s._v("é€‚åˆå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯")]),s._v(" "),t("li",[s._v("å†…å­˜å ç”¨ä½")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©ç‡ç›¸å¯¹è¾ƒä½ï¼ˆé€šå¸¸åªæœ‰50%å·¦å³ï¼‰")]),s._v(" "),t("li",[s._v("ä¸é€‚åˆéœ€è¦é«˜å‹ç¼©æ¯”çš„åœºæ™¯")])]),s._v(" "),t("h4",{attrs:{id:"snappy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#snappy"}},[s._v("#")]),s._v(" Snappy")]),s._v(" "),t("p",[s._v("Snappyæ˜¯Googleå¼€å‘çš„å‹ç¼©ç®—æ³•ï¼ŒåŒæ ·æ³¨é‡é€Ÿåº¦ï¼š")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Goä¸­ä½¿ç”¨Snappyå‹ç¼©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github.com/golang/snappy"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressSnappy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("byte")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" snappy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Encode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("decompressSnappy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("byte")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" snappy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Decode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" err "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("nil")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("panic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©é€Ÿåº¦æå¿«")]),s._v(" "),t("li",[s._v("è§£å‹é€Ÿåº¦ä¹Ÿéå¸¸å¿«")]),s._v(" "),t("li",[s._v("å†…å­˜å ç”¨ç¨³å®š")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©ç‡è¾ƒä½")]),s._v(" "),t("li",[s._v("ä¸é€‚åˆéœ€è¦é«˜å‹ç¼©æ¯”çš„åœºæ™¯")])]),s._v(" "),t("h4",{attrs:{id:"zstd-zstandard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zstd-zstandard"}},[s._v("#")]),s._v(" Zstd (Zstandard)")]),s._v(" "),t("p",[s._v("Zstdæ˜¯Facebookå¼€å‘çš„ç°ä»£å‹ç¼©ç®—æ³•ï¼Œå¹³è¡¡äº†å‹ç¼©ç‡å’Œé€Ÿåº¦ï¼š")]),s._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// C++ä¸­ä½¿ç”¨Zstdå‹ç¼©ç¤ºä¾‹\n#include <zstd.h>\n\nstd::vector<uint8_t> compressZstd(const std::string& input) {\n    size_t compressedSize = ZSTD_compressBound(input.size());\n    std::vector<uint8_t> compressed(compressedSize);\n    \n    compressedSize = ZSTD_compress(compressed.data(), compressed.size(), \n                                 input.data(), input.size(), 3);\n    \n    compressed.resize(compressedSize);\n    return compressed;\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©ç‡é«˜ï¼Œæ¥è¿‘GZIP")]),s._v(" "),t("li",[s._v("å‹ç¼©å’Œè§£å‹é€Ÿåº¦éƒ½æ¯”GZIPå¿«")]),s._v(" "),t("li",[s._v("æ”¯æŒå¤šç§å‹ç¼©çº§åˆ«ï¼Œå¯çµæ´»è°ƒæ•´")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç›¸å¯¹è¾ƒæ–°ï¼ŒæŸäº›ç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒ")]),s._v(" "),t("li",[s._v("å®ç°å¤æ‚åº¦è¾ƒé«˜")])]),s._v(" "),t("h2",{attrs:{id:"æ¶ˆæ¯ä¼ è¾“ä¼˜åŒ–ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯ä¼ è¾“ä¼˜åŒ–ç­–ç•¥"}},[s._v("#")]),s._v(" æ¶ˆæ¯ä¼ è¾“ä¼˜åŒ–ç­–ç•¥")]),s._v(" "),t("h3",{attrs:{id:"æ‰¹é‡å¤„ç†ä¸å‹ç¼©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‰¹é‡å¤„ç†ä¸å‹ç¼©"}},[s._v("#")]),s._v(" æ‰¹é‡å¤„ç†ä¸å‹ç¼©")]),s._v(" "),t("p",[s._v("æ‰¹é‡å¤„ç†æ˜¯æé«˜æ¶ˆæ¯ä¼ è¾“æ•ˆç‡çš„æœ‰æ•ˆæ‰‹æ®µï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰¹é‡æ¶ˆæ¯å‹ç¼©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressBatchMessages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" messages"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†å¤šä¸ªæ¶ˆæ¯åˆå¹¶ä¸ºä¸€ä¸ªæ‰¹æ¬¡")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" batchJson "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" messages"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("map")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toJson")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("collect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Collectors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("joining")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('","')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯¹æ‰¹æ¬¡è¿›è¡Œå‹ç¼©")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressGzip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"["')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" batchJson "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"]"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜åŠ¿")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æé«˜å‹ç¼©æ•ˆç‡ï¼ˆç›¸ä¼¼æ•°æ®ä¸€èµ·å‹ç¼©æ•ˆæœæ›´å¥½ï¼‰")]),s._v(" "),t("li",[s._v("å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°")]),s._v(" "),t("li",[s._v("é™ä½åè®®å¼€é”€")])]),s._v(" "),t("h3",{attrs:{id:"å‹ç¼©çº§åˆ«é€‰æ‹©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‹ç¼©çº§åˆ«é€‰æ‹©"}},[s._v("#")]),s._v(" å‹ç¼©çº§åˆ«é€‰æ‹©")]),s._v(" "),t("p",[s._v("ä¸åŒçš„å‹ç¼©çº§åˆ«é€‚ç”¨äºä¸åŒåœºæ™¯ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("å®æ—¶æ€§è¦æ±‚é«˜")]),s._v("ï¼šä½¿ç”¨LZ4æˆ–Snappyï¼Œç‰ºç‰²å‹ç¼©ç‡æ¢å–é€Ÿåº¦")]),s._v(" "),t("li",[t("strong",[s._v("å¸¦å®½æ•æ„Ÿ")]),s._v("ï¼šä½¿ç”¨GZIPæˆ–Zstdé«˜å‹ç¼©çº§åˆ«")]),s._v(" "),t("li",[t("strong",[s._v("å­˜å‚¨æ•æ„Ÿ")]),s._v("ï¼šä½¿ç”¨Brotliæˆ–Zstdæœ€é«˜å‹ç¼©çº§åˆ«")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ¨æ€é€‰æ‹©å‹ç¼©çº§åˆ«")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compress_message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" priority "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"high"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" lz4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é€Ÿåº¦ä¼˜å…ˆ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" priority "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"normal"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" gzip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¹³è¡¡")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" brotli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å‹ç¼©ç‡ä¼˜å…ˆ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"å‹ç¼©ä¸åºåˆ—åŒ–ç»“åˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‹ç¼©ä¸åºåˆ—åŒ–ç»“åˆ"}},[s._v("#")]),s._v(" å‹ç¼©ä¸åºåˆ—åŒ–ç»“åˆ")]),s._v(" "),t("p",[s._v("å°†å‹ç¼©ä¸é«˜æ•ˆçš„åºåˆ—åŒ–æ ¼å¼ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Protobuf + GZIPå‹ç¼©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressProtobuf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MessageProto")]),s._v(" proto"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åºåˆ—åŒ–ä¸ºProtobufæ ¼å¼")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" protobufData "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" proto"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toByteArray")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‹ç¼©åºåˆ—åŒ–åçš„æ•°æ®")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteArrayOutputStream")]),s._v(" bos "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ByteArrayOutputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GZIPOutputStream")]),s._v(" gzip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GZIPOutputStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        gzip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("protobufData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" bos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toByteArray")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"æ™ºèƒ½å‹ç¼©å†³ç­–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ™ºèƒ½å‹ç¼©å†³ç­–"}},[s._v("#")]),s._v(" æ™ºèƒ½å‹ç¼©å†³ç­–")]),s._v(" "),t("p",[s._v("æ ¹æ®æ¶ˆæ¯ç‰¹å¾åŠ¨æ€é€‰æ‹©æ˜¯å¦å‹ç¼©ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ™ºèƒ½å‹ç¼©å†³ç­–")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("maybeCompress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Message")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¶ˆæ¯å¤§å°é˜ˆå€¼")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COMPRESSION_THRESHOLD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1KB")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COMPRESSION_THRESHOLD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°æ¶ˆæ¯ä¸å‹ç¼©")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPayload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ¹æ®æ¶ˆæ¯ç±»å‹é€‰æ‹©å‹ç¼©ç®—æ³•")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TEXT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressGzip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPayload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BINARY"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressLz4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPayload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPayload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"å®é™…åº”ç”¨æ¡ˆä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…åº”ç”¨æ¡ˆä¾‹"}},[s._v("#")]),s._v(" å®é™…åº”ç”¨æ¡ˆä¾‹")]),s._v(" "),t("h3",{attrs:{id:"æ¡ˆä¾‹ä¸€-ç”µå•†è®¢å•ç³»ç»Ÿ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä¸€-ç”µå•†è®¢å•ç³»ç»Ÿ"}},[s._v("#")]),s._v(" æ¡ˆä¾‹ä¸€ï¼šç”µå•†è®¢å•ç³»ç»Ÿ")]),s._v(" "),t("p",[s._v("æŸå¤§å‹ç”µå•†å¹³å°ä½¿ç”¨Kafkaå¤„ç†è®¢å•æ¶ˆæ¯ï¼Œé¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("è®¢å•æ¶ˆæ¯é‡å¤§ï¼Œé«˜å³°æœŸæ¯ç§’å¤„ç†æ•°ä¸‡æ¡")]),s._v(" "),t("li",[s._v("è®¢å•æ•°æ®åŒ…å«å¤§é‡é‡å¤ä¿¡æ¯ï¼ˆç”¨æˆ·åœ°å€ã€å•†å“ä¿¡æ¯ç­‰ï¼‰")]),s._v(" "),t("li",[s._v("è·¨åœ°åŸŸéƒ¨ç½²ï¼Œç½‘ç»œå¸¦å®½æœ‰é™")])]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ä½¿ç”¨Protobufåºåˆ—åŒ–è®¢å•æ•°æ®")]),s._v(" "),t("li",[s._v("åº”ç”¨GZIPå‹ç¼©ï¼Œå‹ç¼©ç‡å¯è¾¾65%")]),s._v(" "),t("li",[s._v("å®ç°æ‰¹é‡å¤„ç†ï¼Œæ¯æ‰¹æ¬¡100æ¡æ¶ˆæ¯")])]),s._v(" "),t("p",[t("strong",[s._v("æ•ˆæœ")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç½‘ç»œå¸¦å®½ä½¿ç”¨å‡å°‘70%")]),s._v(" "),t("li",[s._v("æ•´ä½“ååé‡æå‡3å€")]),s._v(" "),t("li",[s._v("å­˜å‚¨æˆæœ¬é™ä½60%")])]),s._v(" "),t("h3",{attrs:{id:"æ¡ˆä¾‹äºŒ-å®æ—¶ç›‘æ§ç³»ç»Ÿ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹äºŒ-å®æ—¶ç›‘æ§ç³»ç»Ÿ"}},[s._v("#")]),s._v(" æ¡ˆä¾‹äºŒï¼šå®æ—¶ç›‘æ§ç³»ç»Ÿ")]),s._v(" "),t("p",[s._v("æŸSaaSå¹³å°çš„å®æ—¶ç›‘æ§ç³»ç»Ÿéœ€è¦å¤„ç†å¤§é‡æŒ‡æ ‡æ•°æ®ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æ•°æ®ç‚¹é¢‘ç‡é«˜ï¼ˆæ¯ç§’æ•°åƒæ¬¡ï¼‰")]),s._v(" "),t("li",[s._v("å¯¹å»¶è¿Ÿæ•æ„Ÿï¼ˆè¦æ±‚æ¯«ç§’çº§å¤„ç†ï¼‰")]),s._v(" "),t("li",[s._v("æ•°æ®æœ‰å­£èŠ‚æ€§ç‰¹å¾ï¼ˆæŸäº›æ—¶æ®µæ•°æ®é‡å¤§ï¼‰")])]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ä½¿ç”¨LZ4å‹ç¼©ç®—æ³•ï¼Œé€Ÿåº¦ä¼˜å…ˆ")]),s._v(" "),t("li",[s._v("å®ç°åŠ¨æ€å‹ç¼©é˜ˆå€¼ï¼ˆæ ¹æ®ç³»ç»Ÿè´Ÿè½½è°ƒæ•´ï¼‰")]),s._v(" "),t("li",[s._v("å¯¹é«˜é¢‘æ•°æ®ä½¿ç”¨å·®åˆ†å‹ç¼©")])]),s._v(" "),t("p",[t("strong",[s._v("æ•ˆæœ")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å‹ç¼©/è§£å‹æ—¶é—´æ§åˆ¶åœ¨1msä»¥å†…")]),s._v(" "),t("li",[s._v("ç³»ç»Ÿæ•´ä½“å»¶è¿Ÿé™ä½40%")]),s._v(" "),t("li",[s._v("èµ„æºåˆ©ç”¨ç‡æå‡35%")])]),s._v(" "),t("h2",{attrs:{id:"æ€§èƒ½æµ‹è¯•ä¸è¯„ä¼°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½æµ‹è¯•ä¸è¯„ä¼°"}},[s._v("#")]),s._v(" æ€§èƒ½æµ‹è¯•ä¸è¯„ä¼°")]),s._v(" "),t("h3",{attrs:{id:"æµ‹è¯•æ–¹æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•æ–¹æ³•"}},[s._v("#")]),s._v(" æµ‹è¯•æ–¹æ³•")]),s._v(" "),t("p",[s._v("ä¸ºäº†è¯„ä¼°ä¸åŒå‹ç¼©ç­–ç•¥çš„æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä»¥ä¸‹æµ‹è¯•ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‹ç¼©æ€§èƒ½æµ‹è¯•ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("runCompressionBenchmark")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‡†å¤‡æµ‹è¯•æ•°æ®")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" testData "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("generateTestData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1MBæ•°æ®")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æµ‹è¯•ä¸åŒç®—æ³•")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" results "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" gzipCompressed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressGzip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("testData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    results"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GZIP"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" lz4Compressed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compressLz4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("testData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    results"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LZ4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¾“å‡ºç»“æœ")]),s._v("\n    results"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("algo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%s: %dms, å‹ç¼©ç‡: %.2f%%\\n"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            algo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("algo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("testData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"å…³é”®æŒ‡æ ‡è¯„ä¼°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®æŒ‡æ ‡è¯„ä¼°"}},[s._v("#")]),s._v(" å…³é”®æŒ‡æ ‡è¯„ä¼°")]),s._v(" "),t("p",[s._v("è¯„ä¼°å‹ç¼©ç­–ç•¥æ—¶ï¼Œåº”å…³æ³¨ä»¥ä¸‹å…³é”®æŒ‡æ ‡ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("å‹ç¼©ç‡")]),s._v("ï¼šå‹ç¼©å‰åæ•°æ®å¤§å°çš„æ¯”ä¾‹")]),s._v(" "),t("li",[t("strong",[s._v("å‹ç¼©é€Ÿåº¦")]),s._v("ï¼šå®Œæˆå‹ç¼©æ‰€éœ€æ—¶é—´")]),s._v(" "),t("li",[t("strong",[s._v("è§£å‹é€Ÿåº¦")]),s._v("ï¼šå®Œæˆè§£å‹æ‰€éœ€æ—¶é—´")]),s._v(" "),t("li",[t("strong",[s._v("CPUä½¿ç”¨ç‡")]),s._v("ï¼šå‹ç¼©/è§£å‹è¿‡ç¨‹ä¸­çš„èµ„æºæ¶ˆè€—")]),s._v(" "),t("li",[t("strong",[s._v("å†…å­˜å ç”¨")]),s._v("ï¼šå‹ç¼©/è§£å‹è¿‡ç¨‹ä¸­çš„å†…å­˜ä½¿ç”¨")])]),s._v(" "),t("h2",{attrs:{id:"æœ€ä½³å®è·µå»ºè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ä½³å®è·µå»ºè®®"}},[s._v("#")]),s._v(" æœ€ä½³å®è·µå»ºè®®")]),s._v(" "),t("h3",{attrs:{id:"_1-æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©"}},[s._v("#")]),s._v(" 1. æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©")]),s._v(" "),t("p",[s._v("ä¸åŒä¸šåŠ¡åœºæ™¯åº”é‡‡ç”¨ä¸åŒçš„å‹ç¼©ç­–ç•¥ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å®æ—¶äº¤æ˜“ç³»ç»Ÿ")]),s._v("ï¼šä¼˜å…ˆè€ƒè™‘é€Ÿåº¦ï¼Œä½¿ç”¨LZ4æˆ–Snappy")]),s._v(" "),t("li",[t("strong",[s._v("æ•°æ®åˆ†æç³»ç»Ÿ")]),s._v("ï¼šä¼˜å…ˆè€ƒè™‘å‹ç¼©ç‡ï¼Œä½¿ç”¨GZIPæˆ–Zstd")]),s._v(" "),t("li",[t("strong",[s._v("æ—¥å¿—æ”¶é›†ç³»ç»Ÿ")]),s._v("ï¼šå¹³è¡¡é€Ÿåº¦å’Œå‹ç¼©ç‡ï¼Œä½¿ç”¨Zstdä¸­ç­‰å‹ç¼©çº§åˆ«")])]),s._v(" "),t("h3",{attrs:{id:"_2-å®ç°åŠ¨æ€å‹ç¼©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®ç°åŠ¨æ€å‹ç¼©"}},[s._v("#")]),s._v(" 2. å®ç°åŠ¨æ€å‹ç¼©")]),s._v(" "),t("p",[s._v("æ ¹æ®ç³»ç»Ÿè´Ÿè½½å’Œæ¶ˆæ¯ç‰¹å¾åŠ¨æ€è°ƒæ•´å‹ç¼©ç­–ç•¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŠ¨æ€å‹ç¼©ç­–ç•¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DynamicCompressionStrategy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionAlgorithm")]),s._v(" currentAlgorithm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SystemMonitor")]),s._v(" systemMonitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("byte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Message")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ¹æ®ç³»ç»ŸçŠ¶æ€é€‰æ‹©ç®—æ³•")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("systemMonitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCpuUsage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            currentAlgorithm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionAlgorithm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LZ4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½CPUä½¿ç”¨")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            currentAlgorithm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionAlgorithm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZSTD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¤§æ•°æ®é«˜å‹ç¼©")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            currentAlgorithm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionAlgorithm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GZIP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" currentAlgorithm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("compress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPayload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"_3-ç›‘æ§ä¸è°ƒä¼˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç›‘æ§ä¸è°ƒä¼˜"}},[s._v("#")]),s._v(" 3. ç›‘æ§ä¸è°ƒä¼˜")]),s._v(" "),t("p",[s._v("å»ºç«‹å®Œå–„çš„ç›‘æ§æœºåˆ¶ï¼ŒæŒç»­ä¼˜åŒ–å‹ç¼©ç­–ç•¥ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ç›‘æ§ä¸åŒå‹ç¼©ç®—æ³•çš„æ€§èƒ½æŒ‡æ ‡")]),s._v(" "),t("li",[s._v("è·Ÿè¸ªç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ")]),s._v(" "),t("li",[s._v("å®šæœŸåˆ†ææ¶ˆæ¯ç‰¹å¾å˜åŒ–")]),s._v(" "),t("li",[s._v("æ ¹æ®ç›‘æ§ç»“æœè°ƒæ•´å‹ç¼©ç­–ç•¥")])]),s._v(" "),t("h3",{attrs:{id:"_4-å…¼å®¹æ€§è€ƒè™‘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å…¼å®¹æ€§è€ƒè™‘"}},[s._v("#")]),s._v(" 4. å…¼å®¹æ€§è€ƒè™‘")]),s._v(" "),t("p",[s._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç¡®ä¿å‹ç¼©ç­–ç•¥çš„å…¼å®¹æ€§ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨å¹¿æ³›æ”¯æŒçš„å‹ç¼©ç®—æ³•")]),s._v(" "),t("li",[s._v("æä¾›å‹ç¼©å…ƒæ•°æ®ï¼ˆç®—æ³•ç±»å‹ã€å‹ç¼©çº§åˆ«ç­‰ï¼‰")]),s._v(" "),t("li",[s._v("å®ç°å‘åå…¼å®¹æœºåˆ¶")]),s._v(" "),t("li",[s._v("è€ƒè™‘ä¸åŒç‰ˆæœ¬é—´çš„åè®®å…¼å®¹")])]),s._v(" "),t("h2",{attrs:{id:"æœªæ¥å±•æœ›"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å±•æœ›"}},[s._v("#")]),s._v(" æœªæ¥å±•æœ›")]),s._v(" "),t("p",[s._v("éšç€æŠ€æœ¯çš„å‘å±•ï¼Œæ¶ˆæ¯é˜Ÿåˆ—çš„å‹ç¼©ä¸ä¼ è¾“ä¼˜åŒ–ä¹Ÿå°†é¢ä¸´æ–°çš„æŒ‘æˆ˜å’Œæœºé‡ï¼š")]),s._v(" "),t("h3",{attrs:{id:"_1-aié©±åŠ¨çš„å‹ç¼©ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-aié©±åŠ¨çš„å‹ç¼©ä¼˜åŒ–"}},[s._v("#")]),s._v(" 1. AIé©±åŠ¨çš„å‹ç¼©ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("åˆ©ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œæ ¹æ®å†å²æ•°æ®é¢„æµ‹æœ€ä½³å‹ç¼©ç­–ç•¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# AIé©±åŠ¨çš„å‹ç¼©é€‰æ‹©ç¤ºä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionOptimizer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("model "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" load_model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"compression_model.h5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("recommend_compression")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¾“å…¥æ¶ˆæ¯ç‰¹å¾ï¼ˆå¤§å°ã€ç±»å‹ã€å†å²å‹ç¼©ç‡ç­‰ï¼‰")]),s._v("\n        features "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" preprocess"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message_features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é¢„æµ‹æœ€ä½³å‹ç¼©ç®—æ³•")]),s._v("\n        prediction "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("predict"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("features"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" get_algorithm_from_prediction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prediction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_2-é‡å­å‹ç¼©ç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é‡å­å‹ç¼©ç®—æ³•"}},[s._v("#")]),s._v(" 2. é‡å­å‹ç¼©ç®—æ³•")]),s._v(" "),t("p",[s._v("éšç€é‡å­è®¡ç®—æŠ€æœ¯çš„å‘å±•ï¼Œå¯èƒ½ä¼šå‡ºç°å…¨æ–°çš„å‹ç¼©ç®—æ³•ï¼Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹æä¾›æŒ‡æ•°çº§çš„å‹ç¼©æ•ˆç‡ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_3-è¾¹ç¼˜è®¡ç®—åœºæ™¯ä¸‹çš„å‹ç¼©ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-è¾¹ç¼˜è®¡ç®—åœºæ™¯ä¸‹çš„å‹ç¼©ä¼˜åŒ–"}},[s._v("#")]),s._v(" 3. è¾¹ç¼˜è®¡ç®—åœºæ™¯ä¸‹çš„å‹ç¼©ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("åœ¨è¾¹ç¼˜è®¡ç®—å’Œç‰©è”ç½‘åœºæ™¯ä¸‹ï¼Œèµ„æºå—é™ç¯å¢ƒä¸­çš„å‹ç¼©ä¼˜åŒ–å°†æˆä¸ºç ”ç©¶çƒ­ç‚¹ã€‚")]),s._v(" "),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v("æ¶ˆæ¯å‹ç¼©ä¸ä¼ è¾“ä¼˜åŒ–æ˜¯æ„å»ºé«˜æ•ˆæ¶ˆæ¯ç³»ç»Ÿçš„é‡è¦ç¯èŠ‚ã€‚é€šè¿‡åˆç†é€‰æ‹©å‹ç¼©ç®—æ³•ã€ä¼˜åŒ–ä¼ è¾“ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ˜¾è‘—å¢åŠ ç³»ç»Ÿè´Ÿæ‹…çš„å‰æä¸‹ï¼Œå¤§å¹…æå‡æ¶ˆæ¯é˜Ÿåˆ—çš„æ€§èƒ½å’Œå¯é æ€§ã€‚")]),s._v(" "),t("p",[s._v('åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ²¡æœ‰"ä¸€åˆ€åˆ‡"çš„è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯ã€ç³»ç»Ÿèµ„æºå’Œæ€§èƒ½è¦æ±‚ï¼Œé€‰æ‹©æœ€é€‚åˆçš„å‹ç¼©ç­–ç•¥ã€‚åŒæ—¶ï¼ŒæŒç»­çš„ç›‘æ§å’Œè°ƒä¼˜æ˜¯ä¿æŒç³»ç»Ÿé«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚')]),s._v(" "),t("p",[s._v("å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨è®¾è®¡å’Œå®ç°æ¶ˆæ¯ç³»ç»Ÿæ—¶ï¼Œåšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ï¼Œæ„å»ºå‡ºæ›´åŠ é«˜æ•ˆã€å¯é çš„æ¶ˆæ¯é˜Ÿåˆ—åŸºç¡€è®¾æ–½ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v('æ­£å¦‚è®¡ç®—æœºç§‘å­¦å®¶Philippe Flajoletæ‰€è¯´ï¼š"ç®—æ³•æ˜¯æ€æƒ³çš„ç»“æ™¶ï¼Œè€Œä¼˜åŒ–æ˜¯è‰ºæœ¯çš„è¡¨è¾¾ã€‚"åœ¨æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸–ç•Œé‡Œï¼Œå‹ç¼©ä¸ä¼ è¾“ä¼˜åŒ–æ­£æ˜¯è¿™ç§è‰ºæœ¯è¡¨è¾¾çš„ç»ä½³ä½“ç°ã€‚')])])])}),[],!1,null,null,null);t.default=e.exports}}]);