(window.webpackJsonp=window.webpackJsonp||[]).push([[499],{851:function(s,t,a){"use strict";a.r(t);var n=a(15),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v("åœ¨å½“ä»Šå¤æ‚çš„è½¯ä»¶æ¶æ„ä¸­ï¼Œéšç€åº”ç”¨è§„æ¨¡ä¸æ–­æ‰©å¤§å’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œå¦‚ä½•ç¡®ä¿åº”ç”¨çš„ç¨³å®šæ€§å’Œæ€§èƒ½å˜å¾—è¶Šæ¥è¶Šå…·æœ‰æŒ‘æˆ˜æ€§ã€‚"),t("s",[s._v('å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒå‡ºç°é—®é¢˜æ—¶ï¼Œæ‰æƒ³èµ·"è¦æ˜¯æˆ‘ä»¬æœ‰æ›´å¥½çš„ç›‘æ§ç³»ç»Ÿå°±å¥½äº†"')]),s._v(" ğŸ¤¦â€â™‚ï¸ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨æ¡†æ¶ç›‘æ§ä¸å¯è§‚æµ‹æ€§çš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•åœ¨ä½ çš„æ¡†æ¶ä¸­å®ç°ä¸€å¥—å®Œæ•´çš„ç›‘æ§ä½“ç³»ã€‚")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v('"å¯è§‚æµ‹æ€§ä¸ä»…ä»…æ˜¯ç›‘æ§ç³»ç»Ÿï¼Œå®ƒæ˜¯ä¸€ç§è®©ä½ ä»å¤–éƒ¨è§‚å¯Ÿç³»ç»Ÿå†…éƒ¨çŠ¶æ€çš„èƒ½åŠ›ã€‚"')]),s._v(" "),t("ul",[t("li",[s._v("Adrian Cockcroftï¼Œå‰NetflixæŠ€æœ¯ä¸»ç®¡")])])]),s._v(" "),t("h2",{attrs:{id:"ç›‘æ§ä¸å¯è§‚æµ‹æ€§çš„åŸºæœ¬æ¦‚å¿µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§ä¸å¯è§‚æµ‹æ€§çš„åŸºæœ¬æ¦‚å¿µ"}},[s._v("#")]),s._v(" ç›‘æ§ä¸å¯è§‚æµ‹æ€§çš„åŸºæœ¬æ¦‚å¿µ")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯ç›‘æ§ä¸å¯è§‚æµ‹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ç›‘æ§ä¸å¯è§‚æµ‹æ€§"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ç›‘æ§ä¸å¯è§‚æµ‹æ€§ï¼Ÿ")]),s._v(" "),t("p",[t("strong",[s._v("ç›‘æ§")]),s._v('é€šå¸¸æŒ‡çš„æ˜¯æ”¶é›†ç³»ç»ŸæŒ‡æ ‡å¹¶è®¾ç½®å‘Šè­¦ï¼Œä»¥æ£€æµ‹ç³»ç»Ÿä¸­çš„é—®é¢˜ã€‚å®ƒå…³æ³¨çš„æ˜¯ç³»ç»Ÿçš„"å¥åº·çŠ¶å†µ"å’Œ"æ€§èƒ½è¡¨ç°"ã€‚')]),s._v(" "),t("p",[t("strong",[s._v("å¯è§‚æµ‹æ€§")]),s._v('åˆ™æ›´è¿›ä¸€æ­¥ï¼Œå®ƒæŒ‡çš„æ˜¯é€šè¿‡ç³»ç»Ÿçš„å¤–éƒ¨è¾“å‡ºï¼ˆå¦‚æ—¥å¿—ã€æŒ‡æ ‡ã€è¿½è¸ªï¼‰æ¥ç†è§£ç³»ç»Ÿå†…éƒ¨çŠ¶æ€çš„èƒ½åŠ›ã€‚å¯è§‚æµ‹æ€§å¸®åŠ©æˆ‘ä»¬å›ç­”"ä¸ºä»€ä¹ˆ"ç³»ç»Ÿä¼šå‡ºç°é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯"æ˜¯å¦"å‡ºç°äº†é—®é¢˜ã€‚')]),s._v(" "),t("h3",{attrs:{id:"ä¸‰å¤§æ”¯æŸ±-metricsã€logsã€traces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰å¤§æ”¯æŸ±-metricsã€logsã€traces"}},[s._v("#")]),s._v(" ä¸‰å¤§æ”¯æŸ±ï¼šMetricsã€Logsã€Traces")]),s._v(" "),t("p",[s._v("å¯è§‚æµ‹æ€§çš„ä¸‰å¤§æ”¯æŸ±æ˜¯ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("æŒ‡æ ‡ (Metrics)")]),s._v("ï¼šæ•°å€¼å‹æ•°æ®ï¼Œè¡¨ç¤ºç³»ç»Ÿåœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€æˆ–è¡Œä¸ºã€‚ä¾‹å¦‚ï¼šè¯·æ±‚é€Ÿç‡ã€é”™è¯¯ç‡ã€CPUä½¿ç”¨ç‡ç­‰ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æ—¥å¿— (Logs)")]),s._v("ï¼šç¦»æ•£çš„äº‹ä»¶è®°å½•ï¼ŒåŒ…å«æ—¶é—´æˆ³å’Œæè¿°æ€§ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼šé”™è¯¯æ¶ˆæ¯ã€ç”¨æˆ·æ“ä½œè®°å½•ç­‰ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è¿½è¸ª (Traces)")]),s._v("ï¼šè¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å®Œæ•´è·¯å¾„è®°å½•ï¼Œå±•ç¤ºäº†è¯·æ±‚å¦‚ä½•è·¨è¶Šä¸åŒçš„æœåŠ¡å’Œç»„ä»¶ã€‚")])])]),s._v(" "),t("blockquote",[t("p",[s._v("æ²¡æœ‰å•ä¸€çš„æ•°æ®æºèƒ½å¤Ÿæä¾›å®Œæ•´çš„ç³»ç»Ÿè§†å›¾ï¼Œåªæœ‰å°†è¿™ä¸‰è€…ç»“åˆï¼Œæ‰èƒ½æ„å»ºçœŸæ­£å¼ºå¤§çš„å¯è§‚æµ‹æ€§ç³»ç»Ÿã€‚")])]),s._v(" "),t("h2",{attrs:{id:"ä¸»æµæ¡†æ¶ä¸­çš„ç›‘æ§æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»æµæ¡†æ¶ä¸­çš„ç›‘æ§æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" ä¸»æµæ¡†æ¶ä¸­çš„ç›‘æ§æ–¹æ¡ˆ")]),s._v(" "),t("h3",{attrs:{id:"spring-boot-çš„ç›‘æ§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-çš„ç›‘æ§"}},[s._v("#")]),s._v(" Spring Boot çš„ç›‘æ§")]),s._v(" "),t("p",[s._v("Spring Bootæä¾›äº†å¼ºå¤§çš„ç›‘æ§èƒ½åŠ›ï¼Œä¸»è¦é€šè¿‡Actuatoræ¨¡å—å®ç°ï¼š")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootApplication")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableActuator")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Application")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringApplication")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("é€šè¿‡é…ç½®"),t("code",[s._v("application.properties")]),s._v("å¯ä»¥æš´éœ²ç«¯ç‚¹å¹¶è‡ªå®šä¹‰æŒ‡æ ‡ï¼š")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æš´éœ²æ‰€æœ‰ç«¯ç‚¹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("management.endpoints.web.exposure.include")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è‡ªå®šä¹‰æŒ‡æ ‡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("management.metrics.export.simple.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"django-çš„ç›‘æ§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#django-çš„ç›‘æ§"}},[s._v("#")]),s._v(" Django çš„ç›‘æ§")]),s._v(" "),t("p",[s._v("Djangoæ¡†æ¶å¯ä»¥é€šè¿‡é›†æˆPrometheuså’ŒGrafanaæ¥å®ç°ç›‘æ§ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å®‰è£…django-prometheusåŒ…ï¼š")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" django-prometheus\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("åœ¨settings.pyä¸­é…ç½®ï¼š")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("INSTALLED_APPS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_prometheus'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nMIDDLEWARE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_prometheus.middleware.PrometheusBeforeMiddleware'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_prometheus.middleware.PrometheusAfterMiddleware'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"react-å‰ç«¯æ¡†æ¶çš„ç›‘æ§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-å‰ç«¯æ¡†æ¶çš„ç›‘æ§"}},[s._v("#")]),s._v(" React å‰ç«¯æ¡†æ¶çš„ç›‘æ§")]),s._v(" "),t("p",[s._v("å¯¹äºå‰ç«¯æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨Sentryè¿›è¡Œé”™è¯¯ç›‘æ§ï¼Œä½¿ç”¨RUMï¼ˆReal User Monitoringï¼‰è¿›è¡Œæ€§èƒ½ç›‘æ§ï¼š")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" Sentry "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/react"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" BrowserTracing "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@sentry/tracing"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSentry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("dsn")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your-dsn"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("integrations")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BrowserTracing")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("tracesSampleRate")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"å…³é”®æŒ‡æ ‡ä¸å‘Šè­¦ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®æŒ‡æ ‡ä¸å‘Šè­¦ç­–ç•¥"}},[s._v("#")]),s._v(" å…³é”®æŒ‡æ ‡ä¸å‘Šè­¦ç­–ç•¥")]),s._v(" "),t("h3",{attrs:{id:"åº”è¯¥ç›‘æ§å“ªäº›å…³é”®æŒ‡æ ‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åº”è¯¥ç›‘æ§å“ªäº›å…³é”®æŒ‡æ ‡"}},[s._v("#")]),s._v(" åº”è¯¥ç›‘æ§å“ªäº›å…³é”®æŒ‡æ ‡ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ ¹æ®åº”ç”¨ç±»å‹ä¸åŒï¼Œéœ€è¦ç›‘æ§çš„å…³é”®æŒ‡æ ‡ä¹Ÿæœ‰æ‰€å·®å¼‚ï¼Œä½†é€šå¸¸åŒ…æ‹¬ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("åº”ç”¨æ€§èƒ½æŒ‡æ ‡")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å“åº”æ—¶é—´ï¼ˆP95ã€P99ï¼‰")]),s._v(" "),t("li",[s._v("ååé‡ï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰")]),s._v(" "),t("li",[s._v("é”™è¯¯ç‡")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("èµ„æºæŒ‡æ ‡")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("CPUä½¿ç”¨ç‡")]),s._v(" "),t("li",[s._v("å†…å­˜ä½¿ç”¨æƒ…å†µ")]),s._v(" "),t("li",[s._v("ç£ç›˜I/O")]),s._v(" "),t("li",[s._v("ç½‘ç»œæµé‡")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä¸šåŠ¡æŒ‡æ ‡")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç”¨æˆ·æ´»è·ƒåº¦")]),s._v(" "),t("li",[s._v("è½¬åŒ–ç‡")]),s._v(" "),t("li",[s._v("è‡ªå®šä¹‰ä¸šåŠ¡KPI")])])])]),s._v(" "),t("h3",{attrs:{id:"å‘Šè­¦ç­–ç•¥è®¾è®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‘Šè­¦ç­–ç•¥è®¾è®¡"}},[s._v("#")]),s._v(" å‘Šè­¦ç­–ç•¥è®¾è®¡")]),s._v(" "),t("p",[s._v("æœ‰æ•ˆçš„å‘Šè­¦ç­–ç•¥åº”è¯¥éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("åˆ†çº§å‘Šè­¦")]),s._v("ï¼šæ ¹æ®é—®é¢˜çš„ä¸¥é‡æ€§è®¾ç½®ä¸åŒçº§åˆ«çš„å‘Šè­¦ï¼ˆè­¦å‘Šã€ä¸¥é‡ã€ç´§æ€¥ï¼‰ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å‘Šè­¦æŠ‘åˆ¶")]),s._v("ï¼šé¿å…åœ¨çŸ­æ—¶é—´å†…é‡å¤å‘é€ç›¸åŒçš„å‘Šè­¦ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å‘Šè­¦èšåˆ")]),s._v("ï¼šå°†ç›¸å…³çš„å‘Šè­¦åˆå¹¶ä¸ºä¸€ä¸ªé€šçŸ¥ï¼Œå‡å°‘å‘Šè­¦å™ªéŸ³ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å‘Šè­¦å‡çº§")]),s._v("ï¼šå¦‚æœé—®é¢˜æœªå¾—åˆ°åŠæ—¶å¤„ç†ï¼Œè‡ªåŠ¨å‡çº§é€šçŸ¥ç»™æ›´é«˜çº§åˆ«çš„å›¢é˜Ÿã€‚")])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç¤ºä¾‹å‘Šè­¦é…ç½®ï¼ˆPrometheus AlertManagerï¼‰")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("groups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" example\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("alert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" HighErrorRate\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("expr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rate(http_requests_total"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v('status=~"5.."'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("5m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(") "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" 0.1\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10m\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("severity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" critical\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("annotations")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("summary")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"High error rate on {{ $labels.instance }}"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{ $value }} errors per second"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"åˆ†å¸ƒå¼è¿½è¸ªåœ¨æ¡†æ¶ä¸­çš„åº”ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼è¿½è¸ªåœ¨æ¡†æ¶ä¸­çš„åº”ç”¨"}},[s._v("#")]),s._v(" åˆ†å¸ƒå¼è¿½è¸ªåœ¨æ¡†æ¶ä¸­çš„åº”ç”¨")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼è¿½è¸ª"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼è¿½è¸ª"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼è¿½è¸ªï¼Ÿ")]),s._v(" "),t("p",[s._v("åˆ†å¸ƒå¼è¿½è¸ªæ˜¯ä¸€ç§ç”¨äºåˆ†æå’Œè°ƒè¯•å¾®æœåŠ¡æ¶æ„ä¸­è¯·æ±‚æµçš„æŠ€æœ¯ã€‚å®ƒä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„è¿½è¸ªIDï¼Œå¹¶åœ¨è¯·æ±‚ç»è¿‡çš„æ¯ä¸ªæœåŠ¡ä¸­è®°å½•æ—¶é—´æˆ³å’Œå…ƒæ•°æ®ã€‚")]),s._v(" "),t("h3",{attrs:{id:"opentracingæ ‡å‡†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#opentracingæ ‡å‡†"}},[s._v("#")]),s._v(" OpenTracingæ ‡å‡†")]),s._v(" "),t("p",[s._v("OpenTracingæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„åˆ†å¸ƒå¼è¿½è¸ªAPIï¼Œæ”¯æŒå¤šç§åç«¯å®ç°ã€‚ä»¥ä¸‹æ˜¯å‡ ç§ä¸»æµæ¡†æ¶ä¸­çš„OpenTracingé›†æˆç¤ºä¾‹ï¼š")]),s._v(" "),t("h4",{attrs:{id:"spring-booté›†æˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-booté›†æˆ"}},[s._v("#")]),s._v(" Spring Booté›†æˆ")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("opentracing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tracer")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("opentracing"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GlobalTracer")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tracer")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jaegerTracer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Configuration")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fromEnv")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your-service-name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTracer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨ä¸šåŠ¡ä»£ç ä¸­åˆ›å»ºspan")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tracer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SpanBuilder")]),s._v(" spanBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GlobalTracer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildSpan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"process-request"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("withTag")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http.method"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("withTag")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http.url"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequestURI")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Scope")]),s._v(" scope "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" spanBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("startActive")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸šåŠ¡é€»è¾‘")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    spanBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"event"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error.object"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h4",{attrs:{id:"djangoé›†æˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#djangoé›†æˆ"}},[s._v("#")]),s._v(" Djangoé›†æˆ")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" jaeger_client "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Config\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("initialize_tracer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        config"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sampler'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'const'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'param'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logging'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'reporter_batch_size'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        service_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your-service-name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        validate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("initialize_tracer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åœ¨ä¸­é—´ä»¶ä¸­æ·»åŠ è¿½è¸ª")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TracingMiddleware")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" get_response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_response "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" get_response\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tracer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" initialize_tracer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__call__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        span "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tracer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start_span"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            tags"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http.method'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http.url'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("build_absolute_uri"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            response "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            span"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("set_tag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http.status_code'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status_code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" response\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            span"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("set_tag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            span"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("finish"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("h2",{attrs:{id:"ç›‘æ§æ•°æ®çš„å¯è§†åŒ–ä¸ä»ªè¡¨ç›˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§æ•°æ®çš„å¯è§†åŒ–ä¸ä»ªè¡¨ç›˜"}},[s._v("#")]),s._v(" ç›‘æ§æ•°æ®çš„å¯è§†åŒ–ä¸ä»ªè¡¨ç›˜")]),s._v(" "),t("h3",{attrs:{id:"grafanaä»ªè¡¨ç›˜è®¾è®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grafanaä»ªè¡¨ç›˜è®¾è®¡"}},[s._v("#")]),s._v(" Grafanaä»ªè¡¨ç›˜è®¾è®¡")]),s._v(" "),t("p",[s._v("Grafanaæ˜¯ä¸€ä¸ªå¼€æºçš„ç›‘æ§å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥åˆ›å»ºä¸°å¯Œçš„ä»ªè¡¨ç›˜æ¥å±•ç¤ºç›‘æ§æ•°æ®ã€‚ä»¥ä¸‹æ˜¯è®¾è®¡æœ‰æ•ˆä»ªè¡¨ç›˜çš„å‡ ä¸ªå…³é”®ç‚¹ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("å…³æ³¨ä¸šåŠ¡ä»·å€¼")]),s._v("ï¼šä¼˜å…ˆå±•ç¤ºå¯¹ä¸šåŠ¡å†³ç­–æœ‰ç›´æ¥å½±å“çš„æŒ‡æ ‡ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æä¾›ä¸Šä¸‹æ–‡")]),s._v("ï¼šç¡®ä¿ä»ªè¡¨ç›˜åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¸®åŠ©ç†è§£æ•°æ®ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è®¾ç½®åˆç†çš„æ—¶é—´èŒƒå›´")]),s._v("ï¼šæ ¹æ®ç›‘æ§ç›®çš„é€‰æ‹©é€‚å½“çš„æ—¶é—´èŒƒå›´ï¼ˆå®æ—¶ã€å°æ—¶ã€å¤©ã€å‘¨ï¼‰ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨ä¸€è‡´çš„è§†è§‰è®¾è®¡")]),s._v("ï¼šä¿æŒé¢œè‰²ã€å­—ä½“å’Œå¸ƒå±€çš„ä¸€è‡´æ€§ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"ç¤ºä¾‹ä»ªè¡¨ç›˜é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹ä»ªè¡¨ç›˜é…ç½®"}},[s._v("#")]),s._v(" ç¤ºä¾‹ä»ªè¡¨ç›˜é…ç½®")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dashboard"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"åº”ç”¨æ€§èƒ½ç›‘æ§"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"panels"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è¯·æ±‚é€Ÿç‡"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"graph"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"expr"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate(http_requests_total[5m])"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"legendFormat"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{method}} {{status}}"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"é”™è¯¯ç‡"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"singlestat"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"expr"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate(http_requests_total{status=~"')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".."),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"}[5m]) / rate(http_requests_total[5m])"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"legendFormat"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"é”™è¯¯ç‡"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å“åº”æ—¶é—´åˆ†å¸ƒ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"graph"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"expr"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"legendFormat"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"P95å“åº”æ—¶é—´"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("h2",{attrs:{id:"ç›‘æ§æ•°æ®çš„å­˜å‚¨ä¸æŸ¥è¯¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§æ•°æ®çš„å­˜å‚¨ä¸æŸ¥è¯¢"}},[s._v("#")]),s._v(" ç›‘æ§æ•°æ®çš„å­˜å‚¨ä¸æŸ¥è¯¢")]),s._v(" "),t("h3",{attrs:{id:"æ—¶åºæ•°æ®åº“é€‰æ‹©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ—¶åºæ•°æ®åº“é€‰æ‹©"}},[s._v("#")]),s._v(" æ—¶åºæ•°æ®åº“é€‰æ‹©")]),s._v(" "),t("p",[s._v("ç›‘æ§æ•°æ®é€šå¸¸æ˜¯æ—¶é—´åºåˆ—æ•°æ®ï¼Œå› æ­¤éœ€è¦ä¸“é—¨çš„æ—¶åºæ•°æ®åº“æ¥é«˜æ•ˆå­˜å‚¨å’ŒæŸ¥è¯¢ã€‚ä¸»æµçš„æ—¶åºæ•°æ®åº“åŒ…æ‹¬ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("Prometheus")]),s._v("ï¼šä¸“ä¸ºç›‘æ§å’Œå‘Šè­¦è®¾è®¡çš„å¼€æºæ—¶åºæ•°æ®åº“ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("InfluxDB")]),s._v("ï¼šé«˜æ€§èƒ½çš„æ—¶åºæ•°æ®åº“ï¼Œæ”¯æŒTSQLæŸ¥è¯¢è¯­è¨€ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("TimescaleDB")]),s._v("ï¼šåŸºäºPostgreSQLçš„æ—¶åºæ•°æ®åº“æ‰©å±•ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("VictoriaMetrics")]),s._v("ï¼šPrometheusçš„æ›¿ä»£å“ï¼Œèµ„æºæ¶ˆè€—æ›´å°‘ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§"}},[s._v("#")]),s._v(" æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("åˆç†è®¾ç½®æ•°æ®ä¿ç•™ç­–ç•¥")]),s._v("ï¼šæ ¹æ®æ•°æ®çš„é‡è¦æ€§å’Œè®¿é—®é¢‘ç‡ï¼Œè®¾ç½®ä¸åŒçš„ä¿ç•™ç­–ç•¥ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨æ ‡ç­¾è¿‡æ»¤")]),s._v("ï¼šåœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨æ ‡ç­¾è¿‡æ»¤å¯ä»¥æ˜¾è‘—å‡å°‘æ•°æ®é‡ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é¢„èšåˆæ•°æ®")]),s._v("ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢çš„æ•°æ®è¿›è¡Œé¢„èšåˆï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é¿å…é«˜åŸºæ•°æ ‡ç­¾")]),s._v("ï¼šé«˜åŸºæ•°æ ‡ç­¾ï¼ˆå¦‚ç”¨æˆ·IDï¼‰ä¼šå¯¼è‡´å­˜å‚¨å’ŒæŸ¥è¯¢æ€§èƒ½é—®é¢˜ã€‚")])])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- TimescaleDBç¤ºä¾‹ï¼šåˆ›å»ºè¶…è¡¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" metrics "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),s._v(" TIMESTAMPTZ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DOUBLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRECISION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    tags JSONB\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" create_hypertable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'metrics'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'time'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŸ¥è¯¢ç‰¹å®šæŒ‡æ ‡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cpu_usage'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cpu_usage\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" metrics\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1 hour'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" tags"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'host'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web-server-1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h2",{attrs:{id:"æ¡ˆä¾‹åˆ†æ-ç”µå•†å¹³å°çš„ç›‘æ§å®è·µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹åˆ†æ-ç”µå•†å¹³å°çš„ç›‘æ§å®è·µ"}},[s._v("#")]),s._v(" æ¡ˆä¾‹åˆ†æï¼šç”µå•†å¹³å°çš„ç›‘æ§å®è·µ")]),s._v(" "),t("p",[s._v("è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç”µå•†å¹³å°å¦‚ä½•é€šè¿‡ç›‘æ§ä¸å¯è§‚æµ‹æ€§æå‡ç³»ç»Ÿç¨³å®šæ€§ã€‚")]),s._v(" "),t("h3",{attrs:{id:"èƒŒæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯"}},[s._v("#")]),s._v(" èƒŒæ™¯")]),s._v(" "),t("p",[s._v('æŸç”µå•†å¹³å°åœ¨"åŒåä¸€"å¤§ä¿ƒæœŸé—´é¢ä¸´å·¨å¤§çš„æµé‡å‹åŠ›ï¼Œéœ€è¦ç¡®ä¿ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹ä»èƒ½ç¨³å®šè¿è¡Œã€‚')]),s._v(" "),t("h3",{attrs:{id:"å®æ–½æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®æ–½æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" å®æ–½æ–¹æ¡ˆ")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("å…¨é“¾è·¯è¿½è¸ª")]),s._v("ï¼šä½¿ç”¨Jaegerå®ç°åˆ†å¸ƒå¼è¿½è¸ªï¼Œå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å®æ—¶ç›‘æ§")]),s._v("ï¼šéƒ¨ç½²Prometheuså’ŒGrafanaï¼Œå®æ—¶ç›‘æ§ç³»ç»ŸæŒ‡æ ‡ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æ™ºèƒ½å‘Šè­¦")]),s._v("ï¼šä½¿ç”¨AlertManagerå®ç°åˆ†çº§å‘Šè­¦å’Œå‘Šè­¦æŠ‘åˆ¶ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æ€§èƒ½æµ‹è¯•")]),s._v("ï¼šç»“åˆç›‘æ§æ•°æ®ï¼Œè¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"ç»“æœ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“æœ"}},[s._v("#")]),s._v(" ç»“æœ")]),s._v(" "),t("p",[s._v("é€šè¿‡å®æ–½å…¨é¢çš„ç›‘æ§ä¸å¯è§‚æµ‹æ€§æ–¹æ¡ˆï¼Œè¯¥ç”µå•†å¹³å°æˆåŠŸå®ç°äº†ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æ•…éšœå®šä½æ—¶é—´ä»å¹³å‡30åˆ†é’Ÿå‡å°‘åˆ°5åˆ†é’Ÿ")]),s._v(" "),t("li",[s._v("ç³»ç»Ÿç¨³å®šæ€§æå‡99.99%")]),s._v(" "),t("li",[s._v("ç”¨æˆ·æŠ•è¯‰ç‡é™ä½70%")]),s._v(" "),t("li",[s._v("è¿ç»´å›¢é˜Ÿæ•ˆç‡æå‡50%")])]),s._v(" "),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v('åœ¨å½“ä»Šå¤æ‚çš„è½¯ä»¶æ¶æ„ä¸­ï¼Œç›‘æ§ä¸å¯è§‚æµ‹æ€§å·²ç»ä»"å¯æœ‰å¯æ— "å˜æˆäº†"å¿…ä¸å¯å°‘"ã€‚é€šè¿‡æ„å»ºå®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š')]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("æå‰å‘ç°é—®é¢˜")]),s._v("ï¼šåœ¨ç”¨æˆ·å—åˆ°å½±å“ä¹‹å‰å‘ç°å¹¶è§£å†³æ½œåœ¨é—®é¢˜ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å¿«é€Ÿå®šä½æ•…éšœ")]),s._v("ï¼šå½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œå¿«é€Ÿå®šä½æ ¹æœ¬åŸå› ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½")]),s._v("ï¼šåŸºäºç›‘æ§æ•°æ®ï¼ŒæŒç»­ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æå‡ç”¨æˆ·ä½“éªŒ")]),s._v("ï¼šç¡®ä¿åº”ç”¨åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚")])])]),s._v(" "),t("p",[s._v("éšç€äº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œç›‘æ§ä¸å¯è§‚æµ‹æ€§çš„é‡è¦æ€§åªä¼šè¶Šæ¥è¶Šé«˜ã€‚ä½œä¸ºæ¡†æ¶å¼€å‘è€…ï¼Œæˆ‘ä»¬åº”è¯¥å°†ç›‘æ§èƒ½åŠ›ä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œä¸ºç”¨æˆ·æä¾›å¼€ç®±å³ç”¨çš„ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v('"åœ¨ç›‘æ§çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰é“¶å¼¹ã€‚åªæœ‰æŒç»­æŠ•å…¥ã€ä¸æ–­ä¼˜åŒ–ï¼Œæ‰èƒ½æ„å»ºçœŸæ­£å¼ºå¤§çš„å¯è§‚æµ‹æ€§ç³»ç»Ÿã€‚"')])])])}),[],!1,null,null,null);t.default=r.exports}}]);