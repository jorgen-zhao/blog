(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{618:function(s,t,a){"use strict";a.r(t);var n=a(15),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v("åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ·±å…¥æ¢è®¨äº†Flinkçš„"),t("RouterLink",{attrs:{to:"/pages/212abc/"}},[s._v("æ¶æ„åŸç†")]),s._v("å’Œ"),t("RouterLink",{attrs:{to:"/pages/202def/"}},[s._v("é…ç½®ç®¡ç†")]),s._v("ã€‚ğŸ—ï¸ å½“æˆ‘ä»¬æ­å»ºå¥½äº†åŸºç¡€ç¯å¢ƒï¼Œé…ç½®å¥½äº†å‚æ•°ï¼Œæ¥ä¸‹æ¥æœ€å…³é”®çš„å°±æ˜¯å¦‚ä½•ä½¿ç”¨Flinkçš„APIæ¥æ„å»ºæˆ‘ä»¬çš„æµå¤„ç†åº”ç”¨ã€‚ğŸ’¡")],1),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v('"APIæ˜¯è¿æ¥å¼€å‘è€…ä¸æ¡†æ¶çš„æ¡¥æ¢ï¼ŒæŒæ¡æ ¸å¿ƒAPIæ˜¯æµå¤„ç†å·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½"')])]),s._v(" "),t("p",[s._v("æœ¬æ–‡å°†ç³»ç»Ÿæ€§åœ°ä»‹ç»Flinkä¸‰å¤§æ ¸å¿ƒAPIï¼šDataStream APIã€Table API/SQLå’ŒProcess Functionï¼Œå¸®åŠ©å¤§å®¶å»ºç«‹å®Œæ•´çš„ç¼–ç¨‹æ¨¡å‹è®¤çŸ¥ã€‚ğŸ“¡")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"datastream-api-æµå¤„ç†çš„åŸºçŸ³"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#datastream-api-æµå¤„ç†çš„åŸºçŸ³"}},[s._v("#")]),s._v(" DataStream APIï¼šæµå¤„ç†çš„åŸºçŸ³")]),s._v(" "),t("p",[s._v("DataStream APIæ˜¯Flinkæœ€æ ¸å¿ƒçš„APIï¼Œæä¾›äº†æœ€åº•å±‚çš„æµå¤„ç†èƒ½åŠ›ã€‚å®ƒæ”¯æŒJavaå’ŒScalaä¸¤ç§è¯­è¨€ï¼Œæä¾›äº†ä¸°å¯Œçš„è½¬æ¢ç®—å­ã€‚")]),s._v(" "),t("h3",{attrs:{id:"åŸºç¡€è½¬æ¢ç®—å­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€è½¬æ¢ç®—å­"}},[s._v("#")]),s._v(" åŸºç¡€è½¬æ¢ç®—å­")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºæ•°æ®æµ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DataStream")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("socketTextStream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŸºç¡€è½¬æ¢")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DataStream")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tuple2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" wordCounts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" text\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("flatMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Splitter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ†è¯")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keyBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‰å•è¯åˆ†ç»„")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ±‚å’Œ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"é«˜çº§è½¬æ¢ç®—å­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é«˜çº§è½¬æ¢ç®—å­"}},[s._v("#")]),s._v(" é«˜çº§è½¬æ¢ç®—å­")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("çª—å£æ“ä½œ")]),s._v("ï¼šæ—¶é—´çª—å£ã€è®¡æ•°çª—å£ã€ä¼šè¯çª—å£")]),s._v(" "),t("li",[t("strong",[s._v("çŠ¶æ€ç®¡ç†")]),s._v("ï¼šValueStateã€ListStateã€MapState")]),s._v(" "),t("li",[t("strong",[s._v("è¿æ¥å™¨")]),s._v("ï¼šKafkaã€Redisã€Elasticsearchç­‰")])]),s._v(" "),t("div",{staticClass:"custom-block theorem"},[t("p",{staticClass:"title"},[s._v("THEOREM")]),t("p",[s._v("DataStream APIçš„ç‰¹ç‚¹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å£°æ˜å¼APIï¼šé€šè¿‡é“¾å¼è°ƒç”¨æè¿°æ•°æ®å¤„ç†æµç¨‹")]),s._v(" "),t("li",[s._v("æ— çŠ¶æ€/æœ‰çŠ¶æ€æ“ä½œï¼šæ”¯æŒç®€å•è½¬æ¢å’Œå¤æ‚çŠ¶æ€è®¡ç®—")]),s._v(" "),t("li",[s._v("ä½å»¶è¿Ÿï¼šæ¯«ç§’çº§å¤„ç†å»¶è¿Ÿ")]),s._v(" "),t("li",[s._v("å®¹é”™æ€§ï¼šåŸºäºæ£€æŸ¥ç‚¹çš„Exactly-Onceè¯­ä¹‰")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"table-api-sql-å£°æ˜å¼è®¡ç®—çš„åˆ©å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table-api-sql-å£°æ˜å¼è®¡ç®—çš„åˆ©å™¨"}},[s._v("#")]),s._v(" Table API & SQLï¼šå£°æ˜å¼è®¡ç®—çš„åˆ©å™¨")]),s._v(" "),t("p",[s._v("éšç€ä¸šåŠ¡å¤æ‚åº¦æå‡ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å€¾å‘äºä½¿ç”¨å£°æ˜å¼è¯­è¨€ã€‚Table APIå’ŒSQLåº”è¿è€Œç”Ÿï¼Œè®©æ•°æ®å·¥ç¨‹å¸ˆèƒ½å¤Ÿç”¨ç†Ÿæ‚‰çš„SQLè¯­æ³•å¤„ç†æµæ•°æ®ã€‚")]),s._v(" "),t("h3",{attrs:{id:"table-apiåŸºç¡€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table-apiåŸºç¡€"}},[s._v("#")]),s._v(" Table APIåŸºç¡€")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºè¡¨ç¯å¢ƒ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TableEnvironment")]),s._v(" tEnv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TableEnvironment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ³¨å†Œæ•°æ®æº")]),s._v("\ntEnv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("executeSql")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CREATE TABLE clicks ("')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user STRING, "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"url STRING, "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts TIMESTAMP(3), "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"WATERMARK FOR ts AS ts - INTERVAL '5' SECOND\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('") WITH ("')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\" 'connector' = 'kafka',\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" ... "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('")"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŸ¥è¯¢æ•°æ®")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Table")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tEnv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sqlQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"SELECT user, COUNT(url) FROM clicks GROUP BY user, TUMBLE(ts, INTERVAL '1' MINUTE)\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"sqlç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sqlç‰¹æ€§"}},[s._v("#")]),s._v(" SQLç‰¹æ€§")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æµå¼SQL")]),s._v("ï¼šæ”¯æŒæ ‡å‡†SQLè¯­æ³•ï¼Œè‡ªåŠ¨å¤„ç†æµå¼ç‰¹æ€§")]),s._v(" "),t("li",[t("strong",[s._v("æ—¶é—´å±æ€§")]),s._v("ï¼šå¤„ç†æ—¶é—´ã€äº‹ä»¶æ—¶é—´å’Œæ‘„å…¥æ—¶é—´")]),s._v(" "),t("li",[t("strong",[s._v("è¿æ¥å™¨")]),s._v("ï¼šä¸°å¯Œçš„å†…ç½®è¿æ¥å™¨")]),s._v(" "),t("li",[t("strong",[s._v("çª—å£å‡½æ•°")]),s._v("ï¼šTUMBLEã€HOPã€CUMULATEç­‰çª—å£")])]),s._v(" "),t("blockquote",[t("p",[s._v("ğŸ¤” å½“æˆ‘ä»¬éœ€è¦å¿«é€Ÿå®ç°å¤æ‚èšåˆé€»è¾‘æ—¶ï¼ŒTable API/SQLå¾€å¾€æ¯”DataStream APIæ›´ç®€æ´é«˜æ•ˆã€‚ä½†è¦æ³¨æ„ï¼ŒæŸäº›å¤æ‚çš„çŠ¶æ€æ“ä½œä»éœ€å›é€€åˆ°DataStream APIã€‚")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"process-function-ç²¾ç»†åŒ–æ§åˆ¶çš„åˆ©å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#process-function-ç²¾ç»†åŒ–æ§åˆ¶çš„åˆ©å™¨"}},[s._v("#")]),s._v(" Process Functionï¼šç²¾ç»†åŒ–æ§åˆ¶çš„åˆ©å™¨")]),s._v(" "),t("p",[s._v("å½“æ ‡å‡†APIæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼ŒProcess Functionæä¾›äº†å¯¹äº‹ä»¶æ—¶é—´å’ŒçŠ¶æ€çš„æœ€ç»†ç²’åº¦æ§åˆ¶ã€‚")]),s._v(" "),t("h3",{attrs:{id:"keyedprocessfunctionç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keyedprocessfunctionç¤ºä¾‹"}},[s._v("#")]),s._v(" KeyedProcessFunctionç¤ºä¾‹")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AverageSensorReadings")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("KeyedProcessFunction")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SensorReading")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tuple3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueState")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" sumState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueState")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" countState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Configuration")]),s._v(" parameters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        sumState "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRuntimeContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueStateDescriptor")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sum"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        countState "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRuntimeContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValueStateDescriptor")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("processElement")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SensorReading")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Context")]),s._v(" ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Collector")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tuple3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Double")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// çŠ¶æ€æ›´æ–°é€»è¾‘")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šæ—¶å™¨è§¦å‘é€»è¾‘")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"æ ¸å¿ƒèƒ½åŠ›"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒèƒ½åŠ›"}},[s._v("#")]),s._v(" æ ¸å¿ƒèƒ½åŠ›")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("äº‹ä»¶æ—¶é—´å¤„ç†")]),s._v("ï¼šç²¾ç¡®æ§åˆ¶æ—¶é—´æˆ³å’Œæ°´ä½çº¿")]),s._v(" "),t("li",[t("strong",[s._v("çŠ¶æ€ç®¡ç†")]),s._v("ï¼šè®¿é—®Keyed Stateå’ŒOperator State")]),s._v(" "),t("li",[t("strong",[s._v("å®šæ—¶å™¨")]),s._v("ï¼šå¤„ç†å»¶è¿Ÿæ•°æ®å’Œå¤æ‚æ—¶é—´é€»è¾‘")]),s._v(" "),t("li",[t("strong",[s._v("ä¾§è¾“å‡ºæµ")]),s._v("ï¼šåˆ†æµå¤„ç†å¼‚å¸¸æ•°æ®")])]),s._v(" "),t("div",{staticClass:"custom-block right"},[t("p",[s._v('"Process Functionæ˜¯Flinkæœ€å¼ºå¤§çš„APIï¼Œä¹Ÿæ˜¯æœ€éš¾æŒæ¡çš„API"')])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"çŠ¶æ€ç®¡ç†-æµå¤„ç†çš„çµé­‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç®¡ç†-æµå¤„ç†çš„çµé­‚"}},[s._v("#")]),s._v(" çŠ¶æ€ç®¡ç†ï¼šæµå¤„ç†çš„çµé­‚")]),s._v(" "),t("p",[s._v("æœ‰çŠ¶æ€è®¡ç®—æ˜¯æµå¤„ç†çš„æ ¸å¿ƒã€‚Flinkæä¾›äº†ä¸‰ç§çŠ¶æ€ç±»å‹ï¼š")]),s._v(" "),t("h3",{attrs:{id:"çŠ¶æ€ç±»å‹å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ç±»å‹å¯¹æ¯”"}},[s._v("#")]),s._v(" çŠ¶æ€ç±»å‹å¯¹æ¯”")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("çŠ¶æ€ç±»å‹")]),s._v(" "),t("th",[s._v("é€‚ç”¨åœºæ™¯")]),s._v(" "),t("th",[s._v("ç‰¹ç‚¹")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ValueState")]),s._v(" "),t("td",[s._v("å•å€¼çŠ¶æ€")]),s._v(" "),t("td",[s._v("æ¯ä¸ªKeyå¯¹åº”ä¸€ä¸ªå€¼")])]),s._v(" "),t("tr",[t("td",[s._v("ListState")]),s._v(" "),t("td",[s._v("åˆ—è¡¨çŠ¶æ€")]),s._v(" "),t("td",[s._v("å­˜å‚¨å¯å˜é•¿åˆ—è¡¨")])]),s._v(" "),t("tr",[t("td",[s._v("MapState")]),s._v(" "),t("td",[s._v("æ˜ å°„çŠ¶æ€")]),s._v(" "),t("td",[s._v("Key-Valueå¯¹å­˜å‚¨")])]),s._v(" "),t("tr",[t("td",[s._v("ReducingState")]),s._v(" "),t("td",[s._v("èšåˆçŠ¶æ€")]),s._v(" "),t("td",[s._v("å†…ç½®reduceå‡½æ•°")])]),s._v(" "),t("tr",[t("td",[s._v("AggregatingState")]),s._v(" "),t("td",[s._v("èšåˆçŠ¶æ€")]),s._v(" "),t("td",[s._v("è‡ªå®šä¹‰èšåˆé€»è¾‘")])])])]),s._v(" "),t("h3",{attrs:{id:"çŠ¶æ€ä¸€è‡´æ€§ä¿éšœ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŠ¶æ€ä¸€è‡´æ€§ä¿éšœ"}},[s._v("#")]),s._v(" çŠ¶æ€ä¸€è‡´æ€§ä¿éšœ")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¼€å¯æ£€æŸ¥ç‚¹")]),s._v("\nenv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enableCheckpointing")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5ç§’é—´éš”")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®ä¸€è‡´æ€§çº§åˆ«")]),s._v("\nenv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCheckpointConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setCheckpointingMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CheckpointingMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXACTLY_ONCE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"çª—å£æ“ä½œ-æ—¶é—´ä¸æ•°æ®çš„è‰ºæœ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çª—å£æ“ä½œ-æ—¶é—´ä¸æ•°æ®çš„è‰ºæœ¯"}},[s._v("#")]),s._v(" çª—å£æ“ä½œï¼šæ—¶é—´ä¸æ•°æ®çš„è‰ºæœ¯")]),s._v(" "),t("p",[s._v("çª—å£æ˜¯æµå¤„ç†ä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ï¼ŒFlinkæä¾›äº†ä¸°å¯Œçš„çª—å£ç±»å‹ï¼š")]),s._v(" "),t("h3",{attrs:{id:"çª—å£ç±»å‹è¯¦è§£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çª—å£ç±»å‹è¯¦è§£"}},[s._v("#")]),s._v(" çª—å£ç±»å‹è¯¦è§£")]),s._v(" "),t("h4",{attrs:{id:"_1-æ»šåŠ¨çª—å£-tumbling-window"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ»šåŠ¨çª—å£-tumbling-window"}},[s._v("#")]),s._v(" 1. æ»šåŠ¨çª—å£ï¼ˆTumbling Windowï¼‰")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DataStream")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SensorReading")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" readings "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nreadings\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keyBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sensorId"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("window")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TumblingEventTimeWindows")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Time")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("minutes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AvgTemp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_2-æ»‘åŠ¨çª—å£-sliding-window"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ»‘åŠ¨çª—å£-sliding-window"}},[s._v("#")]),s._v(" 2. æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("readings\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keyBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sensorId"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("window")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SlidingEventTimeWindows")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Time")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("minutes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Time")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("minutes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("process")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WindowProcessFunction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_3-ä¼šè¯çª—å£-session-window"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¼šè¯çª—å£-session-window"}},[s._v("#")]),s._v(" 3. ä¼šè¯çª—å£ï¼ˆSession Windowï¼‰")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("readings\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keyBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sensorId"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("window")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EventTimeSessionWindows")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("withGap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Time")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("minutes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AvgTemp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"çª—å£å‡½æ•°é€‰æ‹©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çª—å£å‡½æ•°é€‰æ‹©"}},[s._v("#")]),s._v(" çª—å£å‡½æ•°é€‰æ‹©")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¢é‡èšåˆ")]),s._v("ï¼š"),t("code",[s._v("reduce()")]),s._v("/"),t("code",[s._v("aggregate()")]),s._v("ï¼ˆä½å»¶è¿Ÿï¼‰")]),s._v(" "),t("li",[t("strong",[s._v("å…¨é‡çª—å£")]),s._v("ï¼š"),t("code",[s._v("process()")]),s._v("ï¼ˆçµæ´»ä½†é«˜å»¶è¿Ÿï¼‰")]),s._v(" "),t("li",[t("strong",[s._v("çª—å£API")]),s._v("ï¼š"),t("code",[s._v("apply()")]),s._v("ï¼ˆå·²å¼ƒç”¨ï¼‰")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v("é€šè¿‡æœ¬æ–‡çš„ç³»ç»Ÿä»‹ç»ï¼Œæˆ‘ä»¬æŒæ¡äº†Flinkä¸‰å¤§æ ¸å¿ƒAPIçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("DataStream API")]),s._v("ï¼šåŸºç¡€æµå¤„ç†ï¼Œçµæ´»ä½†éœ€è¦æ›´å¤šç¼–ç ")]),s._v(" "),t("li",[t("strong",[s._v("Table API/SQL")]),s._v("ï¼šå£°æ˜å¼è®¡ç®—ï¼Œé€‚åˆä¸šåŠ¡é€»è¾‘å®ç°")]),s._v(" "),t("li",[t("strong",[s._v("Process Function")]),s._v("ï¼šç²¾ç»†åŒ–æ§åˆ¶ï¼Œè§£å†³å¤æ‚åœºæ™¯éœ€æ±‚")])]),s._v(" "),t("p",[s._v("åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®é‡‡ç”¨ç»„åˆä½¿ç”¨çš„æ–¹å¼ï¼šç”¨Table API/SQLå®ç°ä¸šåŠ¡é€»è¾‘ï¼Œé‡åˆ°å¤æ‚åœºæ™¯æ—¶å›é€€åˆ°Process Functionã€‚ğŸš€")]),s._v(" "),t("blockquote",[t("p",[s._v('"æŒæ¡APIåªæ˜¯å¼€å§‹ï¼Œç†è§£èƒŒåçš„çŠ¶æ€ç®¡ç†å’Œæ—¶é—´è¯­ä¹‰æ‰æ˜¯æµå¤„ç†å·¥ç¨‹å¸ˆè¿›é˜¶çš„å…³é”®"')])]),s._v(" "),t("p",[s._v("æœªæ¥æˆ‘ä»¬å°†ç»§ç»­æ¢è®¨Flinkçš„æ€§èƒ½ä¼˜åŒ–å’Œå®æˆ˜æ¡ˆä¾‹ï¼Œæ•¬è¯·å…³æ³¨ï¼ğŸ¤")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code")]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);t.default=e.exports}}]);