(window.webpackJsonp=window.webpackJsonp||[]).push([[423],{776:function(s,t,a){"use strict";a.r(t);var n=a(15),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("p",[s._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸–ç•Œé‡Œï¼Œæ•°æ®å¦‚ä½•å­˜å‚¨å’Œç®¡ç†æ˜¯ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚éšç€ä¸šåŠ¡é‡çš„å¢é•¿ï¼Œå•å°æœåŠ¡å™¨çš„å­˜å‚¨å’Œå¤„ç†èƒ½åŠ›å¾ˆå¿«ä¼šè¾¾åˆ°ç“¶é¢ˆã€‚"),t("s",[s._v("æˆ‘æ›¾ç»å¤©çœŸåœ°ä»¥ä¸ºï¼Œç®€å•åœ°å¢åŠ æœåŠ¡å™¨æ•°é‡å°±èƒ½çº¿æ€§æå‡ç³»ç»Ÿå®¹é‡ï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡é¢å¯¹æ•°æ®å€¾æ–œé—®é¢˜...")]),s._v(" ğŸ¤¦â€â™‚ï¸")]),s._v(" "),t("p",[s._v("æœ¬æ–‡å°†æ·±å…¥æ¢è®¨åˆ†å¸ƒå¼æ•°æ®åˆ†åŒºä¸åˆ†ç‰‡ç­–ç•¥ï¼Œè¿™æ˜¯æ„å»ºå¯æ‰©å±•ã€é«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºç¡€ã€‚æ— è®ºä½ æ˜¯æ­£åœ¨è®¾è®¡æ–°çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿˜æ˜¯ä¼˜åŒ–ç°æœ‰æ¶æ„ï¼Œç†è§£è¿™äº›æ¦‚å¿µéƒ½å°†å¯¹ä½ å¤§æœ‰è£¨ç›Šã€‚")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),t("p",[s._v("æ•°æ®åˆ†åŒºï¼ˆPartitioningï¼‰æ˜¯å°†å¤§å‹æ•°æ®é›†åˆ†å‰²æˆæ›´å°ã€æ›´æ˜“ç®¡ç†çš„éƒ¨åˆ†çš„è¿‡ç¨‹ï¼Œè€Œåˆ†ç‰‡ï¼ˆShardingï¼‰åˆ™æ˜¯å°†è¿™äº›åˆ†åŒºåˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹çš„å…·ä½“å®ç°ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åˆ†åŒº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åˆ†åŒº"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åˆ†åŒºï¼Ÿ")]),s._v(" "),t("p",[s._v("åœ¨å•æœºæ•°æ®åº“æ—¶ä»£ï¼Œæˆ‘ä»¬é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜ä¹‹ä¸€å°±æ˜¯æ•°æ®é‡å¢é•¿å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆã€‚å½“æ•°æ®é‡è¶…è¿‡å•æœºå¤„ç†èƒ½åŠ›æ—¶ï¼Œç³»ç»Ÿå“åº”æ—¶é—´ä¼šæ€¥å‰§ä¸‹é™ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚")]),s._v(" "),t("p",[s._v("æ•°æ®åˆ†åŒºä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("æ°´å¹³æ‰©å±•")]),s._v("ï¼šé€šè¿‡å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œç³»ç»Ÿå¯ä»¥çº¿æ€§æ‰©å±•å­˜å‚¨å’Œå¤„ç†èƒ½åŠ›")]),s._v(" "),t("li",[t("strong",[s._v("è´Ÿè½½å‡è¡¡")]),s._v("ï¼šåˆç†çš„æ•°æ®åˆ†å¸ƒå¯ä»¥é¿å…æŸäº›èŠ‚ç‚¹è¿‡è½½")]),s._v(" "),t("li",[t("strong",[s._v("æé«˜æ€§èƒ½")]),s._v("ï¼šå¹¶è¡Œå¤„ç†å¯ä»¥æ˜¾è‘—æå‡æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½")]),s._v(" "),t("li",[t("strong",[s._v("å¢å¼ºå¯ç”¨æ€§")]),s._v("ï¼šå³ä½¿éƒ¨åˆ†èŠ‚ç‚¹æ•…éšœï¼Œç³»ç»Ÿä»å¯ç»§ç»­æä¾›æœåŠ¡")])]),s._v(" "),t("h2",{attrs:{id:"å¸¸è§çš„åˆ†åŒºç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§çš„åˆ†åŒºç­–ç•¥"}},[s._v("#")]),s._v(" å¸¸è§çš„åˆ†åŒºç­–ç•¥")]),s._v(" "),t("h3",{attrs:{id:"_1-èŒƒå›´åˆ†åŒº-range-partitioning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-èŒƒå›´åˆ†åŒº-range-partitioning"}},[s._v("#")]),s._v(" 1. èŒƒå›´åˆ†åŒºï¼ˆRange Partitioningï¼‰")]),s._v(" "),t("p",[s._v("èŒƒå›´åˆ†åŒºæ˜¯æ ¹æ®æ•°æ®çš„å€¼èŒƒå›´è¿›è¡Œåˆ†åŒºï¼Œä¾‹å¦‚ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ç”¨æˆ·ID 1-10000 â†’ èŠ‚ç‚¹1\nç”¨æˆ·ID 10001-20000 â†’ èŠ‚ç‚¹2\nç”¨æˆ·ID 20001-30000 â†’ èŠ‚ç‚¹3\n...\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("èŒƒå›´æŸ¥è¯¢æ•ˆç‡é«˜")]),s._v(" "),t("li",[s._v("å®ç°ç®€å•ç›´è§‚")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å®¹æ˜“å¯¼è‡´çƒ­ç‚¹é—®é¢˜ï¼ˆä¾‹å¦‚æ–°ç”¨æˆ·æ€»æ˜¯é›†ä¸­åœ¨æŸä¸ªèŒƒå›´ï¼‰")]),s._v(" "),t("li",[s._v("è´Ÿè½½ä¸å‡è¡¡")])]),s._v(" "),t("h3",{attrs:{id:"_2-å“ˆå¸Œåˆ†åŒº-hash-partitioning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å“ˆå¸Œåˆ†åŒº-hash-partitioning"}},[s._v("#")]),s._v(" 2. å“ˆå¸Œåˆ†åŒºï¼ˆHash Partitioningï¼‰")]),s._v(" "),t("p",[s._v("å“ˆå¸Œåˆ†åŒºé€šè¿‡å¯¹æ•°æ®é”®åº”ç”¨å“ˆå¸Œå‡½æ•°æ¥ç¡®å®šæ•°æ®åº”è¯¥å­˜å‚¨åœ¨å“ªä¸ªèŠ‚ç‚¹ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("èŠ‚ç‚¹ = hash(æ•°æ®é”®) % èŠ‚ç‚¹æ•°é‡\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æ•°æ®åˆ†å¸ƒç›¸å¯¹å‡åŒ€")]),s._v(" "),t("li",[s._v("æœ‰æ•ˆé¿å…çƒ­ç‚¹é—®é¢˜")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("èŒƒå›´æŸ¥è¯¢æ•ˆç‡ä½")]),s._v(" "),t("li",[s._v("èŠ‚ç‚¹å¢å‡éœ€è¦æ•°æ®è¿ç§»")])]),s._v(" "),t("h3",{attrs:{id:"_3-åˆ—è¡¨åˆ†åŒº-list-partitioning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-åˆ—è¡¨åˆ†åŒº-list-partitioning"}},[s._v("#")]),s._v(" 3. åˆ—è¡¨åˆ†åŒºï¼ˆList Partitioningï¼‰")]),s._v(" "),t("p",[s._v("åˆ—è¡¨åˆ†åŒºæ˜¯æ ¹æ®é¢„å®šä¹‰çš„å€¼åˆ—è¡¨è¿›è¡Œåˆ†åŒºï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('åœ°åŒº"åŒ—äº¬"ã€"ä¸Šæµ·"ã€"å¤©æ´¥" â†’ èŠ‚ç‚¹1\nåœ°åŒº"å¹¿å·"ã€"æ·±åœ³"ã€"ä¸œè" â†’ èŠ‚ç‚¹2\n...\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("ä¼˜ç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("é€‚åˆæœ‰æ˜ç¡®åˆ†ç±»çš„ä¸šåŠ¡åœºæ™¯")]),s._v(" "),t("li",[s._v("ç®¡ç†ç®€å•")])]),s._v(" "),t("p",[t("strong",[s._v("ç¼ºç‚¹")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("éœ€è¦é¢„å…ˆå®šä¹‰åˆ†åŒºè§„åˆ™")]),s._v(" "),t("li",[s._v("ä¸é€‚åˆåŠ¨æ€å˜åŒ–çš„åœºæ™¯")])]),s._v(" "),t("h3",{attrs:{id:"_4-å¤åˆåˆ†åŒº-composite-partitioning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¤åˆåˆ†åŒº-composite-partitioning"}},[s._v("#")]),s._v(" 4. å¤åˆåˆ†åŒºï¼ˆComposite Partitioningï¼‰")]),s._v(" "),t("p",[s._v("å¤åˆåˆ†åŒºç»“åˆå¤šç§åˆ†åŒºç­–ç•¥ï¼Œä¾‹å¦‚å…ˆæŒ‰åœ°åŒºåˆ†åŒºï¼Œå†æŒ‰ç”¨æˆ·IDå“ˆå¸Œåˆ†åŒºï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('åœ°åŒº"åŒ—äº¬" + hash(ç”¨æˆ·ID) % 100 â†’ èŠ‚ç‚¹1-10\nåœ°åŒº"ä¸Šæµ·" + hash(ç”¨æˆ·ID) % 100 â†’ èŠ‚ç‚¹11-20\n...\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"ä¸€è‡´æ€§å“ˆå¸Œ-è§£å†³èŠ‚ç‚¹å¢å‡çš„ä¼˜é›…æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€è‡´æ€§å“ˆå¸Œ-è§£å†³èŠ‚ç‚¹å¢å‡çš„ä¼˜é›…æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" ä¸€è‡´æ€§å“ˆå¸Œï¼šè§£å†³èŠ‚ç‚¹å¢å‡çš„ä¼˜é›…æ–¹æ¡ˆ")]),s._v(" "),t("p",[s._v("å½“ä½¿ç”¨å“ˆå¸Œåˆ†åŒºæ—¶ï¼Œå¢åŠ æˆ–å‡å°‘èŠ‚ç‚¹ä¼šå¯¼è‡´å¤§é‡æ•°æ®éœ€è¦é‡æ–°åˆ†å¸ƒï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯éš¾ä»¥æ¥å—çš„ã€‚ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistent Hashingï¼‰ä¸ºæ­¤æä¾›äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚")]),s._v(" "),t("h3",{attrs:{id:"ä¸€è‡´æ€§å“ˆå¸ŒåŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€è‡´æ€§å“ˆå¸ŒåŸç†"}},[s._v("#")]),s._v(" ä¸€è‡´æ€§å“ˆå¸ŒåŸç†")]),s._v(" "),t("p",[s._v("ä¸€è‡´æ€§å“ˆå¸Œå°†æ•´ä¸ªå“ˆå¸Œç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼Œæ•°æ®èŠ‚ç‚¹å’Œé”®éƒ½æ˜ å°„åˆ°è¿™ä¸ªç¯ä¸Šï¼š")]),s._v(" "),t("ol",[t("li",[s._v("è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ç¯ä¸Š")]),s._v(" "),t("li",[s._v("è®¡ç®—æ•°æ®çš„é”®çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ç¯ä¸Š")]),s._v(" "),t("li",[s._v("é¡ºæ—¶é’ˆæŸ¥æ‰¾ç¬¬ä¸€ä¸ªé‡åˆ°çš„èŠ‚ç‚¹ï¼Œä½œä¸ºæ•°æ®å­˜å‚¨ä½ç½®")])]),s._v(" "),t("h3",{attrs:{id:"ä¸€è‡´æ€§å“ˆå¸Œçš„ä¼˜åŠ¿"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€è‡´æ€§å“ˆå¸Œçš„ä¼˜åŠ¿"}},[s._v("#")]),s._v(" ä¸€è‡´æ€§å“ˆå¸Œçš„ä¼˜åŠ¿")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("æœ€å°åŒ–æ•°æ®è¿ç§»")]),s._v("ï¼šå½“å¢åŠ æˆ–åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œåªæœ‰å—å½±å“çš„éƒ¨åˆ†æ•°æ®éœ€è¦é‡æ–°åˆ†å¸ƒ")]),s._v(" "),t("li",[t("strong",[s._v("è´Ÿè½½å‡è¡¡")]),s._v("ï¼šé€šè¿‡å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹ï¼ˆVirtual Nodesï¼‰ï¼Œå¯ä»¥å®ç°æ›´å‡åŒ€çš„æ•°æ®åˆ†å¸ƒ")]),s._v(" "),t("li",[t("strong",[s._v("å¯æ‰©å±•æ€§")]),s._v("ï¼šç³»ç»Ÿå¯ä»¥å¹³æ»‘æ‰©å±•ï¼Œæ— éœ€å¤§è§„æ¨¡æ•°æ®è¿ç§»")])]),s._v(" "),t("h3",{attrs:{id:"ä¸€è‡´æ€§å“ˆå¸Œçš„å®ç°ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€è‡´æ€§å“ˆå¸Œçš„å®ç°ç¤ºä¾‹"}},[s._v("#")]),s._v(" ä¸€è‡´æ€§å“ˆå¸Œçš„å®ç°ç¤ºä¾‹")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" hashlib\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConsistentHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nodes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" virtual_nodes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("virtual_nodes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" virtual_nodes\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ring "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sorted_keys "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸ºæ¯ä¸ªå®é™…èŠ‚ç‚¹åˆ›å»ºå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" node "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" nodes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("range")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("virtual_nodes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                virtual_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_get_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("virtual_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" node\n                self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sorted_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("append"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("virtual_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ’åºè™šæ‹ŸèŠ‚ç‚¹é”®")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sorted_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_get_key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨MD5å“ˆå¸Œå‡½æ•°")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hashlib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hexdigest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_node")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¡ç®—é”®çš„å“ˆå¸Œå€¼")]),s._v("\n        key_hash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_get_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºkey_hashçš„èŠ‚ç‚¹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" node_key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sorted_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" key_hash "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" node_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("node_key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›ç¯ä¸Šçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sorted_keys"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("h2",{attrs:{id:"åˆ†åŒºçš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºçš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" åˆ†åŒºçš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("h3",{attrs:{id:"_1-æ•°æ®å€¾æ–œä¸çƒ­ç‚¹é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•°æ®å€¾æ–œä¸çƒ­ç‚¹é—®é¢˜"}},[s._v("#")]),s._v(" 1. æ•°æ®å€¾æ–œä¸çƒ­ç‚¹é—®é¢˜")]),s._v(" "),t("p",[t("strong",[s._v("é—®é¢˜")]),s._v("ï¼šæŸäº›èŠ‚ç‚¹å¤„ç†çš„æ•°æ®é‡è¿œå¤§äºå…¶ä»–èŠ‚ç‚¹ï¼Œå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨æ›´å‡åŒ€çš„å“ˆå¸Œå‡½æ•°")]),s._v(" "),t("li",[s._v("å¼•å…¥æ•°æ®é¢„çƒ­æœºåˆ¶")]),s._v(" "),t("li",[s._v("å®æ–½åŠ¨æ€è´Ÿè½½å‡è¡¡ç­–ç•¥")])]),s._v(" "),t("h3",{attrs:{id:"_2-è·¨åˆ†åŒºæŸ¥è¯¢ä¸äº‹åŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è·¨åˆ†åŒºæŸ¥è¯¢ä¸äº‹åŠ¡"}},[s._v("#")]),s._v(" 2. è·¨åˆ†åŒºæŸ¥è¯¢ä¸äº‹åŠ¡")]),s._v(" "),t("p",[t("strong",[s._v("é—®é¢˜")]),s._v("ï¼šè·¨å¤šä¸ªåˆ†åŒºçš„æŸ¥è¯¢å’Œäº‹åŠ¡å®ç°å¤æ‚ï¼Œæ€§èƒ½ä½ä¸‹ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("è®¾è®¡åˆç†çš„åˆ†åŒºç­–ç•¥ï¼Œå‡å°‘è·¨åˆ†åŒºæ“ä½œ")]),s._v(" "),t("li",[s._v("ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼ˆå¦‚ä¸¤é˜¶æ®µæäº¤ï¼‰")]),s._v(" "),t("li",[s._v("é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹ï¼Œæ¥å—çŸ­æš‚çš„ä¸ä¸€è‡´")])]),s._v(" "),t("h3",{attrs:{id:"_3-èŠ‚ç‚¹æ•…éšœä¸æ•°æ®æ¢å¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-èŠ‚ç‚¹æ•…éšœä¸æ•°æ®æ¢å¤"}},[s._v("#")]),s._v(" 3. èŠ‚ç‚¹æ•…éšœä¸æ•°æ®æ¢å¤")]),s._v(" "),t("p",[t("strong",[s._v("é—®é¢˜")]),s._v("ï¼šèŠ‚ç‚¹æ•…éšœå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–ä¸å¯ç”¨ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å®ç°æ•°æ®å†—ä½™ï¼ˆå¤šå‰¯æœ¬ï¼‰")]),s._v(" "),t("li",[s._v("è®¾è®¡è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤æœºåˆ¶")]),s._v(" "),t("li",[s._v("ä½¿ç”¨ä¸€è‡´æ€§åè®®ç¡®ä¿æ•°æ®å®‰å…¨")])]),s._v(" "),t("h2",{attrs:{id:"å®é™…æ¡ˆä¾‹åˆ†æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…æ¡ˆä¾‹åˆ†æ"}},[s._v("#")]),s._v(" å®é™…æ¡ˆä¾‹åˆ†æ")]),s._v(" "),t("h3",{attrs:{id:"æ¡ˆä¾‹1-twitterçš„é›ªèŠ±idç”Ÿæˆå™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹1-twitterçš„é›ªèŠ±idç”Ÿæˆå™¨"}},[s._v("#")]),s._v(" æ¡ˆä¾‹1ï¼šTwitterçš„é›ªèŠ±IDç”Ÿæˆå™¨")]),s._v(" "),t("p",[s._v("Twitterçš„é›ªèŠ±IDç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆï¼Œé€šè¿‡å°†IDåˆ†ä¸ºä¸åŒéƒ¨åˆ†ï¼ˆæ—¶é—´æˆ³ã€æœºå™¨IDã€åºåˆ—å·ï¼‰æ¥å®ç°å…¨å±€å”¯ä¸€æ€§ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("0 | 0001100 10100010 10111110 10001001 01011100 00 | 0000 | 000000 | 000000\n |-----------------------------------------------|--------|--------|--------\n           æ—¶é—´æˆ³(64ä½)            |  æœºå™¨ID(10ä½)  |  åºåˆ—å·(12ä½)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†IDçš„å…¨å±€å”¯ä¸€æ€§ï¼Œåˆé¿å…äº†å•ç‚¹ç“¶é¢ˆã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ¡ˆä¾‹2-mongodbçš„åˆ†ç‰‡ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹2-mongodbçš„åˆ†ç‰‡ç­–ç•¥"}},[s._v("#")]),s._v(" æ¡ˆä¾‹2ï¼šMongoDBçš„åˆ†ç‰‡ç­–ç•¥")]),s._v(" "),t("p",[s._v("MongoDBæä¾›äº†å¤šç§åˆ†ç‰‡ç­–ç•¥ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("å“ˆå¸Œåˆ†ç‰‡")]),s._v("ï¼šåŸºäºå“ˆå¸Œå€¼å‡åŒ€åˆ†å¸ƒæ•°æ®")]),s._v(" "),t("li",[t("strong",[s._v("èŒƒå›´åˆ†ç‰‡")]),s._v("ï¼šåŸºäºå€¼çš„èŒƒå›´åˆ†å¸ƒæ•°æ®")]),s._v(" "),t("li",[t("strong",[s._v("æ ‡ç­¾åˆ†ç‰‡")]),s._v("ï¼šåŸºäºè‡ªå®šä¹‰æ ‡ç­¾åˆ†å¸ƒæ•°æ®")])]),s._v(" "),t("p",[s._v("MongoDBè¿˜æ”¯æŒåŸºäºåˆ†ç‰‡é”®çš„æŸ¥è¯¢ä¼˜åŒ–ï¼Œå¯ä»¥é«˜æ•ˆåœ°å®šä½æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ã€‚")]),s._v(" "),t("h2",{attrs:{id:"æœªæ¥å±•æœ›"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥å±•æœ›"}},[s._v("#")]),s._v(" æœªæ¥å±•æœ›")]),s._v(" "),t("p",[s._v("éšç€äº‘è®¡ç®—å’Œå®¹å™¨æŠ€æœ¯çš„å‘å±•ï¼Œæ•°æ®åˆ†åŒºä¸åˆ†ç‰‡ç­–ç•¥ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼š")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("è‡ªåŠ¨åŒ–åˆ†ç‰‡")]),s._v("ï¼šåŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½åˆ†ç‰‡ç­–ç•¥ï¼Œè‡ªåŠ¨é€‚åº”æ•°æ®è®¿é—®æ¨¡å¼å˜åŒ–")]),s._v(" "),t("li",[t("strong",[s._v("äº‘åŸç”Ÿåˆ†ç‰‡")]),s._v("ï¼šä¸Kubernetesç­‰å®¹å™¨ç¼–æ’å¹³å°æ·±åº¦é›†æˆçš„åˆ†ç‰‡æ–¹æ¡ˆ")]),s._v(" "),t("li",[t("strong",[s._v("å¤šæ¨¡æ€åˆ†ç‰‡")]),s._v("ï¼šæ”¯æŒç»“æ„åŒ–æ•°æ®ã€æ–‡æ¡£ã€å›¾ç­‰å¤šç§æ•°æ®ç±»å‹çš„ç»Ÿä¸€åˆ†ç‰‡ç­–ç•¥")])]),s._v(" "),t("h2",{attrs:{id:"ç»“è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è¯­"}},[s._v("#")]),s._v(" ç»“è¯­")]),s._v(" "),t("p",[s._v("æ•°æ®åˆ†åŒºä¸åˆ†ç‰‡æ˜¯æ„å»ºå¯æ‰©å±•åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ã€‚é€‰æ‹©åˆé€‚çš„åˆ†åŒºç­–ç•¥éœ€è¦ç»¼åˆè€ƒè™‘ä¸šåŠ¡ç‰¹ç‚¹ã€æ•°æ®è®¿é—®æ¨¡å¼ã€ç³»ç»Ÿè§„æ¨¡ç­‰å¤šç§å› ç´ ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v('"åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ²¡æœ‰é“¶å¼¹ã€‚æ¯ç§åˆ†åŒºç­–ç•¥éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§ï¼Œå…³é”®åœ¨äºæ ¹æ®å®é™…æƒ…å†µåšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚"')])]),s._v(" "),t("p",[s._v("å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨åˆ†å¸ƒå¼æ•°æ®åˆ†åŒºä¸åˆ†ç‰‡ç­–ç•¥ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–è§è§£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼ğŸš€")])])}),[],!1,null,null,null);t.default=r.exports}}]);