---
title: Androidåº”ç”¨æ‰“åŒ…ä¸å‘å¸ƒå…¨æµç¨‹æŒ‡å—-ä»ç­¾ååˆ°ä¸Šæ¶çš„å®æˆ˜ä¹‹è·¯
date: 2026-01-28
tags:
  - Androidæ‰“åŒ…
  - åº”ç”¨å‘å¸ƒ
  - æ„å»ºä¼˜åŒ–
---

## å‰è¨€

ä½œä¸ºä¸€åAndroidå¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç¼–å†™ä»£ç ã€è®¾è®¡ç•Œé¢ã€è°ƒè¯•bugï¼Œä½†æœ€ç»ˆçš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½å¤Ÿè¢«ç”¨æˆ·ä¸‹è½½å’Œä½¿ç”¨ï¼ğŸ“± ä»ä»£ç åˆ°ç”¨æˆ·æ‰‹ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º"åº”ç”¨æ‰“åŒ…ä¸å‘å¸ƒ"ï¼Œè™½ç„¶ä¸æ˜¯å¼€å‘çš„æ ¸å¿ƒï¼Œä½†å´è‡³å…³é‡è¦ã€‚

::: tip
"ä»£ç å†™å¾—å†å¥½ï¼Œæ— æ³•æ‰“åŒ…å‘å¸ƒç»™ç”¨æˆ·ï¼Œä¹Ÿåªæ˜¯çº¸ä¸Šè°ˆå…µã€‚"
:::

ä»Šå¤©ï¼Œæˆ‘å°†å¸¦å¤§å®¶ä¸€èµ·èµ°å®ŒAndroidåº”ç”¨ä»å¼€å‘åˆ°ä¸Šæ¶çš„å®Œæ•´æµç¨‹ï¼Œè®©ä½ è½»æ¾æŒæ¡åº”ç”¨æ‰“åŒ…ä¸å‘å¸ƒçš„æ‰€æœ‰æŠ€å·§ï¼

## åº”ç”¨ç­¾ååŸºç¡€

### ä»€ä¹ˆæ˜¯åº”ç”¨ç­¾åï¼Ÿ

åœ¨Androidä¸­ï¼Œæ¯ä¸ªåº”ç”¨éƒ½å¿…é¡»ç»è¿‡æ•°å­—ç­¾åæ‰èƒ½å®‰è£…å’Œè¿è¡Œã€‚ç­¾åå°±åƒæ˜¯åº”ç”¨çš„"èº«ä»½è¯"ï¼Œç”¨äºéªŒè¯åº”ç”¨çš„å¼€å‘è€…èº«ä»½ï¼Œå¹¶ç¡®ä¿åº”ç”¨åœ¨å‘å¸ƒåæ²¡æœ‰è¢«ä¿®æ”¹ã€‚

### åˆ›å»ºç­¾åå¯†é’¥

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç­¾åå¯†é’¥ï¼š

```bash
keytool -genkey -v -keystore my-release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias my-key-alias
```

æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œä¼šæç¤ºä½ è¾“å…¥å¯†é’¥åº“å¯†ç å’Œå¯†é’¥å¯†ç ï¼Œä»¥åŠä¸€äº›å…³äºä½ çš„ä¿¡æ¯ã€‚

::: theorem
å¯†é’¥åº“å¯†ç å’Œå¯†é’¥å¯†ç ä¸€å®šè¦è®°ä½ä¸”å¦¥å–„ä¿ç®¡ï¼Œä¸€æ—¦ä¸¢å¤±ï¼Œä½ å°†æ— æ³•æ›´æ–°ä½ çš„åº”ç”¨ï¼
:::

### åœ¨Android Studioä¸­é…ç½®ç­¾å

1. æ‰“å¼€ä½ çš„é¡¹ç›®ï¼Œè¿›å…¥ `File > Project Structure`
2. é€‰æ‹© `Modules > app`
3. åˆ‡æ¢åˆ° `Signing` æ ‡ç­¾é¡µ
4. ç‚¹å‡» `+` æ·»åŠ ä¸€ä¸ªæ–°çš„ç­¾åé…ç½®
5. å¡«å†™ä¹‹å‰åˆ›å»ºçš„å¯†é’¥ä¿¡æ¯

> ğŸ“¡ **å°è´´å£«**ï¼šå»ºè®®å°†ç­¾åå¯†é’¥ä¿¡æ¯å­˜å‚¨åœ¨ `keystore.properties` æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥ç¡¬ç¼–ç åœ¨ `build.gradle` ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°ä¿æŠ¤ä½ çš„ç­¾åä¿¡æ¯ã€‚

## æ„å»ºå˜ä½“ä¸å¤šæ¸ é“æ‰“åŒ…

### ç†è§£æ„å»ºå˜ä½“

Android Studioé»˜è®¤ä¼šä¸ºæˆ‘ä»¬çš„åº”ç”¨åˆ›å»ºå¤šç§æ„å»ºå˜ä½“ï¼Œé€šå¸¸æ˜¯ï¼š

- `debug`ï¼šè°ƒè¯•ç‰ˆæœ¬ï¼Œç”¨äºå¼€å‘æµ‹è¯•
- `release`ï¼šå‘å¸ƒç‰ˆæœ¬ï¼Œç”¨äºæ­£å¼å‘å¸ƒ

### è‡ªå®šä¹‰æ„å»ºç±»å‹

æˆ‘ä»¬å¯ä»¥åœ¨ `app/build.gradle` ä¸­è‡ªå®šä¹‰æ„å»ºç±»å‹ï¼š

```gradle
android {
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        
        // è‡ªå®šä¹‰ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬
        debug {
            applicationIdSuffix ".debug"
            versionNameSuffix "-DEBUG"
        }
        
        // è‡ªå®šä¹‰ä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬
        staging {
            initWith debug
            applicationIdSuffix ".staging"
            versionNameSuffix "-STAGING"
            minifyEnabled false
        }
    }
}
```

### å¤šæ¸ é“æ‰“åŒ…

å¯¹äºåº”ç”¨åˆ†å‘ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç»Ÿè®¡ä¸åŒæ¸ é“çš„ä¸‹è½½é‡ã€‚Android Gradleæ’ä»¶æä¾›äº†ç®€å•çš„æ–¹æ³•æ¥å®ç°å¤šæ¸ é“æ‰“åŒ…ï¼š

1. åœ¨ `app/build.gradle` ä¸­æ·»åŠ ï¼š

```gradle
android {
    productFlavors {
        xiaomi {
            dimension "channel"
        }
        huawei {
            dimension "channel"
        }
        wandoujia {
            dimension "channel"
        }
        // æ·»åŠ æ›´å¤šæ¸ é“...
    }
}
```

2. åœ¨ `AndroidManifest.xml` ä¸­æ·»åŠ æ¸ é“å ä½ç¬¦ï¼š

```xml
<meta-data
    android:name="UMENG_CHANNEL"
    android:value="${channel}" />
```

3. æ„å»ºæŒ‡å®šæ¸ é“ç‰ˆæœ¬ï¼š

```bash
./gradlew assembleHuaweiRelease
```

## APKä¸App Bundle

### APK vs App Bundle

APKï¼ˆAndroid Package Kitï¼‰æ˜¯Androidåº”ç”¨çš„å®‰è£…åŒ…æ ¼å¼ï¼Œè€ŒApp Bundleæ˜¯Googleæ¨å‡ºçš„ä¸€ç§æ–°çš„å‘å¸ƒæ ¼å¼ã€‚

| ç‰¹æ€§ | APK | App Bundle |
|------|-----|------------|
| æ–‡ä»¶å¤§å° | è¾ƒå¤§ | è¾ƒå° |
| å®‰è£…é€Ÿåº¦ | è¾ƒæ…¢ | è¾ƒå¿« |
| åˆ†å‘æ–¹å¼ | ç›´æ¥å®‰è£… | é€šè¿‡Google PlayåŠ¨æ€ç”Ÿæˆ |
| å¤šè¯­è¨€æ”¯æŒ | éœ€è¦æ„å»ºå¤šä¸ªAPK | è‡ªåŠ¨é€‚é… |
| åˆ†å‘æ¸ é“ | ä»…é™Google Play | å¯åˆ†å‘åˆ°å¤šä¸ªåº”ç”¨å•†åº— |

### ä¸ºä»€ä¹ˆé€‰æ‹©App Bundleï¼Ÿ

ä½¿ç”¨App Bundleæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **å‡å°åº”ç”¨ä½“ç§¯**ï¼šç”¨æˆ·åªä¸‹è½½ä»–ä»¬éœ€è¦çš„èµ„æº
2. **ç®€åŒ–å‘å¸ƒæµç¨‹**ï¼šåªéœ€ä¸Šä¼ ä¸€ä¸ªApp Bundleï¼ŒGoogle Playä¼šè‡ªåŠ¨ç”Ÿæˆå’Œä¼˜åŒ–APK
3. **æ”¯æŒåŠ¨æ€åŠŸèƒ½**ï¼šå¯ä»¥æŒ‰éœ€åŠ è½½åº”ç”¨åŠŸèƒ½
4. **æ›´å¥½çš„æ€§èƒ½**ï¼šåº”ç”¨å¯åŠ¨æ›´å¿«ï¼Œè¿è¡Œæ›´æµç•…

### æ„å»ºApp Bundle

æ„å»ºApp Bundleéå¸¸ç®€å•ï¼š

```bash
./gradlew bundleRelease
```

æ„å»ºå®Œæˆåï¼Œä½ å¯ä»¥åœ¨ `app/build/outputs/bundle/release` ç›®å½•ä¸‹æ‰¾åˆ° `app-release.aab` æ–‡ä»¶ã€‚

## åº”ç”¨ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·ä¸ç‰ˆæœ¬åç§°

Androidåº”ç”¨æœ‰ä¸¤ä¸ªç‰ˆæœ¬æ ‡è¯†ï¼š

- `versionCode`ï¼šæ•´æ•°ï¼Œç”¨äºå†…éƒ¨ç‰ˆæœ¬æ§åˆ¶ï¼Œå¿…é¡»é€’å¢
- `versionName`ï¼šå­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºç»™ç”¨æˆ·çœ‹çš„ç‰ˆæœ¬å·

åœ¨ `build.gradle` ä¸­é…ç½®ï¼š

```gradle
android {
    defaultConfig {
        versionCode 1
        versionName "1.0.0"
    }
}
```

### ç‰ˆæœ¬æ›´æ–°ç­–ç•¥

åˆç†çš„ç‰ˆæœ¬æ›´æ–°ç­–ç•¥å¯¹ç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ï¼š

1. **è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶**ï¼šéµå¾ª `ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·` æ ¼å¼
2. **é‡å¤§æ›´æ–°**ï¼šä¸»ç‰ˆæœ¬å·é€’å¢ï¼ˆå¦‚ 1.0.0 â†’ 2.0.0ï¼‰
3. **åŠŸèƒ½æ›´æ–°**ï¼šæ¬¡ç‰ˆæœ¬å·é€’å¢ï¼ˆå¦‚ 1.0.0 â†’ 1.1.0ï¼‰
4. **Bugä¿®å¤**ï¼šä¿®è®¢å·é€’å¢ï¼ˆå¦‚ 1.0.0 â†’ 1.0.1ï¼‰

### è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†

ä¸ºäº†é¿å…æ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬å·å¸¦æ¥çš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å®ç°è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†ï¼š

```gradle
android {
    defaultConfig {
        versionCode generateVersionCode()
        versionName generateVersionName()
    }
}

def generateVersionCode() {
    return project.hasProperty("versionCode") ? project.versionCode.toInteger() : 1
}

def generateVersionName() {
    return project.hasProperty("versionName") ? project.versionName : "1.0.0"
}
```

## å‘å¸ƒåˆ°Google Play

### å‡†å¤‡å·¥ä½œ

1. æ³¨å†ŒGoogle Playå¼€å‘è€…è´¦å·ï¼ˆ25ç¾å…ƒä¸€æ¬¡æ€§è´¹ç”¨ï¼‰
2. åˆ›å»ºåº”ç”¨åˆ—è¡¨
3. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€æˆªå›¾ç­‰ï¼‰
4. è®¾ç½®å®šä»·å’Œåˆ†å‘å›½å®¶

### ä¸Šä¼ App Bundle

1. è¿›å…¥Google Play Console
2. é€‰æ‹©ä½ çš„åº”ç”¨
3. ç‚¹å‡»"ç”Ÿäº§"ä¸‹çš„"åˆ›å»ºæ–°ç‰ˆæœ¬"
4. ä¸Šä¼ ä¹‹å‰æ„å»ºçš„App Bundle
5. å¡«å†™ç‰ˆæœ¬ä¿¡æ¯å’Œå‘å¸ƒè¯´æ˜
6. ä¿å­˜å¹¶æäº¤å®¡æ ¸

### å®¡æ ¸ä¸å‘å¸ƒ

Google Playä¼šå¯¹åº”ç”¨è¿›è¡Œå®¡æ ¸ï¼Œé€šå¸¸éœ€è¦å‡ ä¸ªå°æ—¶åˆ°å‡ å¤©ä¸ç­‰ã€‚å®¡æ ¸é€šè¿‡åï¼Œä½ å¯ä»¥é€‰æ‹©ç«‹å³å‘å¸ƒæˆ–å®‰æ’å‘å¸ƒæ—¶é—´ã€‚

::: tip
é¦–æ¬¡æäº¤çš„åº”ç”¨å®¡æ ¸å¯èƒ½ä¼šæ›´ä¸¥æ ¼ï¼Œç¡®ä¿ä½ çš„åº”ç”¨ç¬¦åˆGoogle Playçš„æ”¿ç­–ã€‚
:::

## ç¬¬ä¸‰æ–¹åº”ç”¨å•†åº—å‘å¸ƒ

é™¤äº†Google Playï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†åº”ç”¨å‘å¸ƒåˆ°å…¶ä»–åº”ç”¨å•†åº—ï¼š

1. **åä¸ºåº”ç”¨å¸‚åœº**ï¼šé€‚ç”¨äºåä¸ºè®¾å¤‡ç”¨æˆ·
2. **å°ç±³åº”ç”¨å•†åº—**ï¼šé€‚ç”¨äºå°ç±³è®¾å¤‡ç”¨æˆ·
3. **OPPOè½¯ä»¶å•†åº—**ï¼šé€‚ç”¨äºOPPOè®¾å¤‡ç”¨æˆ·
4. **VIVOåº”ç”¨å•†åº—**ï¼šé€‚ç”¨äºVIVOè®¾å¤‡ç”¨æˆ·
5. **è…¾è®¯åº”ç”¨å®**ï¼šé€‚ç”¨äºå›½å†…ç”¨æˆ·

æ¯ä¸ªåº”ç”¨å•†åº—éƒ½æœ‰è‡ªå·±çš„ä¸Šä¼ æµç¨‹å’Œè¦æ±‚ï¼Œéœ€è¦å•ç‹¬å‡†å¤‡åº”ç”¨èµ„æ–™å’Œä¸Šä¼ APKã€‚

## è‡ªåŠ¨åŒ–æ„å»ºä¸æŒç»­é›†æˆ

### æ‰‹åŠ¨æ„å»ºçš„ç—›ç‚¹

æ‰‹åŠ¨æ„å»ºå’Œå‘å¸ƒåº”ç”¨å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. å®¹æ˜“å‡ºé”™ï¼šæ‰‹åŠ¨æ“ä½œå®¹æ˜“é—æ¼æ­¥éª¤
2. æ•ˆç‡ä½ä¸‹ï¼šæ¯æ¬¡æ„å»ºéœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´
3. ç‰ˆæœ¬ç®¡ç†æ··ä¹±ï¼šéš¾ä»¥è¿½è¸ªæ¯ä¸ªç‰ˆæœ¬çš„æ„å»ºçŠ¶æ€
4. åä½œå›°éš¾ï¼šå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„æ„å»ºç¯å¢ƒä¸ä¸€è‡´

### ä½¿ç”¨Jenkinså®ç°è‡ªåŠ¨åŒ–æ„å»º

Jenkinsæ˜¯ä¸€ä¸ªæµè¡Œçš„æŒç»­é›†æˆå·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒæµç¨‹ï¼š

1. å®‰è£…JenkinsæœåŠ¡å™¨
2. é…ç½®Android SDKå’Œæ„å»ºç¯å¢ƒ
3. åˆ›å»ºJenkinsä»»åŠ¡
4. é…ç½®æ„å»ºè„šæœ¬

ç¤ºä¾‹Jenkinsfileï¼š

```groovy
pipeline {
    agent any
    
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        
        stage('Build') {
            steps {
                sh './gradlew clean assembleRelease'
            }
        }
        
        stage('Test') {
            steps {
                sh './gradlew test'
            }
        }
        
        stage('Upload') {
            steps {
                // ä¸Šä¼ åˆ°Google Playæˆ–å…¶ä»–åº”ç”¨å•†åº—
            }
        }
    }
    
    post {
        success {
            echo 'æ„å»ºæˆåŠŸï¼'
        }
        failure {
            echo 'æ„å»ºå¤±è´¥ï¼'
        }
    }
}
```

### å…¶ä»–CI/CDå·¥å…·

é™¤äº†Jenkinsï¼Œè¿˜æœ‰å…¶ä»–ä¼˜ç§€çš„CI/CDå·¥å…·å¯ä»¥é€‰æ‹©ï¼š

1. **GitHub Actions**ï¼šä¸GitHubæ·±åº¦é›†æˆï¼Œé…ç½®ç®€å•
2. **GitLab CI/CD**ï¼šä¸GitLabæ·±åº¦é›†æˆï¼ŒåŠŸèƒ½å¼ºå¤§
3. **Bitrise**ï¼šä¸“æ³¨äºç§»åŠ¨åº”ç”¨çš„CI/CDæœåŠ¡
4. **CircleCI**ï¼šé…ç½®ç®€å•ï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œæ¡†æ¶

## ç»“è¯­

Androidåº”ç”¨æ‰“åŒ…ä¸å‘å¸ƒè™½ç„¶ä¸æ˜¯å¼€å‘çš„æ ¸å¿ƒï¼Œä½†å´æ˜¯å°†æˆ‘ä»¬çš„ä½œå“å¸¦ç»™ç”¨æˆ·çš„å…³é”®ç¯èŠ‚ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†ä»åº”ç”¨ç­¾ååˆ°ä¸Šæ¶çš„å®Œæ•´æµç¨‹ã€‚

~~è®°ä½ï¼šä¸è¦ç­‰åˆ°æœ€åä¸€åˆ»æ‰å¼€å§‹å­¦ä¹ å¦‚ä½•æ‰“åŒ…å‘å¸ƒï¼Œå¦åˆ™ä½ ä¼šåæ‚”çš„ï¼~~

åœ¨å®é™…å·¥ä½œä¸­ï¼Œå»ºè®®ä½ ï¼š

1. å°½æ—©å»ºç«‹è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹
2. å¦¥å–„ä¿ç®¡ç­¾åå¯†é’¥
3. éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
4. å®šæœŸæµ‹è¯•å‘å¸ƒæµç¨‹

å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ é¡ºåˆ©å®ŒæˆAndroidåº”ç”¨çš„æ‰“åŒ…ä¸å‘å¸ƒï¼Œè®©ä½ çš„ä½œå“èƒ½å¤Ÿè¢«æ›´å¤šç”¨æˆ·ä½¿ç”¨å’Œå–œçˆ±ï¼

> "ä»£ç æ”¹å˜ä¸–ç•Œï¼Œå‘å¸ƒè®©ä¸–ç•Œçœ‹åˆ°ä½ çš„ä»£ç ã€‚" â€” Jorgen