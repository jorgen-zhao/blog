---
title: MQTT
date: 2025-01-02 23:06:42
categories:
  - protocol
tags:
  - MQTT
author: 
  name: Jorgen
  link: https://github.com/jorgen-zhao
--- 
“最伟大的设计，往往是最简单的。” —— 乔布斯  
<!-- more -->

## 🌍 背景介绍  
在物联网（IoT）世界，设备之间如何高效、可靠地通信？🔗 MQTT（Message Queuing Telemetry Transport）就是为此而生！  
它是一种轻量级的发布/订阅（Pub/Sub）协议，专为低带宽、不稳定网络环境设计，非常适合物联网、移动应用和嵌入式系统。  

---

## 🔍 **MQTT 详解**  
### **1️⃣ 基本架构**
MQTT 由 **客户端（Clients）** 和 **服务器（Broker）** 组成。  
- **客户端**：可以是传感器、手机应用、服务器等，负责发布（Publish）或订阅（Subscribe）消息。  
- **Broker（消息中转站）**：负责接收和分发消息，确保消息能可靠到达订阅者。  

🖼️ **示意图**  
```plaintext
[ 设备 A ] ---> [ Broker ] ---> [ 设备 B ]
    发布             中转              订阅
```

---

### **2️⃣ 核心特性**
✅ **发布/订阅模式**：设备无需直接通信，Broker 负责转发消息，解耦数据生产和消费。  
✅ **轻量级**：协议头部仅 2 个字节，超低带宽占用，适合嵌入式设备。  
✅ **QoS（质量服务等级）**：
   - **QoS 0**（最多送达一次）：不保证消息送达，适合日志上报。  
   - **QoS 1**（至少送达一次）：确保送达，但可能重复。  
   - **QoS 2**（仅送达一次）：最可靠，但开销最大。 

✅ **保留消息（Retain Message）**：新订阅者可立即获取最新消息。  
✅ **遗嘱消息（Will Message）**：客户端断连时，Broker 自动通知订阅者。  

---

### **3️⃣ 对比其他协议**  
| 协议    | 适用场景 | 复杂度 | 可靠性 | 资源消耗 |
|---------|----------|--------|--------|--------|
| MQTT    | 物联网、移动端 | 低 | 高（QoS 可选） | 低 |
| HTTP    | Web API | 高 | 高 | 高 |
| CoAP    | 低功耗设备 | 低 | 中等 | 低 |
| WebSocket | 实时通信 | 中等 | 高 | 中等 |

📌 **总结**：MQTT 适合 **低带宽、低功耗、海量设备通信** 的场景，而 HTTP 更适用于请求/响应式的 Web 应用。  

---

## ✨ **总结**  
🌟 **“连接万物，沟通无界”** —— MQTT 让 IoT 世界变得更高效！  
它轻量、可靠、灵活，是智能家居、工业自动化、车联网等领域的理想选择。  

💡 **现在，你的设备准备好用 MQTT 交流了吗？😉**