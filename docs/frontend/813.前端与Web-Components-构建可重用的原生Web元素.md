---
title: å‰ç«¯ä¸Web Components-æ„å»ºå¯é‡ç”¨çš„åŸç”ŸWebå…ƒç´ 
date: 2026-02-06
tags: [Web Components, å‰ç«¯å¼€å‘, å¯é‡ç”¨ç»„ä»¶]
---

## å‰è¨€

ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸ç»„ä»¶æ‰“äº¤é“ã€‚æ— è®ºæ˜¯Reactçš„JSXã€Vueçš„SFCè¿˜æ˜¯Angularçš„ç»„ä»¶ï¼Œæˆ‘ä»¬éƒ½ä¹ æƒ¯äº†ä½¿ç”¨æ¡†æ¶æä¾›çš„ç»„ä»¶æ¨¡å‹æ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚ä½†æ˜¯ï¼Œä½ æ˜¯å¦æƒ³è¿‡ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºä¸ä¾èµ–ä»»ä½•æ¡†æ¶çš„ã€çœŸæ­£å¯é‡ç”¨çš„è‡ªå®šä¹‰HTMLå…ƒç´ å‘¢ï¼ŸğŸ¤”

è¿™å°±æ˜¯Web Componentsçš„é­…åŠ›æ‰€åœ¨ï¼Web Componentsæ˜¯ä¸€å¥—WebåŸç”ŸAPIï¼Œå…è®¸æˆ‘ä»¬åˆ›å»ºå¯é‡ç”¨çš„è‡ªå®šä¹‰å…ƒç´ ï¼Œè€Œä¸éœ€è¦æ¡†æ¶ä¾èµ–ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å¸¦ä½ æ·±å…¥äº†è§£Web Componentsçš„ä¸–ç•Œï¼Œæ¢ç´¢å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥æ„å»ºçœŸæ­£å¯å¤ç”¨çš„Webå…ƒç´ ã€‚

::: tip
Web Componentsæ˜¯ä¸€å¥—WebåŸç”ŸAPIï¼ŒåŒ…æ‹¬Custom Elementsã€Shadow DOMã€HTML Templateså’ŒES Modulesï¼Œå®ƒä»¬å…±åŒæ„æˆäº†åˆ›å»ºå¯é‡ç”¨è‡ªå®šä¹‰å…ƒç´ çš„åŸºç¡€ã€‚
:::

## Web Componentsçš„æ ¸å¿ƒæ¦‚å¿µ

Web Componentsä¸»è¦ç”±å››ä¸ªæ ¸å¿ƒæŠ€æœ¯ç»„æˆï¼š

### Custom Elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰

Custom Elementså…è®¸æˆ‘ä»¬å®šä¹‰è‡ªå·±çš„HTMLæ ‡ç­¾ï¼Œå¹¶ä¸ºå…¶æ·»åŠ è‡ªå®šä¹‰è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºå…¨æ–°çš„æ ‡ç­¾ï¼Œæˆ–è€…æ‰©å±•ç°æœ‰çš„HTMLå…ƒç´ ã€‚

```javascript
// å®šä¹‰ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰å…ƒç´ 
class MyCustomElement extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });
    this.shadowRoot.innerHTML = `
      <style>
        :host {
          display: block;
          padding: 10px;
          border: 1px solid #ccc;
          border-radius: 4px;
        }
      </style>
      <p>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å…ƒç´ ï¼</p>
    `;
  }
}

// æ³¨å†Œè‡ªå®šä¹‰å…ƒç´ 
customElements.define('my-custom-element', MyCustomElement);
```

### Shadow DOMï¼ˆå½±å­DOMï¼‰

Shadow DOMæä¾›äº†ä¸€ç§å°†DOMæ ‘å°è£…åˆ°å…ƒç´ ä¸­çš„æ–¹æ³•ï¼Œä½¿å¾—æ ·å¼å’Œè„šæœ¬ä¸ä¼šä¸é¡µé¢å…¶ä»–éƒ¨åˆ†å†²çªã€‚è¿™å°±åƒç»™å…ƒç´ æˆ´ä¸Šäº†ä¸€é¡¶"å¸½å­"ï¼Œå†…éƒ¨æ ·å¼å’Œå¤–éƒ¨æ ·å¼äº’ä¸å½±å“ã€‚

```javascript
class MyComponent extends HTMLElement {
  constructor() {
    super();
    // åˆ›å»ºshadow root
    const shadow = this.attachShadow({ mode: 'open' });
    
    // æ·»åŠ æ ·å¼å’Œå†…å®¹
    shadow.innerHTML = `
      <style>
        p {
          color: red;
        }
      </style>
      <p>è¿™æ®µæ–‡å­—åªåœ¨shadow DOMä¸­å¯è§</p>
    `;
  }
}

customElements.define('my-component', MyComponent);
```

### HTML Templatesï¼ˆHTMLæ¨¡æ¿ï¼‰

HTML Templateså…è®¸æˆ‘ä»¬å®šä¹‰å¯é‡ç”¨çš„HTMLç‰‡æ®µï¼Œè€Œä¸ç«‹å³å°†å…¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚è¿™äº›æ¨¡æ¿å¯ä»¥ç¨åè¢«å…‹éš†å¹¶æ’å…¥åˆ°DOMä¸­ã€‚

```html
<template id="my-template">
  <div class="card">
    <h2>å¡ç‰‡æ ‡é¢˜</h2>
    <p>å¡ç‰‡å†…å®¹</p>
  </div>
</template>

<script>
  // ä½¿ç”¨æ¨¡æ¿
  const template = document.getElementById('my-template');
  const clone = template.content.cloneNode(true);
  document.body.appendChild(clone);
</script>
```

### ES Modulesï¼ˆESæ¨¡å—ï¼‰

ES Moduleså…è®¸æˆ‘ä»¬å°†JavaScriptä»£ç æ‹†åˆ†æˆæ¨¡å—ï¼Œå®ç°æ›´å¥½çš„ä»£ç ç»„ç»‡å’Œå¤ç”¨ã€‚

```javascript
// my-element.js
export class MyElement extends HTMLElement {
  connectedCallback() {
    this.innerHTML = 'Hello from MyElement!';
  }
}

customElements.define('my-element', MyElement);
```

## æ„å»ºä¸€ä¸ªå®Œæ•´çš„Web Componentsç¤ºä¾‹

è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„å¯é‡ç”¨çš„å¡ç‰‡ç»„ä»¶ï¼Œå±•ç¤ºå¦‚ä½•å°†ä¸Šè¿°æŠ€æœ¯ç»“åˆèµ·æ¥ï¼š

### 1. å®šä¹‰å¡ç‰‡ç»„ä»¶

```javascript
// card-element.js
export class CardElement extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });
    
    // ä»æ¨¡æ¿å…‹éš†å†…å®¹
    const template = document.getElementById('card-template');
    const clone = template.content.cloneNode(true);
    
    // è®¾ç½®shadow DOMå†…å®¹
    this.shadowRoot.appendChild(clone);
    
    // è·å–å…ƒç´ å¼•ç”¨
    this.title = this.shadowRoot.querySelector('.card-title');
    this.content = this.shadowRoot.querySelector('.card-content');
    this.button = this.shadowRoot.querySelector('.card-button');
    
    // æ·»åŠ äº‹ä»¶ç›‘å¬
    this.button.addEventListener('click', () => {
      this.handleClick();
    });
  }
  
  // è®¾ç½®æ ‡é¢˜
  set cardTitle(value) {
    this.title.textContent = value;
  }
  
  // è®¾ç½®å†…å®¹
  set cardContent(value) {
    this.content.textContent = value;
  }
  
  // å¤„ç†ç‚¹å‡»äº‹ä»¶
  handleClick() {
    const event = new CustomEvent('card-click', {
      detail: { message: 'å¡ç‰‡è¢«ç‚¹å‡»äº†ï¼' },
      bubbles: true,
      composed: true
    });
    this.dispatchEvent(event);
  }
}

// æ³¨å†Œè‡ªå®šä¹‰å…ƒç´ 
customElements.define('card-element', CardElement);
```

### 2. å®šä¹‰æ¨¡æ¿

```html
<template id="card-template">
  <style>
    :host {
      display: inline-block;
      width: 300px;
      margin: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    
    :host:hover {
      transform: translateY(-5px);
    }
    
    .card-header {
      background-color: #4a90e2;
      color: white;
      padding: 16px;
    }
    
    .card-title {
      margin: 0;
      font-size: 1.5em;
    }
    
    .card-content {
      padding: 16px;
    }
    
    .card-button {
      display: block;
      width: 100%;
      padding: 12px;
      background-color: #4a90e2;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.3s ease;
    }
    
    .card-button:hover {
      background-color: #357abd;
    }
  </style>
  
  <div class="card-header">
    <h2 class="card-title"></h2>
  </div>
  <div class="card-content"></div>
  <button class="card-button">ç‚¹å‡»æˆ‘</button>
</template>
```

### 3. ä½¿ç”¨å¡ç‰‡ç»„ä»¶

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Componentsç¤ºä¾‹</title>
  <script type="module" src="card-element.js"></script>
</head>
<body>
  <h1>Web Componentså¡ç‰‡ç¤ºä¾‹</h1>
  
  <card-element id="card1"></card-element>
  <card-element id="card2"></card-element>
  
  <script>
    // è®¾ç½®å¡ç‰‡å±æ€§
    document.getElementById('card1').cardTitle = 'å¡ç‰‡1';
    document.getElementById('card1').cardContent = 'è¿™æ˜¯ç¬¬ä¸€ä¸ªå¡ç‰‡çš„å†…å®¹ã€‚';
    
    document.getElementById('card2').cardTitle = 'å¡ç‰‡2';
    document.getElementById('card2').cardContent = 'è¿™æ˜¯ç¬¬äºŒä¸ªå¡ç‰‡çš„å†…å®¹ã€‚';
    
    // ç›‘å¬å¡ç‰‡ç‚¹å‡»äº‹ä»¶
    document.querySelectorAll('card-element').forEach(card => {
      card.addEventListener('card-click', (e) => {
        console.log(e.detail.message);
        alert(e.detail.message);
      });
    });
  </script>
</body>
</html>
```

## Web Componentsçš„ä¼˜åŠ¿

ä½¿ç”¨Web Componentsæœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼š

### 1. **æ¡†æ¶æ— å…³** ğŸš€

Web Componentsä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„å‰ç«¯æ¡†æ¶ï¼Œå¯ä»¥åœ¨ä»»ä½•æ”¯æŒè¿™äº›APIçš„æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨Reactã€Vueã€Angularæˆ–åŸç”ŸJavaScripté¡¹ç›®ä¸­ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ã€‚

### 2. **å°è£…æ€§** ğŸ“¦

Shadow DOMæä¾›äº†å®Œç¾çš„æ ·å¼å’Œè„šæœ¬å°è£…ï¼Œç¡®ä¿ç»„ä»¶çš„å†…éƒ¨å®ç°ä¸ä¼šä¸é¡µé¢å…¶ä»–éƒ¨åˆ†å‘ç”Ÿå†²çªã€‚

### 3. **å¯é‡ç”¨æ€§** â™»ï¸

ä¸€æ—¦å®šä¹‰ï¼ŒWeb Componentså¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é‡å¤ä½¿ç”¨ï¼Œå°±åƒä½¿ç”¨åŸç”ŸHTMLå…ƒç´ ä¸€æ ·ç®€å•ã€‚

### 4. **å¯è®¿é—®æ€§** â™¿

Web Componentsæ”¯æŒæ ‡å‡†çš„å¯è®¿é—®æ€§APIï¼Œå¯ä»¥ä¸å±å¹•é˜…è¯»å™¨ç­‰è¾…åŠ©æŠ€æœ¯å…¼å®¹ã€‚

### 5. **æ€§èƒ½** âš¡

ç”±äºæ˜¯åŸç”Ÿå®ç°ï¼ŒWeb Componentsé€šå¸¸æ¯”åŸºäºæ¡†æ¶çš„ç»„ä»¶æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚

## Web Componentsä¸æ¡†æ¶çš„é›†æˆ

è™½ç„¶Web Componentsæ˜¯åŸç”Ÿå®ç°çš„ï¼Œä½†å®ƒä»¬å¯ä»¥ä¸å„ç§å‰ç«¯æ¡†æ¶å¾ˆå¥½åœ°é›†æˆï¼š

### ä¸Reacté›†æˆ

```jsx
import React, { useEffect, useRef } from 'react';

function MyReactComponent() {
  const cardRef = useRef(null);
  
  useEffect(() => {
    if (cardRef.current) {
      cardRef.current.cardTitle = 'Reactä¸­çš„å¡ç‰‡';
      cardRef.current.cardContent = 'è¿™æ˜¯ä¸€ä¸ªåœ¨Reactä¸­ä½¿ç”¨çš„Web Componentsã€‚';
    }
  }, []);
  
  return (
    <div>
      <card-element ref={cardRef}></card-element>
    </div>
  );
}
```

### ä¸Vueé›†æˆ

```vue
<template>
  <div>
    <card-element ref="card"></card-element>
  </div>
</template>

<script>
export default {
  mounted() {
    this.$refs.card.cardTitle = 'Vueä¸­çš„å¡ç‰‡';
    this.$refs.card.cardContent = 'è¿™æ˜¯ä¸€ä¸ªåœ¨Vueä¸­ä½¿ç”¨çš„Web Componentsã€‚';
  }
}
</script>
```

## æœ€ä½³å®è·µ

åœ¨ä½¿ç”¨Web Componentsæ—¶ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼š

### 1. **ä½¿ç”¨å‘½åçº¦å®š**

è‡ªå®šä¹‰å…ƒç´ çš„åç§°åº”åŒ…å«è¿å­—ç¬¦ï¼Œä»¥é¿å…ä¸ç°æœ‰æˆ–æœªæ¥çš„HTMLå…ƒç´ å†²çªã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨`my-card`è€Œä¸æ˜¯`card`ã€‚

### 2. **æä¾›å±æ€§å’Œäº‹ä»¶**

é€šè¿‡å±æ€§å’Œäº‹ä»¶ä¸ç»„ä»¶å¤–éƒ¨é€šä¿¡ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œshadow DOMã€‚

### 3. **ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ**

åˆ©ç”¨`connectedCallback`å’Œ`disconnectedCallback`ç­‰ç”Ÿå‘½å‘¨æœŸå›è°ƒæ¥ç®¡ç†ç»„ä»¶çš„åˆ›å»ºå’Œé”€æ¯ã€‚

### 4. **æ”¯æŒå¯è®¿é—®æ€§**

ç¡®ä¿ä½ çš„ç»„ä»¶æ”¯æŒé”®ç›˜å¯¼èˆªã€å±å¹•é˜…è¯»å™¨ç­‰å¯è®¿é—®æ€§åŠŸèƒ½ã€‚

### 5. **æä¾›å›é€€å†…å®¹**

ä¸ºä¸æ”¯æŒWeb Componentsçš„æµè§ˆå™¨æä¾›å›é€€å†…å®¹ï¼š

```html
<card-element>
  <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWeb Componentsï¼Œè¯·å‡çº§æµè§ˆå™¨ã€‚</p>
</card-element>
```

## å·¥å…·å’Œåº“

è™½ç„¶Web Componentsæ˜¯åŸç”Ÿå®ç°çš„ï¼Œä½†æœ‰ä¸€äº›å·¥å…·å’Œåº“å¯ä»¥å¸®åŠ©ç®€åŒ–å¼€å‘ï¼š

### 1. **Lit**

Litæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åº“ï¼Œç”¨äºæ„å»ºWeb Componentsï¼š

```javascript
import { LitElement, html, css } from 'lit';

class MyCard extends LitElement {
  static styles = css`
    :host {
      display: block;
      padding: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
  `;
  
  static properties = {
    title: { type: String },
    content: { type: String }
  };
  
  render() {
    return html`
      <h2>${this.title}</h2>
      <p>${this.content}</p>
    `;
  }
}

customElements.define('my-card', MyCard);
```

### 2. **Stencil**

Stencilæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œç”¨äºæ„å»ºé«˜æ€§èƒ½çš„Web Componentså’Œè®¾è®¡ç³»ç»Ÿï¼š

```javascript
import { Component, Prop, h } from '@stencil/core';

@Component({
  tag: 'my-card',
  styleUrl: 'my-card.css',
  shadow: true
})
export class MyCard {
  @Prop() title: string;
  @Prop() content: string;

  render() {
    return (
      <div>
        <h2>{this.title}</h2>
        <p>{this.content}</p>
      </div>
    );
  }
}
```

### 3. **Atomico**

Atomicoæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åº“ï¼Œç”¨äºæ„å»ºé«˜æ€§èƒ½çš„Web Componentsï¼š

```javascript
import { c, html } from 'atomico';

function MyCard(props) {
  return html`
    <host>
      <h2>${props.title}</h2>
      <p>${props.content}</p>
    </host>
  `;
}

MyCard.props = {
  title: String,
  content: String
};

customElements.define('my-card', c(MyCard));
```

## æµè§ˆå™¨æ”¯æŒ

Web Componentsåœ¨ç°ä»£æµè§ˆå™¨ä¸­æœ‰è‰¯å¥½çš„æ”¯æŒï¼š

| æµè§ˆå™¨ | æ”¯æŒæƒ…å†µ |
|--------|----------|
| Chrome | å®Œå…¨æ”¯æŒ |
| Firefox | å®Œå…¨æ”¯æŒ |
| Safari | å®Œå…¨æ”¯æŒ |
| Edge | å®Œå…¨æ”¯æŒ |
| IE | ä¸æ”¯æŒ |

å¯¹äºéœ€è¦æ”¯æŒæ—§ç‰ˆæµè§ˆå™¨çš„é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨polyfillï¼Œå¦‚`webcomponents.js`ã€‚

## æœªæ¥å±•æœ›

Web Componentsçš„æœªæ¥å‘å±•éå¸¸ä»¤äººå…´å¥‹ï¼š

1. **æ¨¡å—åŒ–Shadow DOM**ï¼šæœªæ¥çš„Shadow DOMå°†æ”¯æŒæ¨¡å—åŒ–æ ·å¼ï¼Œè¿›ä¸€æ­¥æé«˜å°è£…æ€§ã€‚
2. **è‡ªå®šä¹‰å…ƒç´ æ„é€ å‡½æ•°**ï¼šå…è®¸æ›´çµæ´»åœ°å®šä¹‰è‡ªå®šä¹‰å…ƒç´ çš„è¡Œä¸ºã€‚
3. **CSSéƒ¨åˆ†**ï¼šå…è®¸éƒ¨åˆ†æ ·å¼ç©¿é€shadow DOMè¾¹ç•Œï¼Œæä¾›æ›´çµæ´»çš„æ ·å¼å®šåˆ¶ã€‚
4. **ä¸WebAssemblyçš„é›†æˆ**ï¼šå°†Web Componentsä¸WebAssemblyç»“åˆï¼Œåˆ›å»ºé«˜æ€§èƒ½çš„Webåº”ç”¨ã€‚

## ç»“è¯­

Web Componentsä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§åˆ›å»ºçœŸæ­£å¯é‡ç”¨ã€æ¡†æ¶æ— å…³çš„Webå…ƒç´ çš„æ–¹æ³•ã€‚å®ƒä»¬ä¸ä»…æé«˜äº†ä»£ç çš„å¯é‡ç”¨æ€§ï¼Œè¿˜æä¾›äº†æ›´å¥½çš„å°è£…æ€§å’Œæ€§èƒ½ã€‚è™½ç„¶Web Componentsçš„å­¦ä¹ æ›²çº¿å¯èƒ½æ¯”ä½¿ç”¨æ¡†æ¶æ›´é™¡å³­ï¼Œä½†å®ƒä»¬ä¸ºæˆ‘ä»¬æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€æ›´å¼€æ”¾ã€æ›´çµæ´»çš„Webå¼€å‘ä¸–ç•Œçš„å¤§é—¨ã€‚

å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡Web Componentsï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ ä»ç®€å•çš„ç»„ä»¶å¼€å§‹ï¼Œé€æ­¥æ¢ç´¢å®ƒä»¬çš„å¼ºå¤§åŠŸèƒ½ã€‚éšç€Web Componentsçš„ä¸æ–­å‘å±•ï¼Œå®ƒä»¬å°†æˆä¸ºç°ä»£Webå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚

> "Web Componentsä¸æ˜¯è¦å–ä»£æ¡†æ¶ï¼Œè€Œæ˜¯ä¸ºæ¡†æ¶æä¾›ä¸€ç§æ›´åº•å±‚çš„ã€æ›´é€šç”¨çš„ç»„ä»¶æ„å»ºæ–¹å¼ã€‚å®ƒä»¬å¯ä»¥ä¸ä»»ä½•æ¡†æ¶å…±å­˜ï¼Œç”šè‡³å¯ä»¥åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­æ··åˆä½¿ç”¨ã€‚"

è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±Web Componentsçš„æœªæ¥ï¼Œæ„å»ºæ›´åŠ å¼€æ”¾ã€å¯é‡ç”¨çš„Webåº”ç”¨å§ï¼ğŸš€