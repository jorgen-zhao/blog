---
title: å‰ç«¯ä¸Žå›¾å½¢å­¦ï¼šæ·±å…¥Canvasä¸ŽWebGLï¼Œæž„å»ºæ²‰æµ¸å¼Webä½“éªŒ
date: 2026-02-03
tags:
  - å‰ç«¯å›¾å½¢å­¦
  - Canvas
  - WebGL
---

## å‰è¨€

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Jorgenï¼ðŸ‘‹ åœ¨å‰ç«¯å¼€å‘çš„æµ©ç€šæ˜Ÿç©ºä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¸“æ³¨äºŽç»„ä»¶æž„å»ºã€çŠ¶æ€ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œå´å¯èƒ½å¿½ç•¥äº†ä¸€ä¸ªå……æ»¡åˆ›é€ åŠ›çš„é¢†åŸŸâ€”â€”**å‰ç«¯å›¾å½¢å­¦**ã€‚éšç€Webåº”ç”¨æ—¥ç›Šå¤æ‚åŒ–ï¼Œä»Žæ•°æ®å¯è§†åŒ–åˆ°3Däº¤äº’ï¼Œä»Žå®žæ—¶æ¸²æŸ“åˆ°AR/VRä½“éªŒï¼Œå›¾å½¢æŠ€æœ¯æ­£æˆä¸ºçŽ°ä»£å‰ç«¯å·¥ç¨‹å¸ˆçš„å¿…å¤‡æŠ€èƒ½ã€‚

::: tip
"å›¾å½¢æ˜¯è¿žæŽ¥ç”¨æˆ·ä¸Žæ•°å­—ä¸–ç•Œçš„æ¡¥æ¢ï¼Œè€ŒCanvasä¸ŽWebGLæ­£æ˜¯è¿™åº§æ¡¥æ¢æœ€åšå®žçš„åŸºçŸ³ã€‚"
:::

åœ¨æµè§ˆçŽ°æœ‰æ–‡ç« æ—¶ï¼Œæˆ‘å‘çŽ°è™½ç„¶æˆ‘ä»¬æœ‰æ•°æ®å¯è§†åŒ–ã€æ¸²æŸ“æŠ€æœ¯ç­‰å†…å®¹ï¼Œä½†**ä¸“é—¨æ·±å…¥æŽ¢è®¨Canvasä¸ŽWebGLçš„å‰ç«¯å›¾å½¢å­¦æ–‡ç« **å°šå±žç©ºç™½ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æŽ¢ç´¢è¿™ä¸ªå……æ»¡é­…åŠ›çš„é¢†åŸŸå§ï¼ðŸš€

## CanvasåŸºç¡€ï¼šåƒç´ çº§æŽ§åˆ¶çš„ç”»å¸ƒ

### ä»€ä¹ˆæ˜¯Canvasï¼Ÿ

Canvasæ˜¯HTML5æä¾›çš„å¼ºå¤§ç»˜å›¾APIï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç½‘é¡µä¸Šé€šè¿‡JavaScriptç›´æŽ¥æ“ä½œåƒç´ ï¼Œåˆ›å»ºåŠ¨æ€å›¾å½¢å’ŒåŠ¨ç”»ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‰‹é‡Œæœ‰ä¸€å—æ— é™å¤§çš„æ•°å­—ç”»å¸ƒï¼Œå¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ç»˜åˆ¶ä»»ä½•å›¾å½¢ï¼ðŸŽ¨

```javascript
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

// ç»˜åˆ¶ä¸€ä¸ªæ¸å˜åœ†å½¢
const gradient = ctx.createRadialGradient(100, 100, 10, 100, 100, 100);
gradient.addColorStop(0, 'rgba(255, 0, 0, 1)');
gradient.addColorStop(1, 'rgba(255, 0, 0, 0)');

ctx.beginPath();
ctx.arc(100, 100, 100, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();
```

### Canvasæ ¸å¿ƒèƒ½åŠ›

- **2Dç»˜å›¾**ï¼šè·¯å¾„ã€å½¢çŠ¶ã€æ–‡æœ¬ã€å›¾åƒå¤„ç†
- **åŠ¨ç”»æŽ§åˆ¶**ï¼šrequestAnimationFrameå®žçŽ°æµç•…åŠ¨ç”»
- **åƒç´ æ“ä½œ**ï¼šç›´æŽ¥è¯»å†™ImageData
- **äº¤äº’å“åº”**ï¼šç»“åˆäº‹ä»¶å¤„ç†å®žçŽ°ç”¨æˆ·äº¤äº’

::: theorem
Canvasæœ€é€‚åˆå¤„ç†2Då›¾å½¢ã€æ¸¸æˆã€å›¾åƒç¼–è¾‘å’Œæ•°æ®å¯è§†åŒ–ï¼Œå…¶APIç›´è§‚æ˜“ç”¨ï¼Œå­¦ä¹ æ›²çº¿ç›¸å¯¹å¹³ç¼“ã€‚
::>

## WebGLå…¥é—¨ï¼š3Då›¾å½¢çš„é­”æ³•ä¸–ç•Œ

### ä»ŽCanvasåˆ°WebGL

å½“2Dæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼ŒWebGLåº”è¿è€Œç”Ÿï¼WebGLï¼ˆWeb Graphics Libraryï¼‰æ˜¯åŸºäºŽOpenGL ESçš„JavaScript APIï¼Œè®©æˆ‘ä»¬èƒ½åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºé«˜æ€§èƒ½çš„3Då›¾å½¢ã€‚~~æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çªç„¶ä»ŽäºŒç»´å¹³é¢è·ƒå‡åˆ°ä¸‰ç»´ç©ºé—´ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹å°æ¿€åŠ¨ï¼Ÿ~~

```javascript
const canvas = document.getElementById('webglCanvas');
const gl = canvas.getContext('webgl');

// é¡¶ç‚¹ç€è‰²å™¨
const vsSource = `
  attribute vec4 aVertexPosition;
  void main() {
    gl_Position = aVertexPosition;
  }
`;

// ç‰‡æ®µç€è‰²å™¨
const fsSource = `
  void main() {
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
  }
`;

// åˆ›å»ºç€è‰²å™¨ç¨‹åº
const shaderProgram = initShaderProgram(gl, vsSource, fsSource);
```

### WebGLæ ¸å¿ƒæ¦‚å¿µ

- **ç€è‰²å™¨**ï¼šè¿è¡Œåœ¨GPUä¸Šçš„å°ç¨‹åºï¼ˆé¡¶ç‚¹ç€è‰²å™¨+ç‰‡æ®µç€è‰²å™¨ï¼‰
- **ç¼“å†²åŒº**ï¼šå­˜å‚¨é¡¶ç‚¹æ•°æ®ã€é¢œè‰²ã€çº¹ç†ç­‰
- **çº¹ç†**ï¼šä¸º3Dæ¨¡åž‹æ·»åŠ è¡¨é¢ç»†èŠ‚
- **çŸ©é˜µå˜æ¢**ï¼šå¤„ç†3Dç©ºé—´çš„æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»

> ðŸ“¡ WebGLè™½ç„¶å¼ºå¤§ï¼Œä½†ç›´æŽ¥ä½¿ç”¨åŽŸå§‹APIéžå¸¸å¤æ‚ã€‚æŽ¨èä»ŽThree.jsç­‰åº“å¼€å§‹ï¼Œå®ƒä»¬å°è£…äº†åº•å±‚ç»†èŠ‚ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºŽåˆ›æ„è€Œéžæ•°å­¦è®¡ç®—ï¼

## é«˜çº§åº”ç”¨ï¼šå›¾å½¢å­¦çš„å®žé™…æˆ˜åœº

### 1. å®žæ—¶æ•°æ®å¯è§†åŒ–

```mermaid
graph LR
    A[å®žæ—¶æ•°æ®æº] --> B[WebGLæ¸²æŸ“ç®¡çº¿]
    B --> C[é«˜æ€§èƒ½å›¾è¡¨]
    C --> D[ç”¨æˆ·äº¤äº’]
```

ä½¿ç”¨WebGLå®žçŽ°ç™¾ä¸‡çº§æ•°æ®ç‚¹çš„å®žæ—¶æ¸²æŸ“ï¼Œæ¯”ä¼ ç»ŸDOMæ“ä½œå¿«100å€ä»¥ä¸Šï¼ðŸ“Š

### 2. 3Däº§å“å±•ç¤º

ç”µå•†ç½‘ç«™ä¸­çš„3Däº§å“å±•ç¤ºï¼Œç”¨æˆ·å¯360Â°æ—‹è½¬æŸ¥çœ‹å•†å“ç»†èŠ‚ï¼Œæå‡è½¬åŒ–çŽ‡30%+ã€‚ðŸ›ï¸

### 3. AR/VRä½“éªŒ

ç»“åˆWebXR APIï¼Œåœ¨æµè§ˆå™¨ä¸­å®žçŽ°å¢žå¼ºçŽ°å®žå’Œè™šæ‹ŸçŽ°å®žä½“éªŒï¼Œæ— éœ€å®‰è£…é¢å¤–åº”ç”¨ï¼ðŸ¥½

## æ€§èƒ½ä¼˜åŒ–ï¼šè®©å›¾å½¢é£žèµ·æ¥

### Canvasä¼˜åŒ–æŠ€å·§

1. **ç¦»å±æ¸²æŸ“**ï¼šä½¿ç”¨`document.createElement('canvas')`åˆ›å»ºç¦»å±Canvas
2. **åˆ†å±‚æ¸²æŸ“**ï¼šå°†é™æ€èƒŒæ™¯ä¸ŽåŠ¨æ€å…ƒç´ åˆ†ç¦»
3. **èŠ‚æµæŽ§åˆ¶**ï¼šå¯¹resizeäº‹ä»¶è¿›è¡ŒèŠ‚æµå¤„ç†

```javascript
// ä½¿ç”¨ç¦»å±Canvasä¼˜åŒ–æ€§èƒ½
const offscreenCanvas = document.createElement('canvas');
const offscreenCtx = offscreenCanvas.getContext('2d');
// ...ç»˜åˆ¶åˆ°ç¦»å±Canvas
// ç„¶åŽä¸€æ¬¡æ€§ç»˜åˆ¶åˆ°ä¸»Canvas
ctx.drawImage(offscreenCanvas, 0, 0);
```

### WebGLæ€§èƒ½å…³é”®

- **æ‰¹å¤„ç†æ¸²æŸ“**ï¼šåˆå¹¶ç»˜åˆ¶è°ƒç”¨
- **çº¹ç†å›¾é›†**ï¼šå‡å°‘çº¹ç†åˆ‡æ¢
- **LODæŠ€æœ¯**ï¼šæ ¹æ®è·ç¦»è°ƒæ•´æ¨¡åž‹å¤æ‚åº¦
- **GPUå®žä¾‹åŒ–**ï¼šæ¸²æŸ“å¤§é‡ç›¸ä¼¼å¯¹è±¡

::: tip
è®°ä½ï¼šåœ¨å›¾å½¢åº”ç”¨ä¸­ï¼Œ60FPSæ˜¯é»„é‡‘æ ‡å‡†ï¼ä»»ä½•ä½ŽäºŽè¿™ä¸ªæ•°å€¼çš„ä½“éªŒéƒ½ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°å¡é¡¿ã€‚
:::

## å·¥å…·ä¸Žåº“ï¼šç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š

| åº“åç§° | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹ |
|--------|----------|------|
| Three.js | 3Dåœºæ™¯ | æœ€æµè¡Œçš„WebGLåº“ï¼Œæ–‡æ¡£å®Œå–„ |
| PixiJS | 2Dæ¸¸æˆ | é«˜æ€§èƒ½2Dæ¸²æŸ“ï¼Œé€‚åˆæ¸¸æˆå¼€å‘ |
| Babylon.js | 3Då¼•æ“Ž | å®Œæ•´çš„3Då¼€å‘è§£å†³æ–¹æ¡ˆ |
| D3.js | æ•°æ®å¯è§†åŒ– | å¼ºå¤§çš„æ•°æ®ç»‘å®šèƒ½åŠ› |
| Chart.js | å›¾è¡¨ | ç®€å•æ˜“ç”¨çš„å›¾è¡¨åº“ |

**æŽ¨èå­¦ä¹ è·¯å¾„**ï¼š
1. ä»ŽCanvas APIå¼€å§‹ï¼Œç†è§£åŸºæœ¬ç»˜å›¾åŽŸç†
2. å­¦ä¹ WebGLåŸºç¡€æ¦‚å¿µï¼ˆç€è‰²å™¨ã€ç¼“å†²åŒºï¼‰
3. ä½¿ç”¨Three.jsæž„å»º3Dåœºæ™¯
4. æ·±å…¥ç ”ç©¶å›¾å½¢å­¦æ•°å­¦ï¼ˆçº¿æ€§ä»£æ•°ã€3Då˜æ¢ï¼‰
5. æŽ¢ç´¢WebGPUç­‰æ–°æŠ€æœ¯

## æœªæ¥å±•æœ›ï¼šå›¾å½¢å­¦çš„æ˜Ÿè¾°å¤§æµ·

éšç€WebGPUçš„æ™®åŠï¼Œæˆ‘ä»¬å°†è¿Žæ¥ï¼š
- **æ›´å¼ºå¤§çš„æ¸²æŸ“èƒ½åŠ›**ï¼šæ”¯æŒå…‰çº¿è¿½è¸ªç­‰é«˜çº§æ¸²æŸ“æŠ€æœ¯
- **æ›´æŽ¥è¿‘åŽŸç”Ÿæ€§èƒ½**ï¼šåª²ç¾ŽåŽŸç”Ÿåº”ç”¨çš„å›¾å½¢è¡¨çŽ°
- **æ›´å¹¿æ³›çš„è®¾å¤‡æ”¯æŒ**ï¼šä»Žæ‰‹æœºåˆ°æ¡Œé¢åˆ°ARè®¾å¤‡

> ðŸ¤” æœªæ¥çš„Webåº”ç”¨å°†ä¸å†å±€é™äºŽæ–‡æ¡£å’Œè¡¨å•ï¼Œè€Œæ˜¯æˆä¸ºçœŸæ­£çš„äº¤äº’å¼æ•°å­—ä½“éªŒå¹³å°ï¼

## ç»“è¯­

å‰ç«¯å›¾å½¢å­¦æ˜¯ä¸€ç‰‡å……æ»¡æœºé‡çš„è“æµ·ï¼ŒæŽŒæ¡Canvaså’ŒWebGLæŠ€æœ¯å°†è®©ä½ åœ¨å¼€å‘è€…çš„æµ·æ´‹ä¸­è„±é¢–è€Œå‡ºã€‚æ— è®ºä½ æ˜¯æž„å»ºæ•°æ®å¯è§†åŒ–ã€3Däº§å“å±•ç¤ºè¿˜æ˜¯åˆ›æ„äº¤äº’åº”ç”¨ï¼Œå›¾å½¢æŠ€æœ¯éƒ½èƒ½ä¸ºä½ çš„é¡¹ç›®æ³¨å…¥çµé­‚ã€‚

è®°ä½ï¼š**æœ€å¥½çš„å›¾å½¢ä¸æ˜¯æœ€ç‚«é…·çš„ï¼Œè€Œæ˜¯æœ€èƒ½è§£å†³é—®é¢˜çš„**ã€‚ä»Žä»Šå¤©å¼€å§‹ï¼Œæ‹¿èµ·Canvaså’ŒWebGLè¿™æŠŠç”»ç¬”ï¼Œåœ¨æ•°å­—ç”»å¸ƒä¸Šæç»˜å±žäºŽä½ çš„åˆ›æ„ä¸–ç•Œå§ï¼ðŸŽ¨

---

> "ä»£ç æ˜¯é€»è¾‘ï¼Œå›¾å½¢æ˜¯è‰ºæœ¯ï¼Œè€Œå‰ç«¯å›¾å½¢å­¦å°±æ˜¯é€»è¾‘ä¸Žè‰ºæœ¯çš„å®Œç¾Žèžåˆã€‚"  
> â€”â€” Jorgençš„å›¾å½¢å­¦æ„Ÿæ‚Ÿ