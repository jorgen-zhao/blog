---
title: React-ä»å…¥é—¨åˆ°ç²¾é€š-æ„å»ºç°ä»£Webåº”ç”¨
date: 2023-10-15 14:30:00
permalink: /pages/react-mastery/
categories: 
  - å‰ç«¯å¼€å‘
tags:
  - React
  - JavaScript
  - å‰ç«¯æ¡†æ¶
  - Webå¼€å‘
author: 
  name: Jorgen
  link: https://github.com/jorgen-zhao
---

## å‰è¨€

ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°å„ç§æ¡†æ¶çš„åå­—ï¼šVueã€Angularã€Svelte...è€Œå…¶ä¸­ï¼ŒReactæ— ç–‘æ˜¯å½“ä»Šæœ€æµè¡Œã€æœ€å¹¿æ³›ä½¿ç”¨çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ã€‚åœ¨æˆ‘ä¹‹å‰çš„åšå®¢ä¸­ï¼Œæˆ‘å·²ç»è¯¦ç»†ä»‹ç»äº†Vue.jsæ¡†æ¶çš„ä½¿ç”¨ï¼Œä½†~~ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæ€ä¹ˆèƒ½ä¸æ‡‚Reactå‘¢~~ ğŸ˜‚

ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶ä¸€èµ·æ·±å…¥æ¢è®¨Reactï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§å®è·µï¼Œå¸®åŠ©ä½ å…¨é¢æŒæ¡è¿™ä¸ªå¼ºå¤§çš„å‰ç«¯æ¡†æ¶ã€‚

## Reactç®€ä»‹

::: tip
Reactæ˜¯ç”±Facebookï¼ˆç°Metaï¼‰å¼€å‘å¹¶ç»´æŠ¤çš„ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“ã€‚å®ƒé‡‡ç”¨ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ï¼Œé€šè¿‡è™šæ‹ŸDOMæé«˜æ¸²æŸ“æ€§èƒ½ï¼Œæ˜¯ç›®å‰å‰ç«¯å¼€å‘é¢†åŸŸæœ€å—æ¬¢è¿çš„æ¡†æ¶ä¹‹ä¸€ã€‚
:::

### ä¸ºä»€ä¹ˆé€‰æ‹©Reactï¼Ÿ

1. **ç»„ä»¶åŒ–å¼€å‘**ï¼šå°†UIæ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œæé«˜ä»£ç å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
2. **è™šæ‹ŸDOM**ï¼šé€šè¿‡å†…å­˜ä¸­çš„DOMè¡¨ç¤ºï¼Œå‡å°‘å®é™…DOMæ“ä½œï¼Œæé«˜æ€§èƒ½ã€‚
3. **å•å‘æ•°æ®æµ**ï¼šæ•°æ®æµå‘æ¸…æ™°ï¼Œä¾¿äºç†è§£å’Œè°ƒè¯•ã€‚
4. **ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ**ï¼šæ‹¥æœ‰åºå¤§çš„ç¤¾åŒºå’Œä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒã€‚
5. **è·¨å¹³å°èƒ½åŠ›**ï¼šé€šè¿‡React Nativeå¯ä»¥å¼€å‘ç§»åŠ¨åº”ç”¨ï¼Œé€šè¿‡React Desktopå¯ä»¥å¼€å‘æ¡Œé¢åº”ç”¨ã€‚

## ReactåŸºç¡€æ¦‚å¿µ

### JSXè¯­æ³•

Reactä½¿ç”¨JSXï¼ˆJavaScript XMLï¼‰æ¥æè¿°UIç•Œé¢ã€‚JSXæ˜¯JavaScriptçš„è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨JavaScriptä»£ç ä¸­ç¼–å†™ç±»ä¼¼HTMLçš„ä»£ç ã€‚

```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

// ä½¿ç”¨ç»„ä»¶
const element = <Welcome name="Jorgen" />;
```

JSXæœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆæ™®é€šçš„JavaScriptä»£ç ï¼Œé€šè¿‡`React.createElement()`å‡½æ•°åˆ›å»ºReactå…ƒç´ ã€‚

### ç»„ä»¶ä¸Props

Reactåº”ç”¨ç”±ç»„ä»¶æ„æˆã€‚ç»„ä»¶æ˜¯ç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„UIç‰‡æ®µï¼Œå¯ä»¥æ¥æ”¶è¾“å…¥ï¼ˆç§°ä¸ºpropsï¼‰å¹¶è¿”å›Reactå…ƒç´ ã€‚

```jsx
// å‡½æ•°ç»„ä»¶
function Greeting(props) {
  return <h1>Hello, {props.name}</h1>;
}

// ç±»ç»„ä»¶
class Welcome extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}</h1>;
  }
}
```

### Stateä¸ç”Ÿå‘½å‘¨æœŸ

ç»„ä»¶å¯ä»¥ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€ï¼ˆstateï¼‰ï¼ŒçŠ¶æ€å˜åŒ–ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚

```jsx
class Timer extends React.Component {
  constructor(props) {
    super(props);
    this.state = { seconds: 0 };
  }

  componentDidMount() {
    this.interval = setInterval(() => {
      this.setState(prevState => ({
        seconds: prevState.seconds + 1
      }));
    }, 1000);
  }

  componentWillUnmount() {
    clearInterval(this.interval);
  }

  render() {
    return (
      <div>
        <p>å·²è¿è¡Œ: {this.state.seconds} ç§’</p>
      </div>
    );
  }
}
```

## React Hooks

React Hooksæ˜¯React 16.8å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»–Reactç‰¹æ€§ï¼Œè€Œä¸å¿…ç¼–å†™ç±»ç»„ä»¶ã€‚

### useState Hook

```jsx
import React, { useState } from 'react';

function Counter() {
  // å£°æ˜ä¸€ä¸ªæ–°çš„å«åš "count" çš„ state å˜é‡
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>ä½ ç‚¹å‡»äº† {count} æ¬¡</p>
      <button onClick={() => setCount(count + 1)}>
        ç‚¹å‡»æˆ‘
      </button>
    </div>
  );
}
```

### useEffect Hook

```jsx
import React, { useState, useEffect } from 'react';

function Example() {
  const [count, setCount] = useState(0);

  // ç›¸å½“äº componentDidMount å’Œ componentDidUpdate:
  useEffect(() => {
    // æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜
    document.title = `ä½ ç‚¹å‡»äº† ${count} æ¬¡`;
  });

  return (
    <div>
      <p>ä½ ç‚¹å‡»äº† {count} æ¬¡</p>
      <button onClick={() => setCount(count + 1)}>
        ç‚¹å‡»æˆ‘
      </button>
    </div>
  );
}
```

### è‡ªå®šä¹‰Hook

```jsx
import { useState, useEffect } from 'react';

function useCounter(initialValue) {
  const [count, setCount] = useState(initialValue);

  const increment = () => setCount(count + 1);
  const decrement = () => setCount(count - 1);
  const reset = () => setCount(initialValue);

  return { count, increment, decrement, reset };
}

function CounterComponent() {
  const { count, increment, decrement, reset } = useCounter(0);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>+</button>
      <button onClick={decrement}>-</button>
      <button onClick={reset}>Reset</button>
    </div>
  );
}
```

## ReactçŠ¶æ€ç®¡ç†

éšç€åº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼ŒçŠ¶æ€ç®¡ç†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Reactç”Ÿæ€ç³»ç»Ÿä¸­æœ‰å¤šç§çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼š

### Context API

```jsx
import React, { createContext, useContext, useReducer } from 'react';

// åˆ›å»ºContext
const AppContext = createContext();

// å®šä¹‰åˆå§‹çŠ¶æ€
const initialState = {
  user: null,
  theme: 'light',
  language: 'zh-CN'
};

// ä½¿ç”¨useReducerç®¡ç†å¤æ‚çŠ¶æ€
function reducer(state, action) {
  switch (action.type) {
    case 'SET_USER':
      return { ...state, user: action.payload };
    case 'TOGGLE_THEME':
      return { ...state, theme: state.theme === 'light' ? 'dark' : 'light' };
    case 'SET_LANGUAGE':
      return { ...state, language: action.payload };
    default:
      return state;
  }
}

// åˆ›å»ºProviderç»„ä»¶
function AppProvider({ children }) {
  const [state, dispatch] = useReducer(reducer, initialState);
  
  return (
    <AppContext.Provider value={{ state, dispatch }}>
      {children}
    </AppContext.Provider>
  );
}

// åˆ›å»ºè‡ªå®šä¹‰Hookä»¥ä¾¿åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Context
function useAppContext() {
  return useContext(AppContext);
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function UserProfile() {
  const { state, dispatch } = useAppContext();
  
  return (
    <div>
      <h2>User Profile</h2>
      <p>Theme: {state.theme}</p>
      <button onClick={() => dispatch({ type: 'TOGGLE_THEME' })}>
        Toggle Theme
      </button>
    </div>
  );
}
```

### Redux

Reduxæ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„çŠ¶æ€å®¹å™¨ï¼Œé€‚ç”¨äºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚

```jsx
// store.js
import { createStore } from 'redux';

// å®šä¹‰actionç±»å‹
const INCREMENT = 'INCREMENT';
const DECREMENT = 'DECREMENT';

// å®šä¹‰action creators
function increment() {
  return { type: INCREMENT };
}

function decrement() {
  return { type: DECREMENT };
}

// å®šä¹‰reducer
function counterReducer(state = 0, action) {
  switch (action.type) {
    case INCREMENT:
      return state + 1;
    case DECREMENT:
      return state - 1;
    default:
      return state;
  }
}

// åˆ›å»ºstore
const store = createStore(counterReducer);

export { increment, decrement, store };
```

```jsx
// CounterComponent.js
import React, { useState, useEffect } from 'react';
import { increment, decrement, store } from './store';

function CounterComponent() {
  const [count, setCount] = useState(store.getState());

  useEffect(() => {
    const unsubscribe = store.subscribe(() => {
      setCount(store.getState());
    });

    return () => unsubscribe();
  }, []);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => store.dispatch(increment())}>+</button>
      <button onClick={() => store.dispatch(decrement())}>-</button>
    </div>
  );
}
```

## React Router

React Routeræ˜¯Reactåº”ç”¨ä¸­æœ€å¸¸ç”¨çš„è·¯ç”±åº“ï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯è·¯ç”±ã€‚

```jsx
import React from 'react';
import { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom';

function Home() {
  return (
    <div>
      <h2>é¦–é¡µ</h2>
    </div>
  );
}

function About() {
  return (
    <div>
      <h2>å…³äºæˆ‘ä»¬</h2>
    </div>
  );
}

function Contact() {
  return (
    <div>
      <h2>è”ç³»æˆ‘ä»¬</h2>
    </div>
  );
}

function NotFound() {
  return (
    <div>
      <h2>404 - é¡µé¢æœªæ‰¾åˆ°</h2>
    </div>
  );
}

function App() {
  return (
    <Router>
      <div>
        <nav>
          <ul>
            <li><Link to="/">é¦–é¡µ</Link></li>
            <li><Link to="/about">å…³äºæˆ‘ä»¬</Link></li>
            <li><Link to="/contact">è”ç³»æˆ‘ä»¬</Link></li>
          </ul>
        </nav>

        <Switch>
          <Route exact path="/" component={Home} />
          <Route path="/about" component={About} />
          <Route path="/contact" component={Contact} />
          <Route component={NotFound} />
        </Switch>
      </div>
    </Router>
  );
}
```

## Reactæ€§èƒ½ä¼˜åŒ–

éšç€åº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼Œæ€§èƒ½ä¼˜åŒ–å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚ä»¥ä¸‹æ˜¯Reactåº”ç”¨ä¸­å¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š

### ä½¿ç”¨React.memo

```jsx
import React, { memo } from 'react';

const ExpensiveComponent = memo(function ExpensiveComponent({ data }) {
  // å¤æ‚çš„è®¡ç®—æˆ–æ¸²æŸ“é€»è¾‘
  const processedData = data.map(item => {
    // å¤æ‚å¤„ç†...
  });

  return (
    <div>
      {processedData.map(item => (
        <div key={item.id}>{item.name}</div>
      ))}
    </div>
  );
});
```

### ä½¿ç”¨useMemoå’ŒuseCallback

```jsx
import React, { useState, useMemo, useCallback } from 'react';

function ExpensiveComponent({ list, filter }) {
  const [count, setCount] = useState(0);

  // ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
  const filteredList = useMemo(() => {
    console.log('Filtering list...');
    return list.filter(item => item.includes(filter));
  }, [list, filter]);

  // ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
  const handleAdd = useCallback(() => {
    setCount(prevCount => prevCount + 1);
  }, []);

  return (
    <div>
      <button onClick={handleAdd}>Add</button>
      <p>Count: {count}</p>
      <ul>
        {filteredList.map(item => (
          <li key={item}>{item}</li>
        ))}
      </ul>
    </div>
  );
}
```

### ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½

```jsx
import React, { Suspense, lazy } from 'react';

// ä½¿ç”¨React.lazyè¿›è¡Œæ‡’åŠ è½½
const Home = lazy(() => import('./Home'));
const About = lazy(() => import('./About'));
const Contact = lazy(() => import('./Contact'));

function App() {
  return (
    <Router>
      <div>
        <nav>
          <ul>
            <li><Link to="/">é¦–é¡µ</Link></li>
            <li><Link to="/about">å…³äºæˆ‘ä»¬</Link></li>
            <li><Link to="/contact">è”ç³»æˆ‘ä»¬</Link></li>
          </ul>
        </nav>

        <Suspense fallback={<div>Loading...</div>}>
          <Switch>
            <Route exact path="/" component={Home} />
            <Route path="/about" component={About} />
            <Route path="/contact" component={Contact} />
          </Switch>
        </Suspense>
      </div>
    </Router>
  );
}
```

## Reactç”Ÿæ€ç³»ç»Ÿçš„å…¶ä»–é‡è¦å·¥å…·

### Next.js

Next.jsæ˜¯ä¸€ä¸ªåŸºäºReactçš„æ¡†æ¶ï¼Œæä¾›äº†æœåŠ¡ç«¯æ¸²æŸ“ã€é™æ€ç«™ç‚¹ç”Ÿæˆã€è·¯ç”±ç³»ç»Ÿç­‰åŠŸèƒ½ã€‚

```jsx
// pages/index.js
import React from 'react';

export default function Home() {
  return (
    <div>
      <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™</h1>
      <p>è¿™æ˜¯ä½¿ç”¨Next.jsæ„å»ºçš„é¡µé¢</p>
    </div>
  );
}
```

### Gatsby

Gatsbyæ˜¯ä¸€ä¸ªåŸºäºReactçš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œç‰¹åˆ«é€‚åˆæ„å»ºå†…å®¹é©±åŠ¨çš„ç½‘ç«™ã€‚

```jsx
// src/pages/index.js
import React from 'react';

export default function Home() {
  return (
    <div>
      <h1>æˆ‘çš„åšå®¢</h1>
      <p>è¿™æ˜¯ä½¿ç”¨Gatsbyæ„å»ºçš„åšå®¢é¦–é¡µ</p>
    </div>
  );
}
```

### React Testing Library

React Testing Libraryæ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯•Reactç»„ä»¶çš„åº“ï¼Œå®ƒé¼“åŠ±è‰¯å¥½çš„æµ‹è¯•å®è·µã€‚

```jsx
// Button.test.js
import React from 'react';
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Button from './Button';

test('button renders correctly', () => {
  render(<Button>Click me</Button>);
  const buttonElement = screen.getByText(/click me/i);
  expect(buttonElement).toBeInTheDocument();
});

test('button calls onClick handler when clicked', async () => {
  const handleClick = jest.fn();
  render(<Button onClick={handleClick}>Click me</Button>);
  
  const user = userEvent.setup();
  const buttonElement = screen.getByText(/click me/i);
  
  await user.click(buttonElement);
  
  expect(handleClick).toHaveBeenCalledTimes(1);
});
```

## ç»“è¯­

Reactæ˜¯ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å‰ç«¯æ¡†æ¶ï¼Œå®ƒé€šè¿‡ç»„ä»¶åŒ–ã€è™šæ‹ŸDOMå’Œä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼Œæå¤§åœ°ç®€åŒ–äº†ç°ä»£Webåº”ç”¨çš„å¼€å‘è¿‡ç¨‹ã€‚ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§æŠ€å·§ï¼ŒReactæä¾›äº†æ„å»ºå¤æ‚ç”¨æˆ·ç•Œé¢æ‰€éœ€çš„ä¸€åˆ‡å·¥å…·ã€‚

> "å­¦ä¹ Reactä¸ä»…ä»…æ˜¯å­¦ä¹ ä¸€ä¸ªæ¡†æ¶ï¼Œæ›´æ˜¯å­¦ä¹ ä¸€ç§æ„å»ºç”¨æˆ·ç•Œé¢çš„æ€ç»´æ–¹å¼ã€‚"

ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒæŒæ¡Reactä¸ä»…èƒ½æé«˜ä½ çš„å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿèƒ½è®©ä½ æ›´å¥½åœ°ç†è§£ç°ä»£å‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å¼€å¯Reactå­¦ä¹ ä¹‹æ—…ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›çŸ¥è¯†ã€‚

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ğŸ‘‹

## ä¸ªäººå»ºè®®

1. **å¾ªåºæ¸è¿›**ï¼šä»ReactåŸºç¡€å¼€å§‹ï¼Œé€æ­¥å­¦ä¹ é«˜çº§æ¦‚å¿µï¼Œä¸è¦æ€¥äºæ±‚æˆã€‚
2. **å®è·µé©±åŠ¨**ï¼šç†è®ºå­¦ä¹ åï¼Œä¸€å®šè¦åŠ¨æ‰‹å®è·µï¼Œæ„å»ºè‡ªå·±çš„é¡¹ç›®ã€‚
3. **å…³æ³¨ç”Ÿæ€**ï¼šReactç”Ÿæ€ç³»ç»Ÿéå¸¸ä¸°å¯Œï¼Œäº†è§£ç›¸å…³å·¥å…·ï¼ˆå¦‚Reduxã€React Routerç­‰ï¼‰èƒ½è®©ä½ æ›´é«˜æ•ˆåœ°å¼€å‘ã€‚
4. **ä¿æŒæ›´æ–°**ï¼šReactå‘å±•è¿…é€Ÿï¼Œå…³æ³¨å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºåŠ¨æ€ï¼Œäº†è§£æœ€æ–°ç‰¹æ€§å’Œæœ€ä½³å®è·µã€‚

::: right
"ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿èƒ½åœ¨æœºå™¨ä¸Šè¿è¡Œã€‚"
- å”çº³å¾·Â·å…‹åŠªç‰¹
:::