---
title: React-ä»å…¥é—¨åˆ°ç²¾é€š-æ„å»ºç°ä»£å‰ç«¯åº”ç”¨
date: 2023-11-15 10:30:00
permalink: /pages/react-intro/
categories: 
  - å‰ç«¯å¼€å‘
tags:
  - React
  - å‰ç«¯æ¡†æ¶
  - JavaScript
author: 
  name: Jorgen
  link: https://github.com/jorgen-zhao
---

## å‰è¨€

åœ¨å‰ç«¯å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæ¡†æ¶çš„é€‰æ‹©å¾€å¾€å†³å®šäº†å¼€å‘æ•ˆç‡å’Œé¡¹ç›®è´¨é‡ã€‚ä¹‹å‰æˆ‘å·²ç»å†™äº†ä¸€ç¯‡å…³äº Vue.js çš„æ–‡ç« ï¼Œè®¸å¤šè¯»è€…åé¦ˆå¸Œæœ›ä¹Ÿèƒ½äº†è§£ä¸€ä¸‹ React è¿™ä¸ªåŒæ ·å¼ºå¤§çš„å‰ç«¯æ¡†æ¶ã€‚ç¡®å®ï¼ŒReact å’Œ Vue æ˜¯å½“å‰å‰ç«¯é¢†åŸŸçš„ä¸¤å¤§å·¨å¤´ï¼Œå„æœ‰åƒç§‹ã€‚ğŸ¤”

ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼ŒæŒæ¡ React å·²ç»æˆä¸ºå¿…å¤‡æŠ€èƒ½ä¹‹ä¸€ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶ä¸€èµ·æ¢ç´¢ React çš„å¥‡å¦™ä¸–ç•Œï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ„å»ºç°ä»£åŒ–çš„å‰ç«¯åº”ç”¨ï¼

## React ç®€ä»‹

React æ˜¯ç”± Facebookï¼ˆç° Metaï¼‰å¼€å‘å¹¶ç»´æŠ¤çš„ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒé‡‡ç”¨ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œé€šè¿‡è™šæ‹Ÿ DOM æé«˜äº†æ¸²æŸ“æ€§èƒ½ï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ã€‚

::: tip
React ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒæ›´æ˜¯ä¸€ç§æ„å»ºç”¨æˆ·ç•Œé¢çš„æ€æƒ³å’Œæ–¹æ³•è®ºã€‚
:::

### ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ

1. **ç»„ä»¶åŒ–å¼€å‘**ï¼šå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€‚
2. **è™šæ‹Ÿ DOM**ï¼šé€šè¿‡æ¯”è¾ƒè™šæ‹Ÿ DOM çš„å·®å¼‚ï¼Œæœ€å°åŒ–å®é™… DOM æ“ä½œï¼Œæé«˜æ€§èƒ½ã€‚
3. **å•å‘æ•°æ®æµ**ï¼šæ•°æ®æµå‘æ¸…æ™°ï¼Œä¾¿äºè°ƒè¯•å’Œç»´æŠ¤ã€‚
4. **ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ**ï¼šæ‹¥æœ‰åºå¤§çš„ç¤¾åŒºå’Œä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ã€‚

## React åŸºç¡€

### JSX è¯­æ³•

JSX æ˜¯ React ä¸­ç”¨äºæè¿° UI çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå®ƒçœ‹èµ·æ¥åƒ HTMLï¼Œä½†å®é™…ä¸Šæ˜¯ JavaScriptã€‚

```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

::: theorem
JSX æœ€ç»ˆä¼šè¢« Babel ç­‰å·¥å…·è½¬æ¢ä¸º React.createElement() è°ƒç”¨ï¼Œå› æ­¤å®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ JavaScriptã€‚
:::

### ç»„ä»¶ä¸ Props

React ä¸­æœ‰ä¸¤ç§ä¸»è¦ç»„ä»¶ç±»å‹ï¼šå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ã€‚ç°ä»£ React å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ›´æ¨èä½¿ç”¨å‡½æ•°ç»„ä»¶ã€‚

```jsx
// å‡½æ•°ç»„ä»¶
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

// ç±»ç»„ä»¶
class Welcome extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}</h1>;
  }
}
```

Propsï¼ˆå±æ€§ï¼‰æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œå®ƒä»¬æ˜¯åªè¯»çš„ã€‚

### State ä¸ç”Ÿå‘½å‘¨æœŸ

åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Hooks æ¥ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚

```jsx
import React, { useState, useEffect } from 'react';

function Example() {
  // å£°æ˜ä¸€ä¸ªæ–°çš„ state å˜é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º "count"
  const [count, setCount] = useState(0);

  // ç±»ä¼¼äº componentDidMount å’Œ componentDidUpdate
  useEffect(() => {
    // ä½¿ç”¨æµè§ˆå™¨çš„ API æ›´æ–°æ–‡æ¡£æ ‡é¢˜
    document.title = `You clicked ${count} times`;
  });

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

## React è¿›é˜¶

### Hooks è¯¦è§£

React Hooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»– React ç‰¹æ€§ã€‚

#### å¸¸ç”¨ Hooks

1. **useState**ï¼šç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  state
2. **useEffect**ï¼šå¤„ç†å‰¯ä½œç”¨ï¼ˆæ•°æ®è·å–ã€è®¢é˜…æˆ–æ‰‹åŠ¨ä¿®æ”¹ DOMï¼‰
3. **useContext**ï¼šè®¢é˜… React context
4. **useReducer**ï¼šå¤æ‚ state é€»è¾‘çš„æ›¿ä»£æ–¹æ¡ˆ
5. **useCallback**ï¼šè®°å¿†åŒ–å‡½æ•°
6. **useMemo**ï¼šè®°å¿†åŒ–è®¡ç®—ç»“æœ
7. **useRef**ï¼šåˆ›å»ºå¯å˜å¼•ç”¨
8. **useImperativeHandle**ï¼šè‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼
9. **useLayoutEffect**ï¼šDOM æ›´æ–°å‰åŒæ­¥æ‰§è¡Œ
10. **useDebugValue**ï¼šåœ¨ React DevTools ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook æ ‡ç­¾

### æ¡ä»¶æ¸²æŸ“

React ä¸­æœ‰å¤šç§æ¡ä»¶æ¸²æŸ“çš„æ–¹å¼ï¼š

```jsx
// 1. ä½¿ç”¨ if è¯­å¥
function Greeting({ isLoggedIn }) {
  if (isLoggedIn) {
    return <UserGreeting />;
  }
  return <GuestGreeting />;
}

// 2. ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦
function Greeting({ isLoggedIn }) {
  return isLoggedIn ? <UserGreeting /> : <GuestGreeting />;
}

// 3. ä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦
function Mailbox({ unreadMessages }) {
  return (
    <div>
      <h1>Hello!</h1>
      {unreadMessages.length > 0 &&
        <h2>
          You have {unreadMessages.length} unread messages.
        </h2>
      }
    </div>
  );
}
```

### åˆ—è¡¨ä¸ Key

åœ¨ React ä¸­æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„ key å±æ€§ã€‚

```jsx
function NumberList({ numbers }) {
  const listItems = numbers.map((number) =>
    <li key={number.toString()}>
      {number}
    </li>
  );
  return (
    <ul>{listItems}</ul>
  );
}
```

## React ç”Ÿæ€ç³»ç»Ÿ

### çŠ¶æ€ç®¡ç†

å½“åº”ç”¨å˜å¾—å¤æ‚æ—¶ï¼ŒçŠ¶æ€ç®¡ç†å˜å¾—å°¤ä¸ºé‡è¦ã€‚React ç”Ÿæ€ç³»ç»Ÿä¸­æœ‰å¤šç§çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼š

| å·¥å…· | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| React Context | å†…ç½®ï¼Œæ— éœ€é¢å¤–ä¾èµ– | å°å‹åº”ç”¨æˆ–ç»„ä»¶é—´å…±äº«å°‘é‡çŠ¶æ€ |
| Redux | å•ä¸€æ•°æ®æºï¼Œå¯é¢„æµ‹ | å¤§å‹åº”ç”¨ï¼Œå¤æ‚çŠ¶æ€é€»è¾‘ |
| MobX | å“åº”å¼ç¼–ç¨‹ | åå¥½å“åº”å¼ç¼–ç¨‹é£æ ¼çš„é¡¹ç›® |
| Zustand | ç®€å•ï¼Œè½»é‡ | ä¸æƒ³å¼•å…¥å¤æ‚çŠ¶æ€ç®¡ç†çš„å°ä¸­å‹é¡¹ç›® |

### è·¯ç”±ç®¡ç†

React Router æ˜¯ React åº”ç”¨ä¸­æœ€æµè¡Œçš„è·¯ç”±åº“ï¼š

```jsx
import { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom';

function App() {
  return (
    <Router>
      <nav>
        <Link to="/">é¦–é¡µ</Link> | <Link to="/about">å…³äº</Link>
      </nav>

      <Switch>
        <Route exact path="/" component={Home} />
        <Route path="/about" component={About} />
        <Route component={NoMatch} />
      </Switch>
    </Router>
  );
}
```

### UI ç»„ä»¶åº“

React ç”Ÿæ€ä¸­æœ‰è®¸å¤šä¼˜ç§€çš„ UI ç»„ä»¶åº“ï¼š

- **Ant Design**ï¼šä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€å’Œ React UI ç»„ä»¶åº“
- **Material-UI**ï¼šGoogle Material Design çš„ React å®ç°
- **Chakra UI**ï¼šç®€å•ã€æ¨¡å—åŒ–ä¸”å¯è®¿é—®çš„ç»„ä»¶åº“
- **React Bootstrap**ï¼šå°† Bootstrap ç»„ä»¶è½¬æ¢ä¸º React ç»„ä»¶
- **Semantic UI React**ï¼šå°† Semantic UI ä¸ React é›†æˆ

## React æœ€ä½³å®è·µ

### ç»„ä»¶è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªç»„ä»¶åº”è¯¥åªåšä¸€ä»¶äº‹
2. **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šé€šè¿‡ç»„åˆå°å‹ç»„ä»¶æ„å»ºå¤æ‚ UI
3. **ä¿æŒç»„ä»¶çº¯å‡€**ï¼šå°½é‡ç¼–å†™çº¯ç»„ä»¶ï¼Œå‡å°‘å‰¯ä½œç”¨
4. **åˆç†æ‹†åˆ†ç»„ä»¶**ï¼šæ ¹æ®åŠŸèƒ½ç‚¹è€Œéä»£ç è¡Œæ•°æ‹†åˆ†ç»„ä»¶

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨ React.memo**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
2. **ä½¿ç”¨ useMemo å’Œ useCallback**ï¼šè®°å¿†åŒ–è®¡ç®—å’Œå‡½æ•°
3. **è™šæ‹ŸåŒ–é•¿åˆ—è¡¨**ï¼šä½¿ç”¨ react-window æˆ– react-virtualized
4. **ä»£ç åˆ†å‰²**ï¼šä½¿ç”¨ React.lazy å’Œ Suspense å®ç°æŒ‰éœ€åŠ è½½

```jsx
const LazyComponent = React.lazy(() => import('./LazyComponent'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <LazyComponent />
    </Suspense>
  );
}
```

### æµ‹è¯•ç­–ç•¥

React åº”ç”¨çš„æµ‹è¯•é€šå¸¸åŒ…æ‹¬ï¼š

1. **å•å…ƒæµ‹è¯•**ï¼šæµ‹è¯•å•ä¸ªç»„ä»¶æˆ–å‡½æ•°
2. **é›†æˆæµ‹è¯•**ï¼šæµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’
3. **ç«¯åˆ°ç«¯æµ‹è¯•**ï¼šæµ‹è¯•æ•´ä¸ªç”¨æˆ·æµç¨‹

å¸¸ç”¨çš„æµ‹è¯•å·¥å…·ï¼š

- **Jest**ï¼šJavaScript æµ‹è¯•æ¡†æ¶
- **React Testing Library**ï¼šä¸“é—¨ç”¨äºæµ‹è¯• React ç»„ä»¶
- **Cypress**ï¼šç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶

## å®æˆ˜é¡¹ç›®ï¼šå¾…åŠäº‹é¡¹åº”ç”¨

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åº”ç”¨æ¥å®è·µ React çš„çŸ¥è¯†ï¼š

```jsx
import React, { useState } from 'react';

function TodoApp() {
  // çŠ¶æ€ç®¡ç†
  const [todos, setTodos] = useState([]);
  const [inputValue, setInputValue] = useState('');

  // æ·»åŠ æ–°å¾…åŠäº‹é¡¹
  const addTodo = () => {
    if (inputValue.trim() !== '') {
      setTodos([...todos, { id: Date.now(), text: inputValue, completed: false }]);
      setInputValue('');
    }
  };

  // åˆ‡æ¢å¾…åŠäº‹é¡¹çŠ¶æ€
  const toggleTodo = (id) => {
    setTodos(
      todos.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    );
  };

  // åˆ é™¤å¾…åŠäº‹é¡¹
  const deleteTodo = (id) => {
    setTodos(todos.filter(todo => todo.id !== id));
  };

  return (
    <div>
      <h1>å¾…åŠäº‹é¡¹åˆ—è¡¨</h1>
      <div>
        <input
          type="text"
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder="æ·»åŠ æ–°å¾…åŠäº‹é¡¹"
        />
        <button onClick={addTodo}>æ·»åŠ </button>
      </div>
      <ul>
        {todos.map(todo => (
          <li key={todo.id}>
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => toggleTodo(todo.id)}
            />
            <span style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}>
              {todo.text}
            </span>
            <button onClick={() => deleteTodo(todo.id)}>åˆ é™¤</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoApp;
```

è¿™ä¸ªç®€å•çš„åº”ç”¨å±•ç¤ºäº† React çš„æ ¸å¿ƒæ¦‚å¿µï¼šç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶å¤„ç†å’Œåˆ—è¡¨æ¸²æŸ“ã€‚

## æ€»ç»“

React ä½œä¸ºç°ä»£å‰ç«¯å¼€å‘çš„é‡è¦å·¥å…·ï¼Œä¸ºæˆ‘ä»¬æ„å»ºé«˜æ•ˆã€å¯ç»´æŠ¤çš„ç”¨æˆ·ç•Œé¢æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼ŒReact çš„ç”Ÿæ€ç³»ç»Ÿä¸æ–­æˆç†Ÿï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„è§£å†³æ–¹æ¡ˆã€‚

é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬äº†è§£äº†ï¼š

- React çš„æ ¸å¿ƒæ¦‚å¿µå’Œç»„ä»¶åŒ–æ€æƒ³
- JSX è¯­æ³•å’Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
- Hooks çš„ä½¿ç”¨å’ŒçŠ¶æ€ç®¡ç†
- React ç”Ÿæ€ç³»ç»Ÿçš„å¸¸ç”¨å·¥å…·å’Œåº“
- React åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•ç­–ç•¥

å½“ç„¶ï¼ŒReact çš„ä¸–ç•Œè¿œä¸æ­¢è¿™äº›ï¼Œè¿˜æœ‰æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆNext.jsï¼‰ã€ç§»åŠ¨ç«¯å¼€å‘ï¼ˆReact Nativeï¼‰ç­‰é«˜çº§ä¸»é¢˜å€¼å¾—æ¢ç´¢ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ å…¥é—¨ Reactï¼Œå¹¶åœ¨ä½ çš„å‰ç«¯å¼€å‘æ—…ç¨‹ä¸­æä¾›ä¸€äº›å‚è€ƒã€‚

è®°ä½ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼æ˜¯å®è·µã€‚å°è¯•æ„å»ºä¸€äº›å°é¡¹ç›®ï¼Œå°†å­¦åˆ°çš„çŸ¥è¯†åº”ç”¨åˆ°å®é™…ä¸­ï¼Œä½ ä¼šå‘ç° React çš„é­…åŠ›æ‰€åœ¨ï¼ğŸš€

> "ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿èƒ½åœ¨æœºå™¨ä¸Šè¿è¡Œã€‚" â€”â€” Harold Abelson

---

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ğŸ˜Š