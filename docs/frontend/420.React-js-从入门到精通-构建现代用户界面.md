---
title: React.js ä»å…¥é—¨åˆ°ç²¾é€šï¼šæ„å»ºç°ä»£ç”¨æˆ·ç•Œé¢
date: 2023-11-15 10:30:00
permalink: /pages/reactjs-intro/
categories: 
  - å‰ç«¯å¼€å‘
tags:
  - React
  - JavaScript
  - å‰ç«¯æ¡†æ¶
author: 
  name: Jorgen
  link: https://github.com/jorgen-zhao
---

## å‰è¨€

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Jorgenï¼ğŸ‘‹ åœ¨æˆ‘çš„åšå®¢ä¸­ï¼Œå·²ç»æœ‰ä¸€ç¯‡è¯¦ç»†ä»‹ç» Vue.js çš„æ–‡ç«  [Vue-js-ä»å…¥é—¨åˆ°å®è·µ-æ„å»ºç°ä»£å‰ç«¯åº”ç”¨](/pages/410.Vue-js-ä»å…¥é—¨åˆ°å®è·µ-æ„å»ºç°ä»£å‰ç«¯åº”ç”¨.md)ã€‚Vue ç¡®å®æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„å‰ç«¯æ¡†æ¶ï¼Œä½†æˆ‘å‘ç°æˆ‘çš„åšå®¢ä¸­ç¼ºå°‘äº†å¦ä¸€ä¸ªåŒæ ·é‡è¦çš„æ¡†æ¶â€”â€”React.jsï¼

ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘è€…ï¼ŒæŒæ¡ React å‡ ä¹æ˜¯å¿…å¤‡æŠ€èƒ½ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦å¤§å®¶ä¸€èµ·æ¢ç´¢ React çš„ä¸–ç•Œï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©ä½ æ„å»ºç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢ã€‚ğŸš€

::: tip
React ç”± Facebook å¼€å‘å¹¶ç»´æŠ¤ï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ã€‚å®ƒçš„ç»„ä»¶åŒ–æ€æƒ³å’Œè™šæ‹Ÿ DOM æŠ€æœ¯å½»åº•æ”¹å˜äº†æˆ‘ä»¬æ„å»º Web åº”ç”¨çš„æ–¹å¼ã€‚
:::

## React åŸºç¡€æ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ Reactï¼Ÿ

React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒé‡‡ç”¨ç»„ä»¶åŒ–çš„å¼€å‘æ¨¡å¼ï¼Œè®©å¼€å‘è€…å¯ä»¥å°†å¤æ‚çš„ UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚

```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

ä¸Šé¢çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªç®€å•çš„ React ç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª `name` å±æ€§å¹¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ã€‚

### JSX è¯­æ³•

JSX æ˜¯ React ä¸­çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ JavaScript ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ä»£ç ï¼š

```jsx
const element = <h1 className="greeting">Hello, world!</h1>;
```

è™½ç„¶çœ‹èµ·æ¥åƒ HTMLï¼Œä½† JSX å®é™…ä¸Šæ˜¯ JavaScript çš„ä¸€ç§è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚

::: theorem
JSX ä¸­çš„å±æ€§åä½¿ç”¨ camelCase å‘½åæ–¹å¼ï¼Œä¾‹å¦‚ `class` å˜ä¸º `className`ï¼Œ`for` å˜ä¸º `htmlFor`ã€‚
:::

## ç»„ä»¶ä¸ Props

React çš„æ ¸å¿ƒæ˜¯ç»„ä»¶ã€‚ç»„ä»¶æ˜¯æ„å»º React åº”ç”¨çš„åŸºæœ¬å•å…ƒï¼Œå®ƒä»¬æ¥æ”¶è¾“å…¥ï¼ˆç§°ä¸º propsï¼‰å¹¶è¿”å›æè¿° UI çš„ React å…ƒç´ ã€‚

### å‡½æ•°ç»„ä»¶

å‡½æ•°ç»„ä»¶æ˜¯ React ä¸­æœ€ç®€å•çš„ç»„ä»¶å½¢å¼ï¼Œå°±æ˜¯ä¸€ä¸ªè¿”å› JSX çš„ JavaScript å‡½æ•°ï¼š

```jsx
function WelcomeMessage({ name }) {
  return <h1>æ¬¢è¿ï¼Œ{name}ï¼</h1>;
}

// ä½¿ç”¨ç»„ä»¶
<WelcomeMessage name="Jorgen" />
```

### ç±»ç»„ä»¶

é™¤äº†å‡½æ•°ç»„ä»¶ï¼ŒReact è¿˜æ”¯æŒç±»ç»„ä»¶ï¼š

```jsx
class WelcomeMessage extends React.Component {
  render() {
    return <h1>æ¬¢è¿ï¼Œ{this.props.name}ï¼</h1>;
  }
}
```

::: tip
ä» React 16.8 å¼€å§‹ï¼Œå‡½æ•°ç»„ä»¶é€šè¿‡ Hooks ä¹Ÿèƒ½æ‹¥æœ‰çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä½¿å¾—å‡½æ•°ç»„ä»¶æˆä¸ºæ›´å—æ¬¢è¿çš„é€‰æ‹©ã€‚
:::

## çŠ¶æ€ç®¡ç†

åœ¨ React ä¸­ï¼Œç»„ä»¶çš„çŠ¶æ€ï¼ˆStateï¼‰ç”¨äºå­˜å‚¨éšæ—¶é—´å˜åŒ–çš„æ•°æ®ã€‚å‡½æ•°ç»„ä»¶ä½¿ç”¨ `useState` Hook æ¥ç®¡ç†çŠ¶æ€ï¼š

```jsx
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>ä½ ç‚¹å‡»äº† {count} æ¬¡</p>
      <button onClick={() => setCount(count + 1)}>
        ç‚¹å‡»æˆ‘
      </button>
    </div>
  );
}
```

### ç”Ÿå‘½å‘¨æœŸä¸å‰¯ä½œç”¨

åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `useEffect` Hook æ¥å¤„ç†å‰¯ä½œç”¨ï¼ˆå¦‚æ•°æ®è·å–ã€è®¢é˜…æˆ–æ‰‹åŠ¨ä¿®æ”¹ DOMï¼‰ï¼š

```jsx
import React, { useState, useEffect } from 'react';

function Example() {
  const [count, setCount] = useState(0);

  // ç±»ä¼¼äº componentDidMount å’Œ componentDidUpdate
  useEffect(() => {
    // ä½¿ç”¨æµè§ˆå™¨çš„ API æ›´æ–°æ–‡æ¡£æ ‡é¢˜
    document.title = `ä½ ç‚¹å‡»äº† ${count} æ¬¡`;
  });

  return (
    <div>
      <p>ä½ ç‚¹å‡»äº† {count} æ¬¡</p>
      <button onClick={() => setCount(count + 1)}>
        ç‚¹å‡»æˆ‘
      </button>
    </div>
  );
}
```

## äº‹ä»¶å¤„ç†

React äº‹ä»¶å¤„ç†ç³»ç»Ÿä¸åŸç”Ÿ DOM äº‹ä»¶ç³»ç»Ÿç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›è¯­æ³•å·®å¼‚ï¼š

```jsx
function ToggleButton() {
  const [isToggleOn, setIsToggleOn] = useState(true);

  function handleClick() {
    setIsToggleOn(!isToggleOn);
  }

  return (
    <button onClick={handleClick}>
      {isToggleOn ? 'å…³é—­' : 'å¼€å¯'}
    </button>
  );
}
```

::: right
æ³¨æ„ï¼šReact äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆcamelCaseï¼‰ï¼Œè€Œä¸æ˜¯å°å†™ã€‚
:::

## æ¡ä»¶æ¸²æŸ“

React ä¸­æœ‰å¤šç§æ¡ä»¶æ¸²æŸ“çš„æ–¹å¼ï¼š

### ä½¿ç”¨ if è¯­å¥

```jsx
function Greeting({ isLoggedIn }) {
  if (isLoggedIn) {
    return <h1>æ¬¢è¿å›æ¥ï¼</h1>;
  }
  return <h1>è¯·ç™»å½•</h1>;
}
```

### ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦

```jsx
function Greeting({ isLoggedIn }) {
  return (
    <div>
      {isLoggedIn ? (
        <h1>æ¬¢è¿å›æ¥ï¼</h1>
      ) : (
        <h1>è¯·ç™»å½•</h1>
      )}
    </div>
  );
}
```

### ä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦

```jsx
function Mailbox({ unreadMessages }) {
  return (
    <div>
      <h1>æ‚¨çš„é‚®ç®±</h1>
      {unreadMessages.length > 0 &&
        <h2>æ‚¨æœ‰ {unreadMessages.length} å°æœªè¯»é‚®ä»¶</h2>
      }
    </div>
  );
}
```

## åˆ—è¡¨ä¸ Keys

åœ¨ React ä¸­æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸ªåˆ—è¡¨é¡¹æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ keyï¼š

```jsx
function NumberList({ numbers }) {
  const listItems = numbers.map((number) =>
    <li key={number.toString()}>
      {number}
    </li>
  );

  return (
    <ul>{listItems}</ul>
  );
}
```

::: theorem
Key å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ï¼Œæ·»åŠ äº†æˆ–è¢«åˆ é™¤äº†ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œkey åº”è¯¥æ˜¯åˆ—è¡¨é¡¹ä¸­ç¨³å®šä¸”å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚
:::

## è¡¨å•å¤„ç†

React ä¸­çš„è¡¨å•å¤„ç†ä¸æ™®é€š DOM è¡¨å•ç•¥æœ‰ä¸åŒï¼š

```jsx
function NameForm() {
  const [value, setValue] = useState('');

  const handleChange = (event) => {
    setValue(event.target.value);
  }

  const handleSubmit = (event) => {
    alert('æäº¤çš„åå­—: ' + value);
    event.preventDefault();
  }

  return (
    <form onSubmit={handleSubmit}>
      <label>
        åå­—:
        <input type="text" value={value} onChange={handleChange} />
      </label>
      <input type="submit" value="æäº¤" />
    </form>
  );
}
```

## React Hooks

Hooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ï¼š

### useState

```jsx
const [state, setState] = useState(initialState);
```

### useEffect

```jsx
useEffect(() => {
  // æ‰§è¡Œå‰¯ä½œç”¨
  return () => {
    // æ¸…ç†å‡½æ•°
  };
}, [dependencies]);
```

### useContext

```jsx
const context = useContext(MyContext);
```

### useReducer

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
```

### è‡ªå®šä¹‰ Hooks

ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„ Hooks æ¥å¤ç”¨ç»„ä»¶é€»è¾‘ï¼š

```jsx
function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);

  const increment = () => setCount(count + 1);
  const decrement = () => setCount(count - 1);
  const reset = () => setCount(initialValue);

  return { count, increment, decrement, reset };
}
```

## é«˜çº§ä¸»é¢˜

### è™šæ‹Ÿ DOM ä¸ Reconciliation

React ä½¿ç”¨è™šæ‹Ÿ DOM æ¥æé«˜æ€§èƒ½ã€‚å½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼Œç„¶åé€šè¿‡ç®—æ³•ï¼ˆç§°ä¸º Reconciliationï¼‰æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚ï¼Œæœ€ååªå°†å®é™…éœ€è¦æ›´æ–°çš„éƒ¨åˆ†åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šã€‚

### Context API

Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œè€Œä¸å¿…ä¸€å±‚å±‚åœ°æ‰‹åŠ¨ä¼ é€’ propsï¼š

```jsx
const ThemeContext = React.createContext('light');

function ThemedButton() {
  const theme = useContext(ThemeContext);
  return <button className={theme}>æˆ‘æœ‰ä¸€ä¸ªä¸»é¢˜ï¼</button>;
}
```

### é”™è¯¯è¾¹ç•Œ

é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§ React ç»„ä»¶ï¼Œå®ƒå¯ä»¥åœ¨å…¶å­ç»„ä»¶æ ‘ä¸­æ•è· JavaScript é”™è¯¯ï¼Œè®°å½•è¿™äº›é”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªå›é€€ UIï¼š

```jsx
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    // æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    // ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨
    logErrorToService(error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      // ä½ å¯ä»¥æ¸²æŸ“ä»»ä½•è‡ªå®šä¹‰çš„é™çº§ UI
      return <h1>å‡ºé”™äº†ã€‚</h1>;
    }

    return this.props.children;
  }
}
```

## ç»“è¯­

React æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å‰ç«¯æ¡†æ¶ï¼Œå®ƒé€šè¿‡ç»„ä»¶åŒ–ã€è™šæ‹Ÿ DOM å’Œ Hooks ç­‰ç‰¹æ€§ï¼Œæå¤§åœ°ç®€åŒ–äº†ç°ä»£ Web åº”ç”¨çš„å¼€å‘è¿‡ç¨‹ã€‚ğŸ‰

ä»ç®€å•çš„é™æ€é¡µé¢åˆ°å¤æ‚çš„å•é¡µåº”ç”¨ï¼ŒReact éƒ½èƒ½èƒœä»»ã€‚æŒæ¡ React ä¸ä»…èƒ½è®©ä½ æ›´å¥½åœ°æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œè¿˜èƒ½è®©ä½ ç†è§£ç°ä»£å‰ç«¯å¼€å‘çš„æ ¸å¿ƒç†å¿µã€‚

::: tip
å­¦ä¹  React æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œå»ºè®®å¤šå®è·µã€å¤šæ€è€ƒï¼Œå¹¶ç»“åˆé¡¹ç›®æ¥åŠ æ·±ç†è§£ã€‚è®°ä½ï¼Œæ¡†æ¶åªæ˜¯å·¥å…·ï¼Œè§£å†³é—®é¢˜çš„èƒ½åŠ›æ‰æ˜¯æœ€é‡è¦çš„ã€‚
::>

å¦‚æœä½ å¯¹ React æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç»§ç»­æ¢ç´¢ä»¥ä¸‹ä¸»é¢˜ï¼š

- React Routerï¼šç”¨äºå¤„ç†å•é¡µåº”ç”¨çš„è·¯ç”±
- Reduxï¼šç”¨äºå¤æ‚åº”ç”¨çš„çŠ¶æ€ç®¡ç†
- Next.jsï¼šç”¨äºæœåŠ¡ç«¯æ¸²æŸ“çš„ React æ¡†æ¶
- React Testing Libraryï¼šç”¨äºæµ‹è¯• React ç»„ä»¶

å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å…¥é—¨ Reactï¼Œå¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼ğŸ˜Š