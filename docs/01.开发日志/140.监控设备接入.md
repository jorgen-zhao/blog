---
title: 监控设备接入
date: 2023-02-05 09:24:01
permalink: /pages/a3a632/
categories:
  - 开发日志
tags:
  - 
author: 
  name: Jorgen
  link: https://gitee.com/jorgenme
---

::: tip 说明
对接海康摄像头的一些记录
:::

## 海康摄像头的对接方式

## 设备网络SDK
- 下载地址：https://open.hikvision.com/download/5cda567cf47ae80dd41a54b3?type=10)
> 设备网络SDK是基于设备私有网络通信协议开发的，为海康威视各类硬件产品服务的配套模块，用于远程访问和控制设备的软件二次开发，内含SDK动态库、开发文档 及Demo示例（包括Java、c#、Python等）。

本项目主要是使用Java对接设备网络SDK方式。

优点: 有现成的DEMO,跟着txt说明，很快就能对接上海康的网络摄像头。实现诸如:实时监控,录像回放等功能。

缺点: 
- 使用JNI这种调用方式。存在潜在的性能风险。
- 语音对讲库：音频编解码目前仅Win32版本SDK支持。Linux系统下无语音对讲、语音广播、音频编解码功能，仅支持语音转发接口。

## WEB开发包
下载地址: https://open.hikvision.com/download/5cda567cf47ae80dd41a54b3?type=10&id=4c945d18fa5f49638ce517ec32e24e24
- WEB3.2无插件版本开发包，支持高版本谷歌、火狐浏览器，同时需要设备支持Websocket取流。无插件版本需要使用nginx代理服务器。
- 支持Win32&Win64，支持的浏览器有：IE6~IE11、Chrome8~ Chrome42、Firefox3.5~ Firefox52（32位，64位是到Firefox40）、Safari5.0.2+，需要浏览器支持NPAPI。

优点: 使用浏览器就能快速搭建器调试网络摄像头的模块，适合用来演示等场景吧

缺点: 感觉功能有些佛学。我在本地调试的时候，不可语音对讲、只能单画面;会有延迟，失败的几率很高；只能提供IE和旧版chrome浏览器的解码插件。而且还需要设备支持ws。这个方便是方便，不过要求也很高。个人不推荐使用。

## ISUP开发包
下载地址：https://open.hikvision.com/download/5cda567cf47ae80dd41a54b3?type=10&id=18e1e779efed4593bfceba6703d7f6a8
> 基于私有ISUP协议开发的SDK，动态库形式提供，适用于“硬件设备没有固定IP地址”的网络环境，是硬件设备和平台服务器交互的通信接口，支持AI智能前后端产品、通用前后端产品、门禁产品、交通产品、报警产品、热成像产品等多种网络硬件设备。

这个主要对接海康自家的私有协议EHone。目前Java版本，我还没有看到开源的版本。个人感觉应该与Java SDK对接这种方式类似吧。[找到一篇博客](https://blog.csdn.net/x_y_csdn/article/details/109691014)，希望能有所帮助吧。

- Github上有个[GO语言实现的EHome对接版本](https://github.com/tsingeye/FreeEhome)。目前已经实现的功能包括：实时预览， 报警监听， 设备控制，云台控制。系统基于beego框架开发，提供RESTful接口。CMS信令由海康ehome协议而来，基于UDP+XML进行通信。SMS直接使用[ZLMediaKit](https://github.com/xia-chu/ZLMediaKit)

这个协议呢，主要是使用物联网卡。这种设备肯定价格更贵咯。不过，能适应一些网线拉不到的地方。各有利弊吧

## 萤石云
- 地址：https://open.ys7.com/console/device.html

个人觉得最简单的对接方式哈😂。注册一个账号，然后将设备的设备号与校验码注册上去。免费账号可以接入10台设备。接入之后，就能看到设备，点击可看直播，回放。控制等操作了。如果想集成，也提供了[JS版本的接口与demo](https://open.ys7.com/doc/zh/uikit/uikit_javascript.html)。可供你快速搭建一个拥有监控演示的系统。而且无论移动端还是PC端都能很好的使用。体验不错。

缺点: 高度集成化了。如果设备多，或者想定制化的话，要么花钱走企业服务。要么就多注册几个账号，来注册使用。

## 国标
> GB28181协议指的是国家标准`GB/T 28181—2016`《公共安全视频监控联网系统信息传输、交换、控制技术要求》。

1. 该标准规定了公共安全视频监控联网系统的互联结构， 传输、交换、控制的基本要求和安全性要求， 以及控制、传输流程和协议接口等技术要求，是视频监控领域的国家标准。GB28181协议信令层面使用的是`SIP（Session Initiation Protocol）协议`。
2. 流媒体传输层面使用的是`实时传输协议（Real-time Transport Protocol，RTP）协议`
3. 因此可以理解为GB28181是在国际通用标准的基础之上进行了私有化定制以满足视频监控联网系统互联传输的标准化需求。

优点：不用考虑之后对接的摄像头不是海康不能对接的情况。基本国内的摄像头都会支持国标。

缺点：国标的协议繁杂，实现复杂。

Java版本国标协议开源项目推荐[wvp-GB28181-pro](https://github.com/648540858/wvp-GB28181-pro)。基于GB28181-2016标准实现的网络视频平台，支持NAT穿透，支持海康、大华、宇视等品牌的IPC、NVR、DVR接入。支持国标级联，支持rtsp/rtmp等视频流转发到国标平台，支持rtsp/rtmp等推流转发到国标平台。

也非常容易上手，根据项目的说明，很快就能搭建起一个监控系统。而且如果有定制需求，可以自己拿到源码更改。
